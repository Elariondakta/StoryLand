!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=0,e=function(n,e,r){var t,o,i;n.plugins.table?n.plugins.table.insertTable(e,r):(o=e,i=r,(t=n).undoManager.transact(function(){var n,e;t.insertContent(function(n,e){var r,t,o;for(o='<table data-mce-id="mce" style="width: 100%">',o+="<tbody>",t=0;t<e;t++){for(o+="<tr>",r=0;r<n;r++)o+="<td><br></td>";o+="</tr>"}return o+="</tbody>",o+="</table>"}(o,i)),(n=t.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),e=t.dom.select("td,th",n),t.selection.setCursorLocation(e[0],0)}))},t=function(n,e,r){var t,o,i,u;o=(t=n.editorUpload.blobCache).create((i="mceu",u=(new Date).getTime(),i+"_"+Math.floor(1e9*Math.random())+ ++c+String(u)),r,e),t.add(o),n.insertContent(n.dom.createHTML("img",{src:o.blobUri()}))},o="undefined"!=typeof window?window:Function("return this;")(),i=function(n,e){return function(n,e){for(var r=e!==undefined&&null!==e?e:o,t=0;t<n.length&&r!==undefined&&null!==r;++t)r=r[n[t]];return r}(n.split("."),e)},r=function(n,e){var r=i(n,e);if(r===undefined||null===r)throw n+" not available on this browser";return r};function u(){return new(r("FileReader"))}var s,a,f,d,l=tinymce.util.Tools.resolve("tinymce.util.Promise"),m=function(r){return new l(function(n){var e=new u;e.onloadend=function(){n(e.result.split(",")[1])},e.readAsDataURL(r)})},v=function(){return new l(function(e){var n;(n=document.createElement("input")).type="file",n.style.position="fixed",n.style.left=0,n.style.top=0,n.style.opacity=.001,document.body.appendChild(n),n.onchange=function(n){e(Array.prototype.slice.call(n.target.files))},n.click(),n.parentNode.removeChild(n)})},g=function(r){r.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){v().then(function(n){var e=n[0];m(e).then(function(n){t(r,n,e)})})}}),r.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){e(r,2,2)}})},h=function(n){return function(){return n}},T=h(!1),p=h(!0),N=T,E=p,O=function(){return y},y=(d={fold:function(n,e){return n()},is:N,isSome:N,isNone:E,getOr:f=function(n){return n},getOrThunk:a=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:f,orThunk:a,map:O,ap:O,each:function(){},bind:O,flatten:O,exists:N,forall:E,filter:O,equals:s=function(n){return n.isNone()},equals_:s,toArray:function(){return[]},toString:h("none()")},Object.freeze&&Object.freeze(d),d),b=function(r){var n=function(){return r},e=function(){return o},t=function(n){return n(r)},o={fold:function(n,e){return e(r)},is:function(n){return r===n},isSome:E,isNone:N,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return b(n(r))},ap:function(n){return n.fold(O,function(n){return b(n(r))})},each:function(n){n(r)},bind:t,flatten:n,exists:t,forall:t,filter:function(n){return n(r)?o:y},equals:function(n){return n.is(r)},equals_:function(n,e){return n.fold(N,function(n){return e(r,n)})},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},w={some:b,none:O,from:function(n){return null===n||n===undefined?y:b(n)}},S=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:h(n)}},x={fromHtml:function(n,e){var r=(e||document).createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return S(r.childNodes[0])},fromTag:function(n,e){var r=(e||document).createElement(n);return S(r)},fromText:function(n,e){var r=(e||document).createTextNode(n);return S(r)},fromDom:S,fromPoint:function(n,e,r){var t=n.dom();return w.from(t.elementFromPoint(e,r)).map(S)}},D={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},C=function(n){return n.dom().nodeName.toLowerCase()},A=function(n){return n.dom().nodeType},M=function(e){return function(n){return A(n)===e}},_=M(D.ELEMENT),R=M(D.TEXT),k=M(D.DOCUMENT),I={name:C,type:A,value:function(n){return n.dom().nodeValue},isElement:_,isText:R,isDocument:k,isComment:function(n){return A(n)===D.COMMENT||"#comment"===C(n)}},U=function(e){return function(n){return function(n){if(null===n)return"null";var e=typeof n;return"object"===e&&Array.prototype.isPrototypeOf(n)?"array":"object"===e&&String.prototype.isPrototypeOf(n)?"string":e}(n)===e}},L=U("string"),B=U("array"),F=U("boolean"),q=U("function"),P=function(n,e){for(var r=0,t=n.length;r<t;r++){var o=n[r];if(e(o,r,n))return w.some(o)}return w.none()},j=(Array.prototype.slice,q(Array.from)&&Array.from,function(r){var t,o=!1;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o||(o=!0,t=r.apply(null,n)),t}}),X=j(function(){return H(x.fromDom(document))}),H=function(n){var e=n.dom().body;if(null===e||e===undefined)throw"Body is not available yet";return x.fromDom(e)},W={body:X,getBody:H,inBody:function(n){var e=I.isText(n)?n.dom().parentNode:n.dom();return e!==undefined&&null!==e&&e.ownerDocument.body.contains(e)}},Y=function(n,e){var r=function(n,e){for(var r=0;r<n.length;r++){var t=n[r];if(t.test(e))return t}return undefined}(n,e);if(!r)return{major:0,minor:0};var t=function(n){return Number(e.replace(r,"$"+n))};return G(t(1),t(2))},z=function(){return G(0,0)},G=function(n,e){return{major:n,minor:e}},V={nu:G,detect:function(n,e){var r=String(e).toLowerCase();return 0===n.length?z():Y(n,r)},unknown:z},$="Firefox",J=function(n,e){return function(){return e===n}},K=function(n){var e=n.current;return{current:e,version:n.version,isEdge:J("Edge",e),isChrome:J("Chrome",e),isIE:J("IE",e),isOpera:J("Opera",e),isFirefox:J($,e),isSafari:J("Safari",e)}},Q={unknown:function(){return K({current:undefined,version:V.unknown()})},nu:K,edge:h("Edge"),chrome:h("Chrome"),ie:h("IE"),opera:h("Opera"),firefox:h($),safari:h("Safari")},Z="Windows",nn="Android",en="Solaris",rn="FreeBSD",tn=function(n,e){return function(){return e===n}},on=function(n){var e=n.current;return{current:e,version:n.version,isWindows:tn(Z,e),isiOS:tn("iOS",e),isAndroid:tn(nn,e),isOSX:tn("OSX",e),isLinux:tn("Linux",e),isSolaris:tn(en,e),isFreeBSD:tn(rn,e)}},un={unknown:function(){return on({current:undefined,version:V.unknown()})},nu:on,windows:h(Z),ios:h("iOS"),android:h(nn),linux:h("Linux"),osx:h("OSX"),solaris:h(en),freebsd:h(rn)},cn=function(n,e){var r=String(e).toLowerCase();return P(n,function(n){return n.search(r)})},sn=function(n,r){return cn(n,r).map(function(n){var e=V.detect(n.versionRegexes,r);return{current:n.name,version:e}})},an=function(n,r){return cn(n,r).map(function(n){var e=V.detect(n.versionRegexes,r);return{current:n.name,version:e}})},fn=function(n,e){return-1!==n.indexOf(e)},dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ln=function(e){return function(n){return fn(n,e)}},mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return fn(n,"edge/")&&fn(n,"chrome")&&fn(n,"safari")&&fn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dn],search:function(n){return fn(n,"chrome")&&!fn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return fn(n,"msie")||fn(n,"trident")}},{name:"Opera",versionRegexes:[dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ln("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ln("firefox")},{name:"Safari",versionRegexes:[dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(fn(n,"safari")||fn(n,"mobile/"))&&fn(n,"applewebkit")}}],vn=[{name:"Windows",search:ln("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return fn(n,"iphone")||fn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ln("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ln("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ln("linux"),versionRegexes:[]},{name:"Solaris",search:ln("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ln("freebsd"),versionRegexes:[]}],gn={browsers:h(mn),oses:h(vn)},hn=function(n){var e=gn.browsers(),r=gn.oses(),t=sn(e,n).fold(Q.unknown,Q.nu),o=an(r,n).fold(un.unknown,un.nu);return{browser:t,os:o,deviceType:function d(n,e,r){var t=n.isiOS()&&!0===/ipad/i.test(r),o=n.isiOS()&&!t,i=n.isAndroid()&&3===n.version.major,u=n.isAndroid()&&4===n.version.major,c=t||i||u&&!0===/mobile/i.test(r),s=n.isiOS()||n.isAndroid(),a=s&&!c,f=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(r);return{isiPad:h(t),isiPhone:h(o),isTablet:h(c),isPhone:h(a),isTouch:h(s),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(f)}}(o,t,n)}},Tn=j(function(){var n=navigator.userAgent;return hn(n)}),pn=D.ELEMENT,Nn=D.DOCUMENT,En=function(n){return n.nodeType!==pn&&n.nodeType!==Nn||0===n.childElementCount},On={all:function(n,e){var r=e===undefined?document:e.dom();return En(r)?[]:function(n,e){for(var r=n.length,t=new Array(r),o=0;o<r;o++){var i=n[o];t[o]=e(i,o,n)}return t}(r.querySelectorAll(n),x.fromDom)},is:function(n,e){var r=n.dom();if(r.nodeType!==pn)return!1;if(r.matches!==undefined)return r.matches(e);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(e);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(e);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},one:function(n,e){var r=e===undefined?document:e.dom();return En(r)?w.none():w.from(r.querySelector(n)).map(x.fromDom)}},yn=function(n,e){return n.dom()===e.dom()},bn=(Tn().browser.isIE(),yn);function wn(n,e,r,t,o){return n(r,t)?w.some(r):q(o)&&o(r)?w.none():e(r,t,o)}var Sn,xn=function(n,e,r){for(var t=n.dom(),o=q(r)?r:h(!1);t.parentNode;){t=t.parentNode;var i=x.fromDom(t);if(e(i))return w.some(i);if(o(i))break}return w.none()},Dn=function(n,e){var r,t;return P(n.dom().childNodes,(r=e,t=x.fromDom,function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(t.apply(null,arguments))})).map(x.fromDom)},Cn=function(n,t){var o=function(n){for(var e=0;e<n.childNodes.length;e++){if(t(x.fromDom(n.childNodes[e])))return w.some(x.fromDom(n.childNodes[e]));var r=o(n.childNodes[e]);if(r.isSome())return r}return w.none()};return o(n.dom())},An={first:function(n){return Cn(W.body(),n)},ancestor:xn,closest:function(n,e,r){return wn(function(n){return e(n)},xn,n,e,r)},sibling:function(e,r){var n=e.dom();return n.parentNode?Dn(x.fromDom(n.parentNode),function(n){return!bn(e,n)&&r(n)}):w.none()},child:Dn,descendant:Cn},Mn=function(n,e,r){return An.ancestor(n,function(n){return On.is(n,e)},r)},_n=function(n,e,r){return wn(On.is,Mn,n,e,r)},Rn={getToolbarItemsOr:(Sn=B,function(n,e,r){var t,o,i,u,c,s=e in n.settings?n.settings[e]:r;return function(n,e){if(!e(n))throw new Error("Default value doesn't match requested type.")}(r,Sn),o=r,B(t=s)?t:L(t)?"string"==typeof(u=t)?(c=/[ ,]/,u.split(c).filter(function(n){return 0<n.length})):u:F(t)?(i=o,!1===t?[]:i):o})},kn=function(n){return Rn.getToolbarItemsOr(n,"inlite_selection_toolbar",["bold","forecolor","italic","|","form:link-form","h2","h3","blockquote"])},In=function(n){return Rn.getToolbarItemsOr(n,"inlite_insert_toolbar",["quickimage","quicktable"])},Un=function(o){o.ui.registry.addContextToolbar("quickblock",{predicate:function(n){var e=x.fromDom(n),r=o.schema.getTextBlockElements(),t=function(n){return n.dom()===o.getBody()};return _n(e,"table",t).fold(function(){return An.closest(e,function(n){return I.name(n)in r&&o.dom.isEmpty(n.dom())},t).isSome()},function(){return!1})},items:In(o),position:"line",scope:"editor"})},Ln=(tinymce.util.Tools.resolve("tinymce.util.Tools"),tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),function(n,e){n.execCommand("FormatBlock",!1,e)}),Bn=function(t){for(var n=function(n){var e,r="h"+n;t.ui.registry.addToggleButton(r,{type:"togglebutton",text:r.toUpperCase(),tooltip:"Heading "+n,onSetup:function(n){return t.selection.selectorChangedWithUnbind(r,n.setActive).unbind},onAction:(e=r,function(){Ln(t,e)})})},e=1;e<6;e++)n(e)},Fn=function(e){e.ui.registry.addContextToolbar("textselection",{type:"contexttoolbar",predicate:function(n){return!e.selection.isCollapsed()},items:kn(e),position:"selection"})};n.add("inlite",function(n){g(n),Un(n),Bn(n),Fn(n)}),function qn(){}}();