!function(){"use strict";var e,t,n,o,r,c,i,N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},h=function(n,o){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(o.apply(null,arguments))}},U=function(e){return function(){return e}},b=function(e){return e},f=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var a=new Array(arguments.length-1),n=1;n<arguments.length;n++)a[n-1]=arguments[n];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];var r=a.concat(n);return i.apply(null,r)}},k=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,arguments)}},a=function(e){return function(){throw new Error(e)}},u=function(e){return e()},s=U(!1),l=U(!0),d=s,m=l,g=function(){return v},v=(o={fold:function(e,t){return e()},is:d,isSome:d,isNone:m,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:n,orThunk:t,map:g,ap:g,each:function(){},bind:g,flatten:g,exists:d,forall:m,filter:g,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:U("none()")},Object.freeze&&Object.freeze(o),o),p=function(n){var e=function(){return n},t=function(){return r},o=function(e){return e(n)},r={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return p(e(n))},ap:function(e){return e.fold(g,function(e){return p(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?r:v},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(d,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},P={some:p,none:g,from:function(e){return null===e||e===undefined?v:p(e)}},y=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===t}},x=y("string"),w=y("object"),S=y("array"),C=y("boolean"),z=y("function"),O=y("number"),T=(r=Array.prototype.indexOf)===undefined?function(e,t){return _(e,t)}:function(e,t){return r.call(e,t)},M=function(e,t){return-1<T(e,t)},H=function(e,t){return I(e,t).isSome()},E=function(e,t){for(var n=[],o=0;o<e.length;o+=t){var r=e.slice(o,o+t);n.push(r)}return n},V=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r,e)}return o},A=function(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n,e)},B=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o,e)&&n.push(i)}return n},D=function(e,t,n){return function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)}(e,function(e){n=t(n,e)}),n},R=function(e,t,n){return A(e,function(e){n=t(n,e)}),n},F=function(e,t){for(var n=0,o=e.length;n<o;n++){var r=e[n];if(t(r,n,e))return P.some(r)}return P.none()},I=function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n],n,e))return P.some(n);return P.none()},_=function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n]===t)return n;return-1},L=Array.prototype.push,j=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);L.apply(t,e[n])}return t},W=function(e,t){var n=V(e,t);return j(n)},G=function(e,t){for(var n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n,e))return!1;return!0},X=Array.prototype.slice,Y=function(e){var t=X.call(e,0);return t.reverse(),t},$=function(e,t){return B(e,function(e){return!M(t,e)})},q=function(e){return[e]},K=function(e){return 0===e.length?P.none():P.some(e[0])},J=function(e){return 0===e.length?P.none():P.some(e[e.length-1])},Q=z(Array.from)?Array.from:function(e){return X.call(e)},Z=Object.prototype.hasOwnProperty,ee=function(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<e.length;o++){var r=e[o];for(var i in r)Z.call(r,i)&&(n[i]=a(n[i],r[i]))}return n}},te=ee(function(e,t){return w(e)&&w(t)?te(e,t):t}),ne=ee(function(e,t){return t}),oe=function(n){return{is:function(e){return n===e},isValue:l,isError:s,getOr:U(n),getOrThunk:U(n),getOrDie:U(n),or:function(e){return oe(n)},orThunk:function(e){return oe(n)},fold:function(e,t){return t(n)},map:function(e){return oe(e(n))},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return P.some(n)}}},re=function(n){return{is:s,isValue:s,isError:l,getOr:b,getOrThunk:function(e){return e()},getOrDie:function(){return a(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return re(n)},each:N,bind:function(e){return re(n)},exists:s,forall:l,toOption:P.none}},ie={value:oe,error:re},ae=Object.keys,ue=Object.hasOwnProperty,ce=function(e,t){for(var n=ae(e),o=0,r=n.length;o<r;o++){var i=n[o];t(e[i],i,e)}},se=function(e,o){return le(e,function(e,t,n){return{k:t,v:o(e,t,n)}})},le=function(o,r){var i={};return ce(o,function(e,t){var n=r(e,t,o);i[n.k]=n.v}),i},fe=function(e,n){var o=[];return ce(e,function(e,t){o.push(n(e,t))}),o},de=function(e){return fe(e,function(e){return e})},me=function(a){if(!S(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return A(a,function(e,o){var t=ae(e);if(1!==t.length)throw new Error("one and only one name per case");var r=t[0],i=e[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!S(i))throw new Error("case arguments must be an array");u.push(r),n[r]=function(){var e=arguments.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+e);for(var n=new Array(e),t=0;t<n.length;t++)n[t]=arguments[t];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[o].apply(null,n)},match:function(e){var t=ae(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!G(u,function(e){return M(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[r].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:r,params:n})}}}}),n},ge=(me([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return A(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),he=function(e){return h(ie.error,j)(e)},ve=function(e,t){var n,o,r=ge(e);return 0<r.errors.length?he(r.errors):(n=r.values,o=t,ie.value(te.apply(undefined,[o].concat(n))))},pe=function(e){var t=ge(e);return 0<t.errors.length?he(t.errors):ie.value(t.values)},be=function(t){return function(e){return e.hasOwnProperty(t)?P.from(e[t]):P.none()}},ye=function(e,t){return be(t)(e)},xe=function(e,t){var n={};return n[e]=t,n},we=function(e,t){return n=e,o={},A(t,function(e){n[e]!==undefined&&n.hasOwnProperty(e)&&(o[e]=n[e])}),o;var n,o},ke=function(e,t){return n=t,o={},ce(e,function(e,t){M(n,t)||(o[t]=e)}),o;var n,o},Se=function(e){return be(e)},Ce=function(e,t){return n=e,o=t,function(e){return be(n)(e).getOr(o)};var n,o},ze=function(e,t){return ye(e,t)},Oe=function(e,t){return xe(e,t)},Te=function(e){return t={},A(e,function(e){t[e.key]=e.value}),t;var t},Me=function(e,t){return ve(e,t)},He=function(e,t){return o=t,(n=e).hasOwnProperty(o)&&n[o]!==undefined&&null!==n[o];var n,o},Ee=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ee(n())}}},Ve=function(e){for(var t=[],n=function(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},Ae=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return P.none()},Be=U("contextmenu"),De=U("touchstart"),Re=U("touchmove"),Fe=U("touchend"),Ie=U("gesturestart"),_e=U("mousedown"),Le=U("mousemove"),Ne=U("mouseout"),Pe=U("mouseup"),je=U("mouseover"),Ue=U("focusin"),We=U("focusout"),Ge=U("keydown"),Xe=U("keyup"),Ye=U("input"),$e=U("change"),qe=U("click"),Ke=U("transitionend"),Je=U("selectstart"),Qe=U("paste"),Ze=function(n){var o,r=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r||(r=!0,o=n.apply(null,e)),o}},et=function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}return undefined}(e,t);if(!n)return{major:0,minor:0};var o=function(e){return Number(t.replace(n,"$"+e))};return nt(o(1),o(2))},tt=function(){return nt(0,0)},nt=function(e,t){return{major:e,minor:t}},ot={nu:nt,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?tt():et(e,n)},unknown:tt},rt="Firefox",it=function(e,t){return function(){return t===e}},at=function(e){var t=e.current;return{current:t,version:e.version,isEdge:it("Edge",t),isChrome:it("Chrome",t),isIE:it("IE",t),isOpera:it("Opera",t),isFirefox:it(rt,t),isSafari:it("Safari",t)}},ut={unknown:function(){return at({current:undefined,version:ot.unknown()})},nu:at,edge:U("Edge"),chrome:U("Chrome"),ie:U("IE"),opera:U("Opera"),firefox:U(rt),safari:U("Safari")},ct="Windows",st="Android",lt="Solaris",ft="FreeBSD",dt=function(e,t){return function(){return t===e}},mt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:dt(ct,t),isiOS:dt("iOS",t),isAndroid:dt(st,t),isOSX:dt("OSX",t),isLinux:dt("Linux",t),isSolaris:dt(lt,t),isFreeBSD:dt(ft,t)}},gt={unknown:function(){return mt({current:undefined,version:ot.unknown()})},nu:mt,windows:U(ct),ios:U("iOS"),android:U(st),linux:U("Linux"),osx:U("OSX"),solaris:U(lt),freebsd:U(ft)},ht=function(e,t){var n=String(t).toLowerCase();return F(e,function(e){return e.search(n)})},vt=function(e,n){return ht(e,n).map(function(e){var t=ot.detect(e.versionRegexes,n);return{current:e.name,version:t}})},pt=function(e,n){return ht(e,n).map(function(e){var t=ot.detect(e.versionRegexes,n);return{current:e.name,version:t}})},bt=function(e,t){return-1!==e.indexOf(t)},yt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xt=function(t){return function(e){return bt(e,t)}},wt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return bt(e,"edge/")&&bt(e,"chrome")&&bt(e,"safari")&&bt(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yt],search:function(e){return bt(e,"chrome")&&!bt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return bt(e,"msie")||bt(e,"trident")}},{name:"Opera",versionRegexes:[yt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xt("firefox")},{name:"Safari",versionRegexes:[yt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(bt(e,"safari")||bt(e,"mobile/"))&&bt(e,"applewebkit")}}],kt=[{name:"Windows",search:xt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return bt(e,"iphone")||bt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:xt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xt("linux"),versionRegexes:[]},{name:"Solaris",search:xt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xt("freebsd"),versionRegexes:[]}],St={browsers:U(wt),oses:U(kt)},Ct=function(e){var t=St.browsers(),n=St.oses(),o=vt(t,e).fold(ut.unknown,ut.nu),r=pt(n,e).fold(gt.unknown,gt.nu);return{browser:o,os:r,deviceType:function f(e,t,n){var o=e.isiOS()&&!0===/ipad/i.test(n),r=e.isiOS()&&!o,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=o||i||a&&!0===/mobile/i.test(n),c=e.isiOS()||e.isAndroid(),s=c&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:U(o),isiPhone:U(r),isTablet:U(u),isPhone:U(s),isTouch:U(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:U(l)}}(r,o,e)}},zt={detect:Ze(function(){var e=navigator.userAgent;return Ct(e)})},Ot={tap:U("alloy.tap")},Tt=U("alloy.focus"),Mt=U("alloy.blur.post"),Ht=U("alloy.receive"),Et=U("alloy.execute"),Vt=U("alloy.focus.item"),At=Ot.tap,Bt=zt.detect().deviceType.isTouch()?Ot.tap:qe,Dt=U("alloy.longpress"),Rt=U("alloy.sandbox.close"),Ft=U("alloy.typeahead.cancel"),It=U("alloy.system.init"),_t=U("alloy.system.scroll"),Lt=U("alloy.system.attached"),Nt=U("alloy.system.detached"),Pt=U("alloy.system.dismissRequested"),jt=U("alloy.focusmanager.shifted"),Ut=U("alloy.slotcontainer.visibility"),Wt=U("alloy.change.tab"),Gt=U("alloy.dismiss.tab"),Xt=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:U(e)}},Yt={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Xt(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return Xt(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return Xt(n)},fromDom:Xt,fromPoint:function(e,t,n){var o=e.dom();return P.from(o.elementFromPoint(t,n)).map(Xt)}},$t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var o={};return A(t,function(e,t){o[e]=U(n[t])}),o}},qt=function(e){return e.slice(0).sort()},Kt=function(e,t){throw new Error("All required keys ("+qt(e).join(", ")+") were not specified. Specified keys were: "+qt(t).join(", ")+".")},Jt=function(e){throw new Error("Unsupported keys for object: "+qt(e).join(", "))},Qt=function(t,e){if(!S(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");A(e,function(e){if(!x(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Zt=function(e){var n=qt(e);F(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})},en=function(r,i){var a=r.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Qt("required",r),Qt("optional",i),Zt(a),function(t){var n=ae(t);G(r,function(e){return M(n,e)})||Kt(r,n);var e=B(n,function(e){return!M(a,e)});0<e.length&&Jt(e);var o={};return A(r,function(e){o[e]=U(t[e])}),A(i,function(e){o[e]=U(Object.prototype.hasOwnProperty.call(t,e)?P.some(t[e]):P.none())}),o}},tn=function(e,t){for(var n=[],o=function(e){return n.push(e),t(e)},r=t(e);(r=r.bind(o)).isSome(););return n},nn="undefined"!=typeof window?window:Function("return this;")(),on=function(e,t){return function(e,t){for(var n=t!==undefined&&null!==t?t:nn,o=0;o<e.length&&n!==undefined&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},rn={getOrDie:function(e,t){var n=on(e,t);if(n===undefined||null===n)throw e+" not available on this browser";return n}},an={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},un=an.ELEMENT,cn=an.DOCUMENT,sn=function(e){return e.nodeType!==un&&e.nodeType!==cn||0===e.childElementCount},ln={all:function(e,t){var n=t===undefined?document:t.dom();return sn(n)?[]:V(n.querySelectorAll(e),Yt.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==un)return!1;if(n.matches!==undefined)return n.matches(t);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=t===undefined?document:t.dom();return sn(n)?P.none():P.from(n.querySelector(e)).map(Yt.fromDom)}},fn=function(e,t){return e.dom()===t.dom()},dn=(zt.detect().browser.isIE(),fn),mn=function(e){var t=e.dom();return P.from(t.parentNode).map(Yt.fromDom)},gn=function(e){var t=e.dom();return P.from(t.previousSibling).map(Yt.fromDom)},hn=function(e){var t=e.dom();return P.from(t.nextSibling).map(Yt.fromDom)},vn=function(e){var t=e.dom();return V(t.childNodes,Yt.fromDom)},pn=function(e,t){var n=e.dom().childNodes;return P.from(n[t]).map(Yt.fromDom)},bn=$t("element","offset"),yn={owner:function(e){return Yt.fromDom(e.dom().ownerDocument)},defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return Yt.fromDom(t)},documentElement:function(e){return Yt.fromDom(e.dom().ownerDocument.documentElement)},parent:mn,findIndex:function(n){return mn(n).bind(function(e){var t=vn(e);return I(t,function(e){return dn(n,e)})})},parents:function(e,t){for(var n=z(t)?t:U(!1),o=e.dom(),r=[];null!==o.parentNode&&o.parentNode!==undefined;){var i=o.parentNode,a=Yt.fromDom(i);if(r.push(a),!0===n(a))break;o=i}return r},siblings:function(t){return mn(t).map(vn).map(function(e){return B(e,function(e){return!dn(t,e)})}).getOr([])},prevSibling:gn,offsetParent:function(e){var t=e.dom();return P.from(t.offsetParent).map(Yt.fromDom)},prevSiblings:function(e){return Y(tn(e,gn))},nextSibling:hn,nextSiblings:function(e){return tn(e,hn)},children:vn,child:pn,firstChild:function(e){return pn(e,0)},lastChild:function(e){return pn(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=vn(e);return 0<n.length&&t<n.length?bn(n[t],0):bn(e,t)}},xn=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,yn.children(Yt.fromDom(n))},wn=function(t,n){yn.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},kn=function(e,t){e.dom().appendChild(t.dom())},Sn={before:wn,after:function(e,t){yn.nextSibling(e).fold(function(){yn.parent(e).each(function(e){kn(e,t)})},function(e){wn(e,t)})},prepend:function(t,n){yn.firstChild(t).fold(function(){kn(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},append:kn,appendAt:function(e,t,n){yn.child(e,n).fold(function(){kn(e,t)},function(e){wn(e,t)})},wrap:function(e,t){wn(e,t),kn(t,e)}},Cn=function(t,e){A(e,function(e){Sn.before(t,e)})},zn=function(t,e){A(e,function(e){Sn.append(t,e)})},On=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Tn={empty:function(e){e.dom().textContent="",A(yn.children(e),function(e){On(e)})},remove:On,unwrap:function(e){var t=yn.children(e);0<t.length&&Cn(e,t),On(e)}},Mn=function(e){return e.dom().innerHTML},Hn=Mn,En=function(e,t){var n=yn.owner(e).dom(),o=Yt.fromDom(n.createDocumentFragment()),r=xn(t,n);zn(o,r),Tn.empty(e),Sn.append(e,o)},Vn=function(e){var t=Yt.fromTag("div"),n=Yt.fromDom(e.dom().cloneNode(!0));return Sn.append(t,n),Mn(t)},An=function(e){return e.dom().nodeName.toLowerCase()},Bn=function(e){return e.dom().nodeType},Dn=function(t){return function(e){return Bn(e)===t}},Rn=Dn(an.ELEMENT),Fn=Dn(an.TEXT),In=Dn(an.DOCUMENT),_n={name:An,type:Bn,value:function(e){return e.dom().nodeValue},isElement:Rn,isText:Fn,isDocument:In,isComment:function(e){return Bn(e)===an.COMMENT||"#comment"===An(e)}},Ln=function(e,t,n){if(!(x(n)||C(n)||O(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Nn=function(e,t,n){Ln(e.dom(),t,n)},Pn=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},jn=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Un={clone:function(e){return R(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:Nn,setAll:function(e,t){var n=e.dom();ce(t,function(e,t){Ln(n,t,e)})},get:Pn,has:jn,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(r,i,e){_n.isElement(r)&&_n.isElement(i)&&A(e,function(e){var t,n,o;n=i,jn(t=r,o=e)&&!jn(n,o)&&Nn(n,o,Pn(t,o))})}},Wn=function(e,t){return Yt.fromDom(e.dom().cloneNode(t))},Gn=function(e){return Wn(e,!1)},Xn=function(e){return t=Gn(e),Vn(t);var t},Yn="unknown",$n="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__";(i=c||(c={}))[i.STOP=0]="STOP",i[i.NORMAL=1]="NORMAL",i[i.LOGGING=2]="LOGGING";var qn=Ee({}),Kn=function(t,e,n){var o,r,i;switch(ze(qn.get(),t).orThunk(function(){var e=ae(qn.get());return Ae(e,function(e){return-1<t.indexOf(e)?P.some(qn.get()[e]):P.none()})}).getOr(c.NORMAL)){case c.NORMAL:return n(to());case c.LOGGING:var a=(o=t,r=e,i=[],{logEventCut:function(e,t,n){i.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){i.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){i.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){i.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){i.push({outcome:"response",purpose:n,target:t})},write:function(){M(["mousemove","mouseover","mouseout",It()],o)||console.log(o,{event:o,target:r.dom(),sequence:V(i,function(e){return M(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+Xn(e.target)+")":e.outcome})})}}),u=n(a);return a.write(),u;case c.STOP:return!0}},Jn=["alloy/data/Fields","alloy/debugging/Debugging"],Qn=function(e,t,n){return Kn(e,t,n)},Zn=function(){if(window[$n]!==undefined)return window[$n];var t=function(e,t){var n=qn.get();n[e]=t,qn.set(n)};return window[$n]={systems:{},lookup:function(t){var n=window[$n].systems,e=ae(n);return Ae(e,function(e){return n[e].getByUid(t).toOption().map(function(e){return Oe(Xn(e.element()),(t=function(n){var e=n.spec();return{"(original.spec)":e,"(dom.ref)":n.element().dom(),"(element)":Xn(n.element()),"(initComponents)":V(e.components!==undefined?e.components:[],t),"(components)":V(n.components(),t),"(bound.events)":fe(n.events(),function(e,t){return[t]}).join(", "),"(behaviours)":e.behaviours!==undefined?se(e.behaviours,function(e,t){return e===undefined?"--revoked--":{config:e.configAsRaw(),"original-config":e.initialConfig,state:n.readState(t)}}):"none"}})(e));var t})}).orThunk(function(){return P.some({error:"Systems ("+e.join(", ")+") did not contain uid: "+t})})},events:{setToNormal:function(e){t(e,c.NORMAL)},setToLogging:function(e){t(e,c.LOGGING)},setToStop:function(e){t(e,c.STOP)}}},window[$n]},eo=function(e,t){Zn().systems[e]=t},to=U({logEventCut:N,logEventStopped:N,logNoParent:N,logEventNoHandlers:N,logEventResponse:N,write:N}),no=0,oo=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++no+String(t)},ro=tinymce.util.Tools.resolve("tinymce.ThemeManager"),io=function(e,t){so(e,e.element(),t,{})},ao=function(e,t,n){so(e,e.element(),t,n)},uo=function(e){io(e,Et())},co=function(e,t,n){so(e,t,n,{})},so=function(e,t,n,o){var r=te({target:t},o);e.getSystem().triggerEvent(n,t,se(r,U))},lo=function(e,t,n,o){e.getSystem().triggerEvent(n,t,o.event())},fo=Ze(function(){return mo(Yt.fromDom(document))}),mo=function(e){var t=e.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return Yt.fromDom(t)},go={body:fo,getBody:mo,inBody:function(e){var t=_n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},ho=function(e){io(e,Nt());var t=e.components();A(t,ho)},vo=function(e){var t=e.components();A(t,vo),io(e,Lt())},po=function(e,t){bo(e,t,Sn.append)},bo=function(e,t,n){e.getSystem().addToWorld(t),n(e.element(),t.element()),go.inBody(e.element())&&vo(t),e.syncComponents()},yo=function(e){ho(e),Tn.remove(e.element()),e.getSystem().removeFromWorld(e)},xo=function(t){var e=yn.parent(t.element()).bind(function(e){return t.getSystem().getByDom(e).fold(P.none,P.some)});yo(t),e.each(function(e){e.syncComponents()})},wo=function(e){var t=e.components();A(t,yo),Tn.empty(e.element()),e.syncComponents()},ko=function(e,t){So(e,t,Sn.append)},So=function(e,t,n){n(e,t.element());var o=yn.children(t.element());A(o,function(e){t.getByDom(e).each(vo)})},Co=function(t){var e=yn.children(t.element());A(e,function(e){t.getByDom(e).each(ho)}),Tn.remove(t.element())},zo=me([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Oo=function(e){return zo.defaultedThunk(U(e))},To=zo.strict,Mo=zo.asOption,Ho=zo.defaultedThunk,Eo=(zo.asDefaultedOptionThunk,zo.mergeWithThunk),Vo=me([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),Ao=me([{field:["name","presence","type"]},{state:["name"]}]),Bo=function(){return rn.getOrDie("JSON")},Do=function(e,t,n){return Bo().stringify(e,t,n)},Ro=function(e){return w(e)&&100<ae(e).length?" removed due to size":Do(e,null,2)},Fo=function(e,t){return ie.error([{path:e,getErrorInfo:t}])},Io=me([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),_o=function(n,o,r){return ye(o,r).fold(function(){return e=r,t=o,Fo(n,function(){return'Could not find valid *strict* value for "'+e+'" in '+Ro(t)});var e,t},ie.value)},Lo=function(e,t,n){var o=ye(e,t).fold(function(){return n(e)},b);return ie.value(o)},No=function(r,u,e,c){return e.fold(function(i,t,e,n){var o=function(e){return n.extract(r.concat([i]),c,e).map(function(e){return xe(t,c(e))})},a=function(e){return e.fold(function(){var e=xe(t,c(P.none()));return ie.value(e)},function(e){return n.extract(r.concat([i]),c,e).map(function(e){return xe(t,c(P.some(e)))})})};return e.fold(function(){return _o(r,u,i).bind(o)},function(e){return Lo(u,i,e).bind(o)},function(){return(e=u,t=i,ie.value(ye(e,t))).bind(a);var e,t},function(e){return(t=u,n=i,o=e,r=ye(t,n).map(function(e){return!0===e?o(t):e}),ie.value(r)).bind(a);var t,n,o,r},function(e){var t=e(u);return Lo(u,i,U({})).map(function(e){return te(t,e)}).bind(o)})},function(e,t){var n=t(u);return ie.value(xe(e,c(n)))})},Po=function(o){return{extract:function(n,e,t){return o(t,e).fold(function(e){return t=e,Fo(n,function(){return t});var t},ie.value)},toString:function(){return"val"},toDsl:function(){return Vo.itemOf(o)}}},jo=function(e){var c=Uo(e),s=D(e,function(t,e){return e.fold(function(e){return te(t,Oe(e,!0))},U(t))},{});return{extract:function(e,t,n){var o,r,i,a=C(n)?[]:(r=ae(o=n),B(r,function(e){return He(o,e)})),u=B(a,function(e){return!He(s,e)});return 0===u.length?c.extract(e,t,n):(i=u,Fo(e,function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"}))},toString:c.toString,toDsl:c.toDsl}},Uo=function(u){return{extract:function(e,t,n){return o=e,r=n,i=t,a=V(u,function(e){return No(o,r,e,i)}),ve(a,{});var o,r,i,a},toString:function(){return"obj{\n"+V(u,function(e){return e.fold(function(e,t,n,o){return e+" -> "+o.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"},toDsl:function(){return Vo.objOf(V(u,function(e){return e.fold(function(e,t,n,o){return Ao.field(e,n,o)},function(e,t){return Ao.state(e)})}))}}},Wo=function(r){return{extract:function(n,o,e){var t=V(e,function(e,t){return r.extract(n.concat(["["+t+"]"]),o,e)});return pe(t)},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return Vo.arrOf(r)}}},Go=function(a,u){return{extract:function(n,o,r){var e,t,i=ae(r);return(e=n,t=i,Wo(Po(a)).extract(e,b,t)).bind(function(e){var t=V(e,function(e){return Io.field(e,e,To(),u)});return Uo(t).extract(n,o,r)})},toString:function(){return"setOf("+u.toString()+")"},toDsl:function(){return Vo.setOf(a,u)}}},Xo=U(Po(ie.value)),Yo=h(Wo,Uo),$o=Io.state,qo=Io.field,Ko=function(n,t,o,r,i){return ze(r,i).fold(function(){return e=r,t=i,Fo(n,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+Ro(e)});var e,t},function(e){return Uo(e).extract(n.concat(["branch: "+i]),t,o)})},Jo=function(r,i){return{extract:function(t,n,o){return ze(o,r).fold(function(){return e=r,Fo(t,function(){return'Choice schema did not contain choice key: "'+e+'"'});var e},function(e){return Ko(t,n,o,i,e)})},toString:function(){return"chooseOn("+r+"). Possible values: "+ae(i)},toDsl:function(){return Vo.choiceOf(r,i)}}},Qo=Po(ie.value),Zo=function(t){return Po(function(e){return t(e)})},er=function(e,t,n,o){return t.extract([e],n,o).fold(function(e){return ie.error({input:o,errors:e})},ie.value)},tr=function(e,t,n){return er(e,t,U,n)},nr=function(e,t,n){return er(e,t,b,n)},or=function(e){return e.fold(function(e){throw new Error(ar(e))},b)},rr=function(e,t,n){return or(nr(e,t,n))},ir=function(e,t,n){return or(tr(e,t,n))},ar=function(e){return"Errors: \n"+(t=e.errors,n=10<t.length?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,V(n,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))+"\n\nInput object: "+Ro(e.input);var t,n},ur=function(e,t){return Jo(e,t)},cr=U(Qo),sr=function(n,o){return Po(function(e){var t=typeof e;return n(e)?ie.value(e):ie.error("Expected type: "+o+" but got: "+t)})},lr=sr(O,"number"),fr=sr(x,"string"),dr=sr(C,"boolean"),mr=sr(z,"function"),gr=function(e){return qo(e,e,To(),Xo())},hr=function(e,t){return qo(e,e,To(),t)},vr=function(e){return hr(e,fr)},pr=function(e){return hr(e,mr)},br=function(e,t){return qo(e,e,To(),Uo(t))},yr=function(e,t){return qo(e,e,To(),Yo(t))},xr=function(e,t){return qo(e,e,To(),Wo(t))},wr=function(e){return qo(e,e,Mo(),Xo())},kr=function(e,t){return qo(e,e,Mo(),t)},Sr=function(e){return kr(e,fr)},Cr=function(e,t){return qo(e,e,Mo(),Uo(t))},zr=function(e,t){return qo(e,e,Mo(),jo(t))},Or=function(e,t){return qo(e,e,Oo(t),Xo())},Tr=function(e,t,n){return qo(e,e,Oo(t),n)},Mr=function(e,t){return Tr(e,t,lr)},Hr=function(e,t){return Tr(e,t,fr)},Er=function(e,t){return Tr(e,t,dr)},Vr=function(e,t){return Tr(e,t,mr)},Ar=function(e,t,n){return qo(e,e,Oo(t),Uo(n))},Br=function(e,t){return $o(e,t)},Dr=function(e){if(!He(e,"can")&&!He(e,"abort")&&!He(e,"run"))throw new Error("EventHandler defined by: "+Do(e,null,2)+" does not have can, abort, or run!");return rr("Extracting event.handler",jo([Or("can",U(!0)),Or("abort",U(!1)),Or("run",N)]),e)},Rr=function(n){var t,o,r,i,e=(t=n,o=function(e){return e.can},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return R(t,function(e,t){return e&&o(t).apply(undefined,n)},!0)}),a=(r=n,i=function(e){return e.abort},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return R(r,function(e,t){return e||i(t).apply(undefined,n)},!1)});return Dr({can:e,abort:a,run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];A(n,function(e){e.run.apply(undefined,t)})}})};function Fr(e,t,n,o,r){return e(n,o)?P.some(n):z(r)&&r(n)?P.none():t(n,o,r)}var Ir,_r=function(e,t,n){for(var o=e.dom(),r=z(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Yt.fromDom(o);if(t(i))return P.some(i);if(r(i))break}return P.none()},Lr=function(e,t){return F(e.dom().childNodes,h(t,Yt.fromDom)).map(Yt.fromDom)},Nr=function(e,o){var r=function(e){for(var t=0;t<e.childNodes.length;t++){if(o(Yt.fromDom(e.childNodes[t])))return P.some(Yt.fromDom(e.childNodes[t]));var n=r(e.childNodes[t]);if(n.isSome())return n}return P.none()};return r(e.dom())},Pr={first:function(e){return Nr(go.body(),e)},ancestor:_r,closest:function(e,t,n){return Fr(function(e){return t(e)},_r,e,t,n)},sibling:function(t,n){var e=t.dom();return e.parentNode?Lr(Yt.fromDom(e.parentNode),function(e){return!dn(t,e)&&n(e)}):P.none()},child:Lr,descendant:Nr},jr=function(e,t,n){return Pr.closest(e,function(e){return t(e).isSome()},n).bind(t)},Ur=function(e){return Te(e)},Wr=function(e,t){return{key:e,value:Dr({abort:t})}},Gr=function(e){return{key:e,value:Dr({run:function(e,t){t.event().prevent()}})}},Xr=function(e,t){return{key:e,value:Dr({run:t})}},Yr=function(e,t,n){return{key:e,value:Dr({run:function(e){t.apply(undefined,[e].concat(n))}})}},$r=function(e){return function(o){return{key:e,value:Dr({run:function(e,t){var n;n=t,dn(e.element(),n.event().target())&&o(e,t)}})}}},qr=function(e,t,n){var o,r,i=t.partUids()[n];return r=i,Xr(o=e,function(e,t){e.getSystem().getByUid(r).each(function(e){lo(e,e.element(),o,t)})})},Kr=function(e,r){return Xr(e,function(t,e){var n=e.event(),o=t.getSystem().getByDom(n.target()).fold(function(){return jr(n.target(),function(e){return t.getSystem().getByDom(e).toOption()},U(!1)).getOr(t)},function(e){return e});r(t,o,e)})},Jr=function(e){return Xr(e,function(e,t){t.cut()})},Qr=function(e){return Xr(e,function(e,t){t.stop()})},Zr=function(e,t){return $r(e)(t)},ei=$r(Lt()),ti=$r(Nt()),ni=$r(It()),oi=(Ir=Et(),function(e){return Xr(Ir,e)}),ri=function(e){return V(e,function(e){return o=t="/*",r=(n=e).length-t.length,""!==o&&(n.length<o.length||n.substr(r,r+o.length)!==o)?e:e.substring(0,e.length-"/*".length);var t,n,o,r})},ii=function(e,t){var n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:ri(i)}},e},ai=en(["tag","uid"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),ui=function(e){return{uid:e.uid(),tag:e.tag(),classes:e.classes().getOr([]),attributes:e.attributes().getOr({}),styles:e.styles().getOr({}),value:e.value().getOr("<none>"),innerHtml:e.innerHtml().getOr("<none>"),defChildren:e.defChildren().fold(function(){return"<none>"},function(e){return Do(e,null,2)}),domChildren:e.domChildren().fold(function(){return"<none>"},function(e){return 0===e.length?"0 children, but still specified":String(e.length)})}},ci=en([],["classes","attributes","styles","value","innerHtml","defChildren","domChildren"]),si=function(t,e,n){return e.fold(function(){return n.fold(function(){return{}},function(e){return Oe(t,e)})},function(e){return n.fold(function(){return Oe(t,e)},function(e){return Oe(t,e)})})},li=function(n,o,r){return ni(function(e,t){r(e,n,o)})},fi=function(r,i,a){var e,t,n,o,u,c;return e=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var o=[n].concat(e);return n.config({name:U(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+a)},function(e){var t=Array.prototype.slice.call(o,1);return i.apply(undefined,[n,e.config,e.state].concat(t))})},t=a,n=i.toString(),o=n.indexOf(")")+1,u=n.indexOf("("),c=n.substring(u+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:t,parameters:ri(c.slice(0,1).concat(c.slice(3)))}},e},di=function(e){return{key:e,value:undefined}},mi=function(n,e,o,r,t,i,a){var u=function(e){return He(e,o)?e[o]():P.none()},c=se(t,function(e,t){return fi(o,e,t)}),s=se(i,function(e,t){return ii(e,t)}),l=te(s,c,{revoke:f(di,o),config:function(e){var t=ir(o+"-config",n,e);return{key:o,value:{config:t,me:l,configAsRaw:Ze(function(){return rr(o+"-config",n,e)}),initialConfig:e,state:a}}},schema:function(){return e},exhibit:function(e,n){return u(e).bind(function(t){return ze(r,"exhibit").map(function(e){return e(n,t.config,t.state)})}).getOr(ci({}))},name:function(){return o},handlers:function(e){return u(e).bind(function(t){return ze(r,"events").map(function(e){return e(t.config,t.state)})}).getOr({})}});return l},gi=function(e,t){return hi(e,t,{validate:z,label:"function"})},hi=function(o,r,i){if(0===r.length)throw new Error("You must specify at least one required field.");return Qt("required",r),Zt(r),function(t){var n=ae(t);G(r,function(e){return M(n,e)})||Kt(r,n),o(r,n);var e=B(r,function(e){return!i.validate(t[e],e)});return 0<e.length&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+qt(e).join(", ")+") were not.")}(e,i.label),t}},vi=function(t,e){var n=B(e,function(e){return!M(t,e)});0<n.length&&Jt(n)},pi=N,bi=function(e){return gi(vi,e)},yi={init:function(){return xi({readState:function(){return"No State required"}})}},xi=function(e){return gi(pi,["readState"])(e),e},wi=function(e){return Te(e)},ki=jo([gr("fields"),gr("name"),Or("active",{}),Or("apis",{}),Or("state",yi),Or("extra",{})]),Si=function(e){var t,n,o,r,i,a,u,c,s=rr("Creating behaviour: "+e.name,ki,e);return t=s.fields,n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,u=jo(t),c=Cr(n,[zr("config",t)]),mi(u,c,n,o,r,i,a)},Ci=jo([gr("branchKey"),gr("branches"),gr("name"),Or("active",{}),Or("apis",{}),Or("state",yi),Or("extra",{})]),zi=function(e){var t,n,o,r,i,a,u,c,s=rr("Creating behaviour: "+e.name,Ci,e);return t=ur(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=Cr(n,[kr("config",u=t)]),mi(u,c,n,o,r,i,a)},Oi=U(undefined);function Ti(e,t,n){var o=n||!1,r=function(){t(),o=!0},i=function(){e(),o=!1};return{on:r,off:i,toggle:function(){(o?i:r)()},isOn:function(){return o}}}var Mi=function(e,t){var n=Un.get(e,t);return n===undefined||""===n?[]:n.split(" ")},Hi=Mi,Ei=function(e,t,n){var o=Mi(e,t).concat([n]);return Un.set(e,t,o.join(" ")),!0},Vi=function(e,t,n){var o=B(Mi(e,t),function(e){return e!==n});return 0<o.length?Un.set(e,t,o.join(" ")):Un.remove(e,t),!1},Ai=function(e){return Hi(e,"class")},Bi=function(e,t){return Ei(e,"class",t)},Di=function(e,t){return Vi(e,"class",t)},Ri=Ai,Fi=Bi,Ii=Di,_i=function(e,t){return M(Ai(e),t)?Di(e,t):Bi(e,t)},Li=function(e){return e.dom().classList!==undefined},Ni=function(e,t){return Li(e)&&e.dom().classList.contains(t)},Pi={add:function(e,t){Li(e)?e.dom().classList.add(t):Fi(e,t)},remove:function(e,t){var n;Li(e)?e.dom().classList.remove(t):Ii(e,t),0===(Li(n=e)?n.dom().classList:Ri(n)).length&&Un.remove(n,"class")},toggle:function(e,t){return Li(e)?e.dom().classList.toggle(t):_i(e,t)},toggler:function(e,t){var n=Li(e),o=e.dom().classList;return Ti(function(){n?o.remove(t):Ii(e,t)},function(){n?o.add(t):Fi(e,t)},Ni(e,t))},has:Ni},ji=function(e,t,n){Pi.remove(e,n),Pi.add(e,t)},Ui=Object.freeze({toAlpha:function(e,t,n){ji(e.element(),t.alpha(),t.omega())},toOmega:function(e,t,n){ji(e.element(),t.omega(),t.alpha())},isAlpha:function(e,t,n){return Pi.has(e.element(),t.alpha())},isOmega:function(e,t,n){return Pi.has(e.element(),t.omega())},clear:function(e,t,n){Pi.remove(e.element(),t.alpha()),Pi.remove(e.element(),t.omega())}}),Wi=[gr("alpha"),gr("omega")],Gi=Si({fields:Wi,name:"swapping",apis:Ui}),Xi=function(e,t,n){return Pr.closest(e,t,n).isSome()},Yi=function(e){e.dom().focus()},$i=function(e){var t=e!==undefined?e.dom():document;return P.from(t.activeElement).map(Yt.fromDom)},qi=function(e){var t=yn.owner(e).dom();return e.dom()===t.activeElement},Ki=Yi,Ji=function(e){e.dom().blur()},Qi=$i,Zi=function(t){return $i(yn.owner(t)).filter(function(e){return t.dom().contains(e.dom())})},ea=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ta=function(e){var t=document.createElement("a");t.target="_blank",t.href=e.href,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(t),t.dispatchEvent(n),document.body.removeChild(t)},na={formatChanged:U("formatChanged"),orientationChanged:U("orientationChanged"),dropupDismissed:U("dropupDismissed")},oa=Object.freeze({events:function(u){return Ur([Xr(Ht(),function(r,i){var e,t,a=u.channels(),n=ae(a),o=(e=n,(t=i).universal()?e:B(e,function(e){return M(t.channels(),e)}));A(o,function(e){var t=a[e](),n=t.schema(),o=ir("channel["+e+"] data\nReceiver: "+Xn(r.element()),n,i.data());t.onReceive()(r,o)})})])}}),ra=U([gr("menu"),gr("selectedMenu")]),ia=U([gr("item"),gr("selectedItem")]),aa=(U(jo(ia().concat(ra()))),U(jo(ia()))),ua=br("initSize",[gr("numColumns"),gr("numRows")]),ca=function(){return hr("markers",aa())},sa=function(){return br("markers",[gr("backgroundMenu")].concat(ra()).concat(ia()))},la=function(e){return br("markers",V(e,gr))},fa=function(e,t,n){return function(){var e=new Error;if(e.stack!==undefined){var t=e.stack.split("\n");F(t,function(t){return 0<t.indexOf("alloy")&&!H(Jn,function(e){return-1<t.indexOf(e)})}).getOr(Yn)}}(),qo(t,t,n,Zo(function(n){return ie.value(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(undefined,e)})}))},da=function(e){return fa(0,e,Oo(N))},ma=function(e){return fa(0,e,Oo(P.none))},ga=function(e){return fa(0,e,To())},ha=function(e){return fa(0,e,To())},va=function(e,t){return Br(e,U(t))},pa=function(e){return Br(e,b)},ba=U(ua),ya=[hr("channels",Go(ie.value,jo([ga("onReceive"),Or("schema",cr())])))],xa=Si({fields:ya,name:"receiving",active:oa}),wa=function(e,t){var n=Oa(e,t),o=t.aria();o.update()(e,o,n)},ka=function(e,t,n){Pi.toggle(e.element(),t.toggleClass()),wa(e,t)},Sa=function(e,t,n){Pi.add(e.element(),t.toggleClass()),wa(e,t)},Ca=function(e,t,n){Pi.remove(e.element(),t.toggleClass()),wa(e,t)},za=function(e,t,n,o){(o?Sa:Ca)(e,t,n)},Oa=function(e,t){return Pi.has(e.element(),t.toggleClass())},Ta=function(e,t,n){za(e,t,n,t.selected())},Ma=Object.freeze({onLoad:Ta,toggle:ka,isOn:Oa,on:Sa,off:Ca,set:za}),Ha=Object.freeze({exhibit:function(e,t,n){return ci({})},events:function(e,t){var n,o,r,i=(n=e,o=t,r=ka,oi(function(e){r(e,n,o)})),a=li(e,t,Ta);return Ur(j([e.toggleOnExecute()?[i]:[],[a]]))}}),Ea=function(e,t,n){Un.set(e.element(),"aria-expanded",n)},Va=[Or("selected",!1),gr("toggleClass"),Or("toggleOnExecute",!0),Tr("aria",{mode:"none"},ur("mode",{pressed:[Or("syncWithExpanded",!1),va("update",function(e,t,n){Un.set(e.element(),"aria-pressed",n),t.syncWithExpanded()&&Ea(e,t,n)})],checked:[va("update",function(e,t,n){Un.set(e.element(),"aria-checked",n)})],expanded:[va("update",Ea)],selected:[va("update",function(e,t,n){Un.set(e.element(),"aria-selected",n)})],none:[va("update",N)]}))],Aa=Si({fields:Va,name:"toggling",active:Ha,apis:Ma}),Ba=function(n,o){return xa.config({channels:Oe(na.formatChanged(),{onReceive:function(e,t){t.command===n&&o(e,t.state)}})})},Da=function(e){return xa.config({channels:Oe(na.orientationChanged(),{onReceive:e})})},Ra=function(e,t){return{key:e,value:{onReceive:t}}},Fa="tinymce-mobile",Ia={resolve:function(e){return Fa+"-"+e},prefix:U(Fa)},_a=function(e){var t=function(e,t){t.stop(),uo(e)},n=zt.detect().deviceType.isTouch()?[Xr(At(),t)]:[Xr(qe(),t),Xr(_e(),function(e,t){t.cut()})];return Ur(j([e.map(function(n){return Xr(Et(),function(e,t){n(e),t.stop()})}).toArray(),n]))},La=function(e,t){t.ignore()||(Ki(e.element()),t.onFocus()(e))},Na=Object.freeze({focus:La,blur:function(e,t){t.ignore()||Ji(e.element())},isFocused:function(e){return qi(e.element())}}),Pa=Object.freeze({exhibit:function(e,t){var n=t.ignore()?{}:{attributes:{tabindex:"-1"}};return ci(n)},events:function(n){return Ur([Xr(Tt(),function(e,t){La(e,n),t.stop()})].concat(n.stopMousedown()?[Xr(_e(),function(e,t){t.event().prevent()})]:[]))}}),ja=[da("onFocus"),Or("stopMousedown",!1),Or("ignore",!1)],Ua=Si({fields:ja,name:"focusing",active:Pa,apis:Na}),Wa=function(e){return e.style!==undefined},Ga=function(e,t,n){if(!x(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Wa(e)&&e.style.setProperty(t,n)},Xa=function(e,t){Wa(e)&&e.style.removeProperty(t)},Ya=function(e,t,n){var o=e.dom();Ga(o,t,n)},$a=function(e,t){return Wa(e)?e.style.getPropertyValue(t):""},qa=function(e,t){var n=e.dom(),o=$a(n,t);return P.from(o).filter(function(e){return 0<e.length})},Ka={copy:function(e,t){var n=e.dom(),o=t.dom();Wa(n)&&Wa(o)&&(o.style.cssText=n.style.cssText)},set:Ya,preserve:function(e,t){var n=Un.get(e,"style"),o=t(e);return(n===undefined?Un.remove:Un.set)(e,"style",n),o},setAll:function(e,t){var n=e.dom();ce(t,function(e,t){Ga(n,t,e)})},setOptions:function(e,t){var n=e.dom();ce(t,function(e,t){e.fold(function(){Xa(n,t)},function(e){Ga(n,t,e)})})},remove:function(e,t){var n=e.dom();Xa(n,t),Un.has(e,"style")&&""===Un.get(e,"style").replace(/^\s+|\s+$/g,"")&&Un.remove(e,"style")},get:function(e,t){var n=e.dom(),o=window.getComputedStyle(n).getPropertyValue(t),r=""!==o||go.inBody(e)?o:$a(n,t);return null===r?undefined:r},getRaw:qa,getAllRaw:function(e){var t={},n=e.dom();if(Wa(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);t[r]=n.style[r]}return t},isValidValue:function(e,t,n){var o=Yt.fromTag(e);return Ya(o,t,n),qa(o,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(o,r,e){_n.isElement(o)&&_n.isElement(r)&&A(e,function(e){var t,n;t=r,qa(o,n=e).each(function(e){qa(t,n).isNone()&&Ya(t,n,e)})})}};function Ja(o,r){var e=function(e){var t=r(e);if(t<=0||null===t){var n=Ka.get(e,o);return parseFloat(n)||0}return t},i=function(r,e){return R(e,function(e,t){var n=Ka.get(r,t),o=n===undefined?0:parseInt(n,10);return isNaN(o)?e:e+o},0)};return{set:function(e,t){if(!O(t)&&!t.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+t;var n=e.dom();Wa(n)&&(n.style[o]=t+"px")},get:e,getOuter:e,aggregate:i,max:function(e,t,n){var o=i(e,n);return o<t?t-o:0}}}var Qa=Ja("height",function(e){var t=e.dom();return go.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),Za=function(e){return Qa.get(e)},eu=function(e){return Qa.getOuter(e)},tu=function(e,t){var n=Qa.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Ka.set(e,"max-height",n+"px")},nu=function(e,t,n){return B(yn.parents(e,n),t)},ou=function(e,t){return B(yn.siblings(e),t)},ru=function(e){return ln.all(e)},iu=function(e,t,n){return nu(e,function(e){return ln.is(e,t)},n)},au=function(e,t){return ou(e,function(e){return ln.is(e,t)})},uu=function(e,t){return ln.all(t,e)},cu=function(e,t,n){return Pr.ancestor(e,function(e){return ln.is(e,t)},n)},su=function(e){return ln.one(e)},lu=cu,fu=function(e,t){return ln.one(t,e)},du=function(e,t,n){return Fr(ln.is,cu,e,t,n)},mu=function(e,t,n){var o=Y(e.slice(0,t)),r=Y(e.slice(t+1));return F(o.concat(r),n)},gu=function(e,t,n){var o=Y(e.slice(0,t));return F(o,n)},hu=function(e,t,n){var o=e.slice(0,t),r=e.slice(t+1);return F(r.concat(o),n)},vu=function(e,t,n){var o=e.slice(t+1);return F(o,n)},pu=function(n){return function(e){var t=e.raw();return M(n,t.which)}},bu=function(e){return function(t){return G(e,function(e){return e(t)})}},yu=function(e){return!0===e.raw().shiftKey},xu=function(e){return!0===e.raw().ctrlKey},wu=k(yu),ku=function(e,t){return{matches:e,classification:t}},Su=function(e,t,n,o){var r=e+t;return o<r?n:r<n?o:r},Cu=function(e,t,n){return e<=t?t:n<=e?n:e},zu=function(t,n,e){var o=uu(t.element(),"."+n.highlightClass());A(o,function(e){Pi.remove(e,n.highlightClass()),t.getSystem().getByDom(e).each(function(e){n.onDehighlight()(t,e)})})},Ou=function(e,t,n,o){var r=Tu(e,t,n,o);zu(e,t),Pi.add(o.element(),t.highlightClass()),r||t.onHighlight()(e,o)},Tu=function(e,t,n,o){return Pi.has(o.element(),t.highlightClass())},Mu=function(e,t,n,o){var r=uu(e.element(),"."+t.itemClass());return P.from(r[o]).fold(function(){return ie.error("No element found with index "+o)},e.getSystem().getByDom)},Hu=function(t,e,n){return fu(t.element(),"."+e.itemClass()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},Eu=function(t,e,n){var o=uu(t.element(),"."+e.itemClass());return(0<o.length?P.some(o[o.length-1]):P.none()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},Vu=function(n,t,e,o){var r=uu(n.element(),"."+t.itemClass());return I(r,function(e){return Pi.has(e,t.highlightClass())}).bind(function(e){var t=Su(e,o,0,r.length-1);return n.getSystem().getByDom(r[t]).toOption()})},Au=function(t,e,n){var o=uu(t.element(),"."+e.itemClass());return Ve(V(o,function(e){return t.getSystem().getByDom(e).toOption()}))},Bu=Object.freeze({dehighlightAll:zu,dehighlight:function(e,t,n,o){var r=Tu(e,t,n,o);Pi.remove(o.element(),t.highlightClass()),r&&t.onDehighlight()(e,o)},highlight:Ou,highlightFirst:function(t,n,o){Hu(t,n,o).each(function(e){Ou(t,n,o,e)})},highlightLast:function(t,n,o){Eu(t,n,o).each(function(e){Ou(t,n,o,e)})},highlightAt:function(t,n,o,e){Mu(t,n,o,e).fold(function(e){throw new Error(e)},function(e){Ou(t,n,o,e)})},highlightBy:function(t,n,o,e){var r=Au(t,n,o);F(r,e).each(function(e){Ou(t,n,o,e)})},isHighlighted:Tu,getHighlighted:function(t,e,n){return fu(t.element(),"."+e.highlightClass()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},getFirst:Hu,getLast:Eu,getPrevious:function(e,t,n){return Vu(e,t,0,-1)},getNext:function(e,t,n){return Vu(e,t,0,1)},getCandidates:Au}),Du=[gr("highlightClass"),gr("itemClass"),da("onHighlight"),da("onDehighlight")],Ru=Si({fields:Du,name:"highlighting",apis:Bu}),Fu=function(e,t,n){t.exists(function(t){return n.exists(function(e){return dn(e,t)})})||ao(e,jt(),{prevFocus:t,newFocus:n})},Iu=function(){var r=function(e){return Zi(e.element())};return{get:r,set:function(e,t){var n=r(e);e.getSystem().triggerFocus(t,e.element());var o=r(e);Fu(e,n,o)}}},_u=function(){var r=function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})};return{get:r,set:function(t,e){var n=r(t);t.getSystem().getByDom(e).fold(N,function(e){Ru.highlight(t,e)});var o=r(t);Fu(t,n,o)}}},Lu=function(e,t,n,i,a){var u=function(t,n,e,o,r){var i,a,u=e(t,n,o,r);return(i=u,a=n.event(),F(i,function(e){return e.matches(a)}).map(function(e){return e.classification})).bind(function(e){return e(t,n,o,r)})},o={schema:function(){return e.concat([Or("focusManager",Iu()),va("handler",o),va("state",t)])},processKey:u,toEvents:function(o,r){return Ur(a.map(function(n){return Xr(Tt(),function(e,t){n(e,o,r,t),t.stop()})}).toArray().concat([Xr(Ge(),function(e,t){u(e,t,n,o,r).each(function(e){t.stop()})}),Xr(Xe(),function(e,t){u(e,t,i,o,r).each(function(e){t.stop()})})]))}};return o},Nu=function(e){var t=[wr("onEscape"),wr("onEnter"),Or("selector",'[data-alloy-tabstop="true"]'),Or("firstTabstop",0),Or("useTabstopAt",U(!0)),wr("visibilitySelector")].concat([e]),a=function(e,t){var n=e.visibilitySelector().bind(function(e){return du(t,e)}).getOr(t);return 0<Za(n)},u=function(t,e,n,o,r){return r(e,n,function(e){return a(t=o,n=e)&&t.useTabstopAt()(n);var t,n}).fold(function(){return o.cyclic()?P.some(!0):P.none()},function(e){return o.focusManager().set(t,e),P.some(!0)})},i=function(t,e,n,o){var r,i,a=uu(t.element(),n.selector());return(r=t,i=n,i.focusManager().get(r).bind(function(e){return du(e,i.selector())})).bind(function(e){return I(a,f(dn,e)).bind(function(e){return u(t,a,e,n,o)})})},n=U([ku(bu([yu,pu([9])]),function(e,t,n,o){var r=n.cyclic()?mu:gu;return i(e,0,n,r)}),ku(pu([9]),function(e,t,n,o){var r=n.cyclic()?hu:vu;return i(e,0,n,r)}),ku(pu([27]),function(t,n,e,o){return e.onEscape().bind(function(e){return e(t,n)})}),ku(bu([wu,pu([13])]),function(t,n,e,o){return e.onEnter().bind(function(e){return e(t,n)})})]),o=U([]);return Lu(t,yi.init,n,o,P.some(function(t,n){var e,o,r,i;(e=t,o=n,r=uu(e.element(),o.selector()),i=B(r,function(e){return a(o,e)}),P.from(i[o.firstTabstop()])).each(function(e){n.focusManager().set(t,e)})}))},Pu=Nu(Br("cyclic",U(!1))),ju=Nu(Br("cyclic",U(!0))),Uu=function(e){return"input"===_n.name(e)&&"radio"!==Un.get(e,"type")||"textarea"===_n.name(e)},Wu=function(e,t,n){return Uu(n)&&pu([32])(t.event())?P.none():(co(e,n,Et()),P.some(!0))},Gu=function(e,t){return P.some(!0)},Xu=[Or("execute",Wu),Or("useSpace",!1),Or("useEnter",!0),Or("useControlEnter",!1),Or("useDown",!1)],Yu=function(e,t,n){return n.execute()(e,t,e.element())},$u=Lu(Xu,yi.init,function(e,t,n,o){var r=n.useSpace()&&!Uu(e.element())?[32]:[],i=n.useEnter()?[13]:[],a=n.useDown()?[40]:[],u=r.concat(i).concat(a);return[ku(pu(u),Yu)].concat(n.useControlEnter()?[ku(bu([xu,pu([13])]),Yu)]:[])},function(e,t,n,o){return n.useSpace()&&!Uu(e.element())?[ku(pu([32]),Gu)]:[]},P.none()),qu=function(e){var n=Ee(P.none());return xi({readState:function(){return n.get().map(function(e){return{numRows:e.numRows(),numColumns:e.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){n.set(P.some({numRows:U(e),numColumns:U(t)}))},getNumRows:function(){return n.get().map(function(e){return e.numRows()})},getNumColumns:function(){return n.get().map(function(e){return e.numColumns()})}})},Ku=Object.freeze({flatgrid:qu,init:function(e){return e.state()(e)}}),Ju=function(e){return"rtl"===Ka.get(e,"direction")?"rtl":"ltr"},Qu=function(t,n){return function(e){return"rtl"===Ju(e)?n:t}},Zu=function(i){return function(e,t,n,o){var r=i(e.element());return oc(r,e,t,n,o)}},ec=function(e,t){var n=Qu(e,t);return Zu(n)},tc=function(e,t){var n=Qu(t,e);return Zu(n)},nc=function(r){return function(e,t,n,o){return oc(r,e,t,n,o)}},oc=function(t,n,e,o,r){return o.focusManager().get(n).bind(function(e){return t(n.element(),e,o,r)}).map(function(e){return o.focusManager().set(n,e),!0})},rc=nc,ic=nc,ac=nc,uc=function(e){var t,n=e.dom();return!((t=n).offsetWidth<=0&&t.offsetHeight<=0)},cc=en(["index","candidates"],[]),sc=function(e,t,n){return lc(e,t,n,uc)},lc=function(e,t,n,o){var r,i=f(dn,t),a=uu(e,n),u=B(a,uc);return I(r=u,i).map(function(e){return cc({index:e,candidates:r})})},fc=function(e,t){return I(e,function(e){return dn(t,e)})},dc=function(n,e,o,t){return t(Math.floor(e/o),e%o).bind(function(e){var t=e.row()*o+e.column();return 0<=t&&t<n.length?P.some(n[t]):P.none()})},mc=function(r,e,i,a,u){return dc(r,e,a,function(e,t){var n=e===i-1?r.length-e*a:a,o=Su(t,u,0,n-1);return P.some({row:U(e),column:U(o)})})},gc=function(i,e,a,u,c){return dc(i,e,u,function(e,t){var n=Su(e,c,0,a-1),o=n===a-1?i.length-n*u:u,r=Cu(t,0,o-1);return P.some({row:U(n),column:U(r)})})},hc=[gr("selector"),Or("execute",Wu),ma("onEscape"),Or("captureTab",!1),ba()],vc=function(r){return function(e,t,n,o){return sc(e,t,n.selector()).bind(function(e){return r(e.candidates(),e.index(),o.getNumRows().getOr(n.initSize().numRows()),o.getNumColumns().getOr(n.initSize().numColumns()))})}},pc=function(e,t,n,o){return n.captureTab()?P.some(!0):P.none()},bc=vc(function(e,t,n,o){return mc(e,t,n,o,-1)}),yc=vc(function(e,t,n,o){return mc(e,t,n,o,1)}),xc=vc(function(e,t,n,o){return gc(e,t,n,o,-1)}),wc=vc(function(e,t,n,o){return gc(e,t,n,o,1)}),kc=U([ku(pu([37]),ec(bc,yc)),ku(pu([39]),tc(bc,yc)),ku(pu([38]),rc(xc)),ku(pu([40]),ic(wc)),ku(bu([yu,pu([9])]),pc),ku(bu([wu,pu([9])]),pc),ku(pu([27]),function(e,t,n,o){return n.onEscape()(e,t)}),ku(pu([32].concat([13])),function(t,n,o,e){return(r=t,i=o,i.focusManager().get(r).bind(function(e){return du(e,i.selector())})).bind(function(e){return o.execute()(t,n,e)});var r,i})]),Sc=U([ku(pu([32]),Gu)]),Cc=Lu(hc,qu,kc,Sc,P.some(function(t,n,e){fu(t.element(),n.selector()).each(function(e){n.focusManager().set(t,e)})})),zc=function(e,t,n,i){var a=function(e,t,n){var o,r=Su(t,i,0,n.length-1);return r===e?P.none():(o=n[r],"button"===_n.name(o)&&"disabled"===Un.get(o,"disabled")?a(e,r,n):P.from(n[r]))};return sc(e,n,t).bind(function(e){var t=e.index(),n=e.candidates();return a(t,t,n)})},Oc=[gr("selector"),Or("getInitial",P.none),Or("execute",Wu),ma("onEscape"),Or("executeOnMove",!1),Or("allowVertical",!0)],Tc=function(t,n,o){return(e=t,r=o,r.focusManager().get(e).bind(function(e){return du(e,r.selector())})).bind(function(e){return o.execute()(t,n,e)});var e,r},Mc=function(e,t,n){return zc(e,n.selector(),t,-1)},Hc=function(e,t,n){return zc(e,n.selector(),t,1)},Ec=function(o){return function(e,t,n){return o(e,t,n).bind(function(){return n.executeOnMove()?Tc(e,t,n):P.some(!0)})}},Vc=function(e,t,n,o){return n.onEscape()(e,t)},Ac=U([ku(pu([32]),Gu)]),Bc=Lu(Oc,yi.init,function(e,t,n,o){var r=[37].concat(n.allowVertical()?[38]:[]),i=[39].concat(n.allowVertical()?[40]:[]);return[ku(pu(r),Ec(ec(Mc,Hc))),ku(pu(i),Ec(tc(Mc,Hc))),ku(pu([13]),Tc),ku(pu([32]),Tc),ku(pu([27]),Vc)]},Ac,P.some(function(t,n){n.getInitial()(t).or(fu(t.element(),n.selector())).each(function(e){n.focusManager().set(t,e)})})),Dc=en(["rowIndex","columnIndex","cell"],[]),Rc=function(e,t,n){return P.from(e[t]).bind(function(e){return P.from(e[n]).map(function(e){return Dc({rowIndex:t,columnIndex:n,cell:e})})})},Fc=function(e,t,n,o){var r=e[t].length,i=Su(n,o,0,r-1);return Rc(e,t,i)},Ic=function(e,t,n,o){var r=Su(n,o,0,e.length-1),i=e[r].length,a=Cu(t,0,i-1);return Rc(e,r,a)},_c=function(e,t,n,o){var r=e[t].length,i=Cu(n+o,0,r-1);return Rc(e,t,i)},Lc=function(e,t,n,o){var r=Cu(n+o,0,e.length-1),i=e[r].length,a=Cu(t,0,i-1);return Rc(e,r,a)},Nc=[br("selectors",[gr("row"),gr("cell")]),Or("cycles",!0),Or("previousSelector",P.none),Or("execute",Wu)],Pc=function(e,t){return function(n,o,i){var a=i.cycles()?e:t;return du(o,i.selectors().row()).bind(function(e){var t=uu(e,i.selectors().cell());return fc(t,o).bind(function(o){var r=uu(n,i.selectors().row());return fc(r,e).bind(function(e){var t,n=(t=i,V(r,function(e){return uu(e,t.selectors().cell())}));return a(n,e,o).map(function(e){return e.cell()})})})})}},jc=Pc(function(e,t,n){return Fc(e,t,n,-1)},function(e,t,n){return _c(e,t,n,-1)}),Uc=Pc(function(e,t,n){return Fc(e,t,n,1)},function(e,t,n){return _c(e,t,n,1)}),Wc=Pc(function(e,t,n){return Ic(e,n,t,-1)},function(e,t,n){return Lc(e,n,t,-1)}),Gc=Pc(function(e,t,n){return Ic(e,n,t,1)},function(e,t,n){return Lc(e,n,t,1)}),Xc=U([ku(pu([37]),ec(jc,Uc)),ku(pu([39]),tc(jc,Uc)),ku(pu([38]),rc(Wc)),ku(pu([40]),ic(Gc)),ku(pu([32].concat([13])),function(t,n,o){return Zi(t.element()).bind(function(e){return o.execute()(t,n,e)})})]),Yc=U([ku(pu([32]),Gu)]),$c=Lu(Nc,yi.init,Xc,Yc,P.some(function(t,n){n.previousSelector()(t).orThunk(function(){var e=n.selectors();return fu(t.element(),e.cell())}).each(function(e){n.focusManager().set(t,e)})})),qc=[gr("selector"),Or("execute",Wu),Or("moveOnTab",!1)],Kc=function(t,n,o){return o.focusManager().get(t).bind(function(e){return o.execute()(t,n,e)})},Jc=function(e,t,n){return zc(e,n.selector(),t,-1)},Qc=function(e,t,n){return zc(e,n.selector(),t,1)},Zc=U([ku(pu([38]),ac(Jc)),ku(pu([40]),ac(Qc)),ku(bu([yu,pu([9])]),function(e,t,n){return n.moveOnTab()?ac(Jc)(e,t,n):P.none()}),ku(bu([wu,pu([9])]),function(e,t,n){return n.moveOnTab()?ac(Qc)(e,t,n):P.none()}),ku(pu([13]),Kc),ku(pu([32]),Kc)]),es=U([ku(pu([32]),Gu)]),ts=Lu(qc,yi.init,Zc,es,P.some(function(t,n){fu(t.element(),n.selector()).each(function(e){n.focusManager().set(t,e)})})),ns=[ma("onSpace"),ma("onEnter"),ma("onShiftEnter"),ma("onLeft"),ma("onRight"),ma("onTab"),ma("onShiftTab"),ma("onUp"),ma("onDown"),ma("onEscape"),Or("stopSpaceKeyup",!1),wr("focusIn")],os=Lu(ns,yi.init,function(e,t,n){return[ku(pu([32]),n.onSpace()),ku(bu([wu,pu([13])]),n.onEnter()),ku(bu([yu,pu([13])]),n.onShiftEnter()),ku(bu([yu,pu([9])]),n.onShiftTab()),ku(bu([wu,pu([9])]),n.onTab()),ku(pu([38]),n.onUp()),ku(pu([40]),n.onDown()),ku(pu([37]),n.onLeft()),ku(pu([39]),n.onRight()),ku(pu([32]),n.onSpace()),ku(pu([27]),n.onEscape())]},function(e,t,n){return n.stopSpaceKeyup()?[ku(pu([32]),Gu)]:[]},P.some(function(t,n){return n.focusIn().bind(function(e){return e(t,n)})})),rs=Pu.schema(),is=ju.schema(),as=Bc.schema(),us=Cc.schema(),cs=$c.schema(),ss=$u.schema(),ls=ts.schema(),fs=os.schema(),ds=zi({branchKey:"mode",branches:Object.freeze({acyclic:rs,cyclic:is,flow:as,flatgrid:us,matrix:cs,execution:ss,menu:ls,special:fs}),name:"keying",active:{events:function(e,t){return e.handler().toEvents(e,t)}},apis:{focusIn:function(e){e.getSystem().triggerFocus(e.element(),e.element())},setGridSize:function(e,t,n,o,r){He(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Ku}),ms=function(o,e){return Ar(o,{},V(e,function(e){return t=e.name(),n="Cannot configure "+e.name()+" for "+o,qo(t,t,Mo(),Po(function(e){return ie.error("The field: "+t+" is forbidden. "+n)}));var t,n}).concat([Br("dump",b)]))},gs=function(e){return e.dump()},hs=ms,vs=gs,ps="placeholder",bs=me([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ys=function(e,t,n,o){return n.uiType===ps?(i=n,a=o,(r=e).exists(function(e){return e!==i.owner})?bs.single(!0,U(i)):ze(a,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+ae(a)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+Do(i,null,2))},function(e){return e.replace()})):bs.single(!1,U(n));var r,i,a},xs=function(i,a,u,c){return ys(i,0,u,c).fold(function(e,t){var n=t(a,u.config,u.validated),o=ze(n,"components").getOr([]),r=W(o,function(e){return xs(i,a,e,c)});return[te(n,{components:r})]},function(e,t){var n=t(a,u.config,u.validated);return u.validated.preprocess.getOr(b)(n)})},ws=function(t,n,e,o){var r,i,a,u=se(o,function(e,t){return o=e,r=!1,{name:U(n=t),required:function(){return o.fold(function(e,t){return e},function(e,t){return e})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r}),c=(r=t,i=n,a=u,W(e,function(e){return xs(r,i,e,a)}));return ce(u,function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+Do(n.components(),null,2))}),c},ks=bs.single,Ss=bs.multiple,Cs=U(ps),zs=me([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Os=Or("factory",{sketch:b}),Ts=Or("schema",[]),Ms=gr("name"),Hs=qo("pname","pname",Ho(function(e){return"<alloy."+oo(e.name)+">"}),cr()),Es=Br("schema",function(){return[wr("preprocess")]}),Vs=Or("defaults",U({})),As=Or("overrides",U({})),Bs=Uo([Os,Ts,Ms,Hs,Vs,As]),Ds=Uo([Os,Ts,Ms,Vs,As]),Rs=Uo([Os,Ts,Ms,Hs,Vs,As]),Fs=Uo([Os,Es,Ms,gr("unit"),Hs,Vs,As]),Is=function(e){return e.fold(P.some,P.none,P.some,P.some)},_s=function(e){var t=function(e){return e.name()};return e.fold(t,t,t,t)},Ls=function(n,o){return function(e){var t=ir("Converting part type",o,e);return n(t)}},Ns=Ls(zs.required,Bs),Ps=Ls(zs.external,Ds),js=Ls(zs.optional,Rs),Us=Ls(zs.group,Fs),Ws=U("entirety"),Gs=Object.freeze({required:Ns,external:Ps,optional:js,group:Us,asNamedPart:Is,name:_s,asCommon:function(e){return e.fold(b,b,b,b)},original:Ws}),Xs=function(e,t,n,o){var r=n;return te(t.defaults()(e,n,o),n,{uid:e.partUids()[t.name()]},t.overrides()(e,n,o),{"debug.sketcher":Oe("part-"+t.name(),r)})},Ys=function(r,e){var t={};return A(e,function(e){Is(e).each(function(n){var o=$s(r,n.pname());t[n.name()]=function(e){var t=rr("Part: "+n.name()+" in "+r,Uo(n.schema()),e);return te(o,{config:e,validated:t})}})}),t},$s=function(e,t){return{uiType:Cs(),owner:e,name:t}},qs=function(e,t,n){return{uiType:Cs(),owner:e,name:t,config:n,validated:{}}},Ks=function(e){return W(e,function(e){return e.fold(P.none,P.some,P.none,P.none).map(function(e){return br(e.name(),e.schema().concat([pa(Ws())]))}).toArray()})},Js=function(e){return V(e,_s)},Qs=function(e,t,n){return o=t,i={},r={},A(n,function(e){e.fold(function(o){i[o.pname()]=ks(!0,function(e,t,n){return o.factory().sketch(Xs(e,o,t,n))})},function(e){var t=o.parts()[e.name()]();r[e.name()]=U(e.factory().sketch(Xs(o,e,t[Ws()]()),t))},function(o){i[o.pname()]=ks(!1,function(e,t,n){return o.factory().sketch(Xs(e,o,t,n))})},function(r){i[r.pname()]=Ss(!0,function(t,e,n){var o=t[r.name()]();return V(o,function(e){return r.factory().sketch(te(r.defaults()(t,e),e,r.overrides()(t,e)))})})})}),{internals:U(i),externals:U(r)};var o,i,r},Zs=function(e,t,n){return ws(P.some(e),t,t.components(),n)},el=function(e,t,n){var o=t.partUids()[n];return e.getSystem().getByUid(o).toOption()},tl=function(e,t,n){return el(e,t,n).getOrDie("Could not find part: "+n)},nl=function(e,t,n){var o={},r=t.partUids(),i=e.getSystem();return A(n,function(e){o[e]=i.getByUid(r[e])}),se(o,U)},ol=function(e,t){var n=e.getSystem();return se(t.partUids(),function(e,t){return U(n.getByUid(e))})},rl=function(e){return ae(e.partUids())},il=function(e,t,n){var o={},r=t.partUids(),i=e.getSystem();return A(n,function(e){o[e]=i.getByUid(r[e]).getOrDie()}),se(o,U)},al=function(t,e){var n=Js(e);return Te(V(n,function(e){return{key:e,value:t+"-"+e}}))},ul=function(t){return qo("partUids","partUids",Eo(function(e){return al(e.uid,t)}),cr())},cl=Object.freeze({generate:Ys,generateOne:qs,schemas:Ks,names:Js,substitutes:Qs,components:Zs,defaultUids:al,defaultUidsSchema:ul,getAllParts:ol,getAllPartNames:rl,getPart:el,getPartOrDie:tl,getParts:nl,getPartsOrDie:il}),sl=oo("alloy-premade"),ll=oo("api"),fl=function(e){return Oe(sl,e)},dl=function(r){return e=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=e.config(ll);return r.apply(undefined,[o].concat([e].concat(t)))},t=r.toString(),n=t.indexOf(")")+1,o=t.indexOf("("),i=t.substring(o+1,n-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ri(i.slice(1))}},e;var e,t,n,o,i},ml=U(ll),gl=U("alloy-id-"),hl=U("data-alloy-id"),vl=gl(),pl=hl(),bl=function(e,t){Object.defineProperty(e.dom(),pl,{value:t,writable:!0})},yl=function(e){var t=_n.isElement(e)?e.dom()[pl]:null;return P.from(t)},xl=function(e){return oo(e)},wl=function(e,t,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[br("parts",i)]:[]).concat([gr("uid"),Or("dom",{}),Or("components",[]),pa("originalSpec"),Or("debug.sketcher",{})]).concat(a));return ir(e+" [SpecSchema]",jo(u.concat(t)),n)},kl=function(e,t,n,o,r){var i=Sl(r),a=Ks(n),u=ul(n),c=wl(e,t,i,a,[u]),s=Qs(0,c,n),l=Zs(e,c,s.internals());return te(o(c,l,i,s.externals()),{"debug.sketcher":Oe(e,r)})},Sl=function(e){return te({uid:xl("uid")},e)},Cl=jo([gr("name"),gr("factory"),gr("configFields"),Or("apis",{}),Or("extraApis",{})]),zl=jo([gr("name"),gr("factory"),gr("configFields"),gr("partFields"),Or("apis",{}),Or("extraApis",{})]),Ol=function(e){var u=rr("Sketcher for "+e.name,Cl,e),t=se(u.apis,dl),n=se(u.extraApis,function(e,t){return ii(e,t)});return te({name:U(u.name),partFields:U([]),configFields:U(u.configFields),sketch:function(e){return t=u.name,n=u.configFields,o=u.factory,i=Sl(r=e),a=wl(t,n,i,[],[]),te(o(a,i),{"debug.sketcher":Oe(t,r)});var t,n,o,r,i,a}},t,n)},Tl=function(e){var t=rr("Sketcher for "+e.name,zl,e),n=Ys(t.name,t.partFields),o=se(t.apis,dl),r=se(t.extraApis,function(e,t){return ii(e,t)});return te({name:U(t.name),partFields:U(t.partFields),configFields:U(t.configFields),sketch:function(e){return kl(t.name,t.configFields,t.partFields,t.factory,e)},parts:U(n)},o,r)},Ml=Ol({name:"Button",factory:function(e){var t=_a(e.action()),n=ze(e.dom(),"attributes").bind(Se("type")),o=ze(e.dom(),"tag");return{uid:e.uid(),dom:e.dom(),components:e.components(),events:t,behaviours:te(wi([Ua.config({}),ds.config({mode:"execution",useSpace:!0,useEnter:!0})]),gs(e.buttonBehaviours())),domModification:{attributes:te(n.fold(function(){return o.is("button")?{type:"button"}:{}},function(e){return{}}),{role:e.role().getOr("button")})},eventOrder:e.eventOrder()}},configFields:[Or("uid",undefined),gr("dom"),Or("components",[]),ms("buttonBehaviours",[Ua,ds]),wr("action"),wr("role"),Or("eventOrder",{})]}),Hl=Object.freeze({events:function(e){return Ur([Wr(Je(),U(!0))])},exhibit:function(e,t){return ci({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),El=Si({fields:[],name:"unselecting",active:Hl}),Vl=function(e){var t,n,o,r=Yt.fromHtml(e),i=yn.children(r),a=(n=(t=r).dom().attributes!==undefined?t.dom().attributes:[],R(n,function(e,t){return"class"===t.name?e:te(e,Oe(t.name,t.value))},{})),u=(o=r,Array.prototype.slice.call(o.dom().classList,0)),c=0===i.length?{}:{innerHtml:Hn(r)};return te({tag:_n.name(r),classes:u,attributes:a},c)},Al=function(e){var t,r,n=(t=e,r={prefix:Ia.prefix()},t.replace(/\$\{([^{}]*)\}/g,function(e,t){var n,o=r[t];return"string"==(n=typeof o)||"number"===n?o.toString():e}));return Vl(n)},Bl=function(e){return{dom:Al(e)}},Dl=function(e){return wi([Aa.config({toggleClass:Ia.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Ba(e,function(e,t){(t?Aa.on:Aa.off)(e)})])},Rl=function(e,t,n){return Ml.sketch({dom:Al('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:t,buttonBehaviours:te(wi([El.config({})]),n)})},Fl={forToolbar:Rl,forToolbarCommand:function(e,t){return Rl(t,function(){e.execCommand(t)},{})},forToolbarStateAction:function(e,t,n,o){var r=Dl(n);return Rl(t,o,r)},forToolbarStateCommand:function(e,t){var n=Dl(t);return Rl(t,function(){e.execCommand(t)},n)}},Il=zt.detect().deviceType.isTouch(),_l=function(e){return js({name:e+"-edge",overrides:function(o){return o.model().manager().edgeActions()[e].fold(function(){return{}},function(n){var e=Ur([Yr(De(),n,[o])]),t=Ur([Yr(_e(),n,[o]),Yr(Le(),function(e,t){t.mouseIsDown().get()&&n(e,t)},[o])]);return{events:Il?e:t}})}})},Ll=_l("top-left"),Nl=_l("top"),Pl=_l("top-right"),jl=_l("right"),Ul=_l("bottom-right"),Wl=_l("bottom"),Gl=_l("bottom-left"),Xl=[_l("left"),jl,Nl,Wl,Ll,Pl,Gl,Ul,Ns({name:"thumb",defaults:U({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:Ur([qr(De(),e,"spectrum"),qr(Re(),e,"spectrum"),qr(Fe(),e,"spectrum"),qr(_e(),e,"spectrum"),qr(Le(),e,"spectrum"),qr(Pe(),e,"spectrum")])}}}),Ns({schema:[Br("mouseIsDown",function(){return Ee(!1)})],name:"spectrum",overrides:function(n){var o=n.model().manager(),r=function(t,e){return o.getValueFromEvent(e).map(function(e){return o.setValueFrom(t,n,e)})},e=Ur([Xr(De(),r),Xr(Re(),r)]),t=Ur([Xr(_e(),r),Xr(Le(),function(e,t){n.mouseIsDown().get()&&r(e,t)})]);return{behaviours:wi(Il?[]:[ds.config({mode:"special",onLeft:function(e){return o.onLeft(e,n)},onRight:function(e){return o.onRight(e,n)},onUp:function(e){return o.onUp(e,n)},onDown:function(e){return o.onDown(e,n)}}),Ua.config({})]),events:Il?e:t}}})],Yl=function(e,t,n){t.store().manager().onLoad(e,t,n)},$l=function(e,t,n){t.store().manager().onUnload(e,t,n)},ql=Object.freeze({onLoad:Yl,onUnload:$l,setValue:function(e,t,n,o){t.store().manager().setValue(e,t,n,o)},getValue:function(e,t,n){return t.store().manager().getValue(e,t,n)},getState:function(e,t,n){return n}}),Kl=Object.freeze({events:function(n,o){var e=n.resetOnDom()?[ei(function(e,t){Yl(e,n,o)}),ti(function(e,t){$l(e,n,o)})]:[li(n,o,Yl)];return Ur(e)}}),Jl=function(){var e=Ee(null);return xi({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})},Ql=function(){var i=Ee({}),a=Ee({});return xi({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:a.get()}},lookup:function(e){return ze(i.get(),e).orThunk(function(){return ze(a.get(),e)})},update:function(e){var t=i.get(),n=a.get(),o={},r={};A(e,function(t){o[t.value]=t,ze(t,"meta").each(function(e){ze(e,"text").each(function(e){r[e]=t})})}),i.set(te(t,o)),a.set(te(n,r))},clear:function(){i.set({}),a.set({})}})},Zl=Object.freeze({memory:Jl,dataset:Ql,manual:function(){return xi({readState:function(){}})},init:function(e){return e.store().manager().state(e)}}),ef=function(e,t,n,o){var r=t.store();n.update([o]),r.setValue()(e,o),t.onSetValue()(e,o)},tf=[wr("initialValue"),gr("getFallbackEntry"),gr("getDataKey"),gr("setValue"),va("manager",{setValue:ef,getValue:function(e,t,n){var o=t.store(),r=o.getDataKey()(e);return n.lookup(r).fold(function(){return o.getFallbackEntry()(r)},function(e){return e})},onLoad:function(t,n,o){n.store().initialValue().each(function(e){ef(t,n,o,e)})},onUnload:function(e,t,n){n.clear()},state:Ql})],nf=[gr("getValue"),Or("setValue",N),wr("initialValue"),va("manager",{setValue:function(e,t,n,o){t.store().setValue()(e,o),t.onSetValue()(e,o)},getValue:function(e,t,n){return t.store().getValue()(e)},onLoad:function(t,n,e){n.store().initialValue().each(function(e){n.store().setValue()(t,e)})},onUnload:N,state:yi.init})],of=[wr("initialValue"),va("manager",{setValue:function(e,t,n,o){n.set(o),t.onSetValue()(e,o)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store().initialValue().each(function(e){n.isNotSet()&&n.set(e)})},onUnload:function(e,t,n){n.clear()},state:Jl})],rf=[Tr("store",{mode:"memory"},ur("mode",{memory:of,manual:nf,dataset:tf})),da("onSetValue"),Or("resetOnDom",!1)],af=Si({fields:rf,name:"representing",active:Kl,apis:ql,extra:{setValueFrom:function(e,t){var n=af.getValue(t);af.setValue(e,n)}},state:Zl}),uf=function(n,o){return{left:U(n),top:U(o),translate:function(e,t){return uf(n+e,o+t)}}},cf=uf,sf=zt.detect().deviceType.isTouch(),lf=U("slider.change.value"),ff=function(e){var t=e.event().raw();if(sf){var n=t;return n.touches!==undefined&&1===n.touches.length?P.some(n.touches[0]).map(function(e){return cf(e.clientX,e.clientY)}):P.none()}var o=t;return o.clientX!==undefined?P.some(o).map(function(e){return cf(e.clientX,e.clientY)}):P.none()},df=function(e,t,n,o){return e<t?e:n<e?n:e===t?t-1:Math.max(t,e-o)},mf=function(e,t,n,o){return n<e?e:e<t?t:e===n?n+1:Math.min(n,e+o)},gf=function(e,t,n){return Math.max(t,Math.min(n,e))},hf=function(e){var t=e.min,n=e.max,o=e.range,r=e.value,i=e.step,a=e.snap,u=e.snapStart,c=e.rounded,s=e.hasMinEdge,l=e.hasMaxEdge,f=e.minBound,d=e.maxBound,m=e.screenRange,g=s?t-1:t,h=l?n+1:n;if(r<f)return g;if(d<r)return h;var v,p,b,y,x,w,k,S=(x=r,w=f,k=d,Math.min(k,Math.max(x,w))-w),C=gf(S/m*o+t,g,h);return a&&t<=C&&C<=n?(v=C,p=t,b=n,y=i,u.fold(function(){var e=v-p,t=Math.round(e/y)*y;return gf(p+t,p-1,b+1)},function(e){var t=(v-e)%y,n=Math.round(t/y),o=Math.floor((v-e)/y),r=Math.floor((b-e)/y),i=e+Math.min(r,o+n)*y;return Math.max(e,i)})):c?Math.round(C):C},vf=function(e){var t=e.min,n=e.max,o=e.range,r=e.value,i=e.hasMinEdge,a=e.hasMaxEdge,u=e.maxBound,c=e.maxOffset,s=e.centerMinEdge,l=e.centerMaxEdge;return r<t?i?0:s:n<r?a?u:l:(r-t)/o*c},pf=Ja("width",function(e){return e.dom().offsetWidth}),bf=function(e,t){pf.set(e,t)},yf=function(e){return pf.get(e)},xf=function(e){return pf.getOuter(e)},wf=function(e){return e.model().minX()},kf=function(e){return e.model().minY()},Sf=function(e){return e.model().minX()-1},Cf=function(e){return e.model().minY()-1},zf=function(e){return e.model().maxX()},Of=function(e){return e.model().maxY()},Tf=function(e){return e.model().maxX()+1},Mf=function(e){return e.model().maxY()+1},Hf=function(e,t,n){return t(e)-n(e)},Ef=function(e){return Hf(e,zf,wf)},Vf=function(e){return Hf(e,Of,kf)},Af=function(e){return Ef(e)/2},Bf=function(e){return Vf(e)/2},Df=function(e){return e.stepSize()},Rf=function(e){return e.snapToGrid()},Ff=function(e){return e.snapStart()},If=function(e){return e.rounded()},_f=function(e,t){return e[t+"-edge"]!==undefined},Lf=function(e){return _f(e,"left")},Nf=function(e){return _f(e,"right")},Pf=function(e){return _f(e,"top")},jf=function(e){return _f(e,"bottom")},Uf=function(e){return e.model().value().get()},Wf=function(e){return{x:U(e)}},Gf=function(e){return{y:U(e)}},Xf=function(e,t){return{x:U(e),y:U(t)}},Yf=function(e,t){ao(e,lf(),{value:t})},$f="left",qf=function(e){return e.element().dom().getBoundingClientRect()},Kf=function(e,t){return e[t]},Jf=function(e){var t=qf(e);return Kf(t,$f)},Qf=function(e){var t=qf(e);return Kf(t,"right")},Zf=function(e){var t=qf(e);return Kf(t,"top")},ed=function(e){var t=qf(e);return Kf(t,"bottom")},td=function(e){var t=qf(e);return Kf(t,"width")},nd=function(e){var t=qf(e);return Kf(t,"height")},od=function(e,t,n){return(e+t)/2-n},rd=function(e,t){var n=qf(e),o=qf(t),r=Kf(n,$f),i=Kf(n,"right"),a=Kf(o,$f);return od(r,i,a)},id=function(e,t){var n=qf(e),o=qf(t),r=Kf(n,"top"),i=Kf(n,"bottom"),a=Kf(o,"top");return od(r,i,a)},ad=function(e,t){ao(e,lf(),{value:t})},ud=function(e){return{x:U(e)}},cd=function(e,t,n){var o={min:wf(t),max:zf(t),range:Ef(t),value:n,step:Df(t),snap:Rf(t),snapStart:Ff(t),rounded:If(t),hasMinEdge:Lf(t),hasMaxEdge:Nf(t),minBound:Jf(e),maxBound:Qf(e),screenRange:td(e)};return hf(o)},sd=function(a){return function(e,t){return(n=a,o=e,r=t,i=(0<n?mf:df)(Uf(r).x(),wf(r),zf(r),Df(r)),ad(o,ud(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},ld=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=(u=i,c=n,s=o,l=r,f=td(a=t),d=s.bind(function(e){return P.some(rd(e,a))}).getOr(0),m=l.bind(function(e){return P.some(rd(e,a))}).getOr(f),g={min:wf(u),max:zf(u),range:Ef(u),value:c,hasMinEdge:Lf(u),hasMaxEdge:Nf(u),minBound:Jf(a),minOffset:0,maxBound:Qf(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},vf(g));return Jf(t)-Jf(e)+h},fd=sd(-1),dd=sd(1),md=P.none,gd=P.none,hd=U({"top-left":P.none(),top:P.none(),"top-right":P.none(),right:P.some(function(e,t){Yf(e,Wf(Tf(t)))}),"bottom-right":P.none(),bottom:P.none(),"bottom-left":P.none(),left:P.some(function(e,t){Yf(e,Wf(Sf(t)))})}),vd=Object.freeze({setValueFrom:function(e,t,n){var o=cd(e,t,n),r=ud(o);return ad(e,r),o},setToMin:function(e,t){var n=wf(t);ad(e,ud(n))},setToMax:function(e,t){var n=zf(t);ad(e,ud(n))},findValueOfOffset:cd,getValueFromEvent:function(e){return ff(e).map(function(e){return e.left()})},findPositionOfValue:ld,setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=ld(e,o.getSpectrum(e),r.x(),o.getLeftEdge(e),o.getRightEdge(e),n),a=yf(t.element())/2;Ka.set(t.element(),"left",i-a+"px")},onLeft:fd,onRight:dd,onUp:md,onDown:gd,edgeActions:hd}),pd=function(e,t){ao(e,lf(),{value:t})},bd=function(e){return{y:U(e)}},yd=function(e,t,n){var o={min:kf(t),max:Of(t),range:Vf(t),value:n,step:Df(t),snap:Rf(t),snapStart:Ff(t),rounded:If(t),hasMinEdge:Pf(t),hasMaxEdge:jf(t),minBound:Zf(e),maxBound:ed(e),screenRange:nd(e)};return hf(o)},xd=function(a){return function(e,t){return(n=a,o=e,r=t,i=(0<n?mf:df)(Uf(r).y(),kf(r),Of(r),Df(r)),pd(o,bd(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},wd=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=(u=i,c=n,s=o,l=r,f=nd(a=t),d=s.bind(function(e){return P.some(id(e,a))}).getOr(0),m=l.bind(function(e){return P.some(id(e,a))}).getOr(f),g={min:kf(u),max:Of(u),range:Vf(u),value:c,hasMinEdge:Pf(u),hasMaxEdge:jf(u),minBound:Zf(a),minOffset:0,maxBound:ed(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},vf(g));return Zf(t)-Zf(e)+h},kd=P.none,Sd=P.none,Cd=xd(-1),zd=xd(1),Od=U({"top-left":P.none(),top:P.some(function(e,t){Yf(e,Gf(Cf(t)))}),"top-right":P.none(),right:P.none(),"bottom-right":P.none(),bottom:P.some(function(e,t){Yf(e,Gf(Mf(t)))}),"bottom-left":P.none(),left:P.none()}),Td=Object.freeze({setValueFrom:function(e,t,n){var o=yd(e,t,n),r=bd(o);return pd(e,r),o},setToMin:function(e,t){var n=kf(t);pd(e,bd(n))},setToMax:function(e,t){var n=Of(t);pd(e,bd(n))},findValueOfOffset:yd,getValueFromEvent:function(e){return ff(e).map(function(e){return e.top()})},findPositionOfValue:wd,setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=wd(e,o.getSpectrum(e),r.y(),o.getTopEdge(e),o.getBottomEdge(e),n),a=Za(t.element())/2;Ka.set(t.element(),"top",i-a+"px")},onLeft:kd,onRight:Sd,onUp:Cd,onDown:zd,edgeActions:Od}),Md=function(e,t){ao(e,lf(),{value:t})},Hd=function(e,t){return{x:U(e),y:U(t)}},Ed=function(s,l){return function(e,t){return(n=s,o=l,r=e,i=t,a=0<n?mf:df,u=o?Uf(i).x():a(Uf(i).x(),wf(i),zf(i),Df(i)),c=o?a(Uf(i).y(),kf(i),Of(i),Df(i)):Uf(i).y(),Md(r,Hd(u,c)),P.some(u)).map(function(){return!0});var n,o,r,i,a,u,c}},Vd=Ed(-1,!1),Ad=Ed(1,!1),Bd=Ed(-1,!0),Dd=Ed(1,!0),Rd=U({"top-left":P.some(function(e,t){Yf(e,Xf(Sf(t),Cf(t)))}),top:P.some(function(e,t){Yf(e,Xf(Af(t),Cf(t)))}),"top-right":P.some(function(e,t){Yf(e,Xf(Tf(t),Cf(t)))}),right:P.some(function(e,t){Yf(e,Xf(Tf(t),Bf(t)))}),"bottom-right":P.some(function(e,t){Yf(e,Xf(Tf(t),Mf(t)))}),bottom:P.some(function(e,t){Yf(e,Xf(Af(t),Mf(t)))}),"bottom-left":P.some(function(e,t){Yf(e,Xf(Sf(t),Mf(t)))}),left:P.some(function(e,t){Yf(e,Xf(Sf(t),Bf(t)))})}),Fd=Object.freeze({setValueFrom:function(e,t,n){var o=cd(e,t,n.left()),r=yd(e,t,n.top()),i=Hd(o,r);return Md(e,i),i},setToMin:function(e,t){var n=wf(t),o=kf(t);Md(e,Hd(n,o))},setToMax:function(e,t){var n=zf(t),o=Of(t);Md(e,Hd(n,o))},getValueFromEvent:function(e){return ff(e)},setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=ld(e,o.getSpectrum(e),r.x(),o.getLeftEdge(e),o.getRightEdge(e),n),a=wd(e,o.getSpectrum(e),r.y(),o.getTopEdge(e),o.getBottomEdge(e),n),u=yf(t.element())/2,c=Za(t.element())/2;Ka.set(t.element(),"left",i-u+"px"),Ka.set(t.element(),"top",a-c+"px")},onLeft:Vd,onRight:Ad,onUp:Bd,onDown:Dd,edgeActions:Rd}),Id=zt.detect().deviceType.isTouch(),_d=[Or("stepSize",1),Or("onChange",N),Or("onChoose",N),Or("onInit",N),Or("onDragStart",N),Or("onDragEnd",N),Or("snapToGrid",!1),Or("rounded",!0),wr("snapStart"),hr("model",ur("mode",{x:[Or("minX",0),Or("maxX",100),Br("value",function(e){return Ee(e.mode.minX)}),gr("getInitialValue"),va("manager",vd)],y:[Or("minY",0),Or("maxY",100),Br("value",function(e){return Ee(e.mode.minY)}),gr("getInitialValue"),va("manager",Td)],xy:[Or("minX",0),Or("maxX",100),Or("minY",0),Or("maxY",100),Br("value",function(e){return Ee({x:U(e.mode.minX),y:U(e.mode.minY)})}),gr("getInitialValue"),va("manager",Fd)]})),ms("sliderBehaviours",[ds,af])].concat(Id?[]:[Br("mouseIsDown",function(){return Ee(!1)})]),Ld=zt.detect().deviceType.isTouch(),Nd=Tl({name:"Slider",configFields:_d,partFields:Xl,factory:function(i,e,t,n){var a=function(e){return tl(e,i,"thumb")},u=function(e){return tl(e,i,"spectrum")},o=function(e){return el(e,i,"left-edge")},r=function(e){return el(e,i,"right-edge")},c=function(e){return el(e,i,"top-edge")},s=function(e){return el(e,i,"bottom-edge")},l=i.model(),f=l.manager(),d=function(e,t){f.setPositionFromValue(e,t,i,{getLeftEdge:o,getRightEdge:r,getTopEdge:c,getBottomEdge:s,getSpectrum:u})},m=function(e,t){l.value().set(t);var n=a(e);return d(e,n),i.onChange()(e,n,t),P.some(!0)},g=[Xr(De(),function(e,t){i.onDragStart()(e,a(e))}),Xr(Fe(),function(e,t){i.onDragEnd()(e,a(e))})],h=[Xr(_e(),function(e,t){t.stop(),i.onDragStart()(e,a(e)),i.mouseIsDown().set(!0)}),Xr(Pe(),function(e,t){i.onDragEnd()(e,a(e))})],v=Ld?g:h;return{uid:i.uid(),dom:i.dom(),components:e,behaviours:te(wi(j([Ld?[]:[ds.config({mode:"special",focusIn:function(e){return el(e,i,"spectrum").map(ds.focusIn).map(U(!0))}})],[af.config({store:{mode:"manual",getValue:function(e){return l.value().get()}}}),xa.config({channels:{"mouse.released":{onReceive:function(n,e){var t=i.mouseIsDown().get();i.mouseIsDown().set(!1),t&&el(n,i,"thumb").each(function(e){var t=l.value().get();i.onChoose()(n,e,t)})}}}})]])),gs(i.sliderBehaviours())),events:Ur([Xr(lf(),function(e,t){m(e,t.event().value())}),ei(function(e,t){var n=l.getInitialValue();l.value().set(n());var o=a(e);d(e,o);var r=u(e);i.onInit()(e,o,r,l.value().get())})].concat(v)),apis:{resetToMin:function(e){f.setToMin(e,i)},resetToMax:function(e){f.setToMax(e,i)},changeValue:m,refresh:d},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),Pd=function(t,n,o){return Fl.forToolbar(n,function(){var e=o();t.setContextToolbar([{label:n+" group",items:e}])},{})},jd=function(e){return[(r=e,i=function(e){return e<0?"black":360<e?"white":"hsl("+e+", 100%, 50%)"},Nd.sketch({dom:Al('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[Nd.parts()["left-edge"](Bl('<div class="${prefix}-hue-slider-black"></div>')),Nd.parts().spectrum({dom:Al('<div class="${prefix}-slider-gradient-container"></div>'),components:[Bl('<div class="${prefix}-slider-gradient"></div>')],behaviours:wi([Aa.config({toggleClass:Ia.resolve("thumb-active")})])}),Nd.parts()["right-edge"](Bl('<div class="${prefix}-hue-slider-white"></div>')),Nd.parts().thumb({dom:Al('<div class="${prefix}-slider-thumb"></div>'),behaviours:wi([Aa.config({toggleClass:Ia.resolve("thumb-active")})])})],onChange:function(e,t,n){var o=i(n.x());Ka.set(t.element(),"background-color",o),r.onChange(e,t,o)},onDragStart:function(e,t){Aa.on(t)},onDragEnd:function(e,t){Aa.off(t)},onInit:function(e,t,n,o){var r=i(o.x());Ka.set(t.element(),"background-color",r)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:function(){return r.getInitialValue()}}}},sliderBehaviours:wi([Da(Nd.refresh)])}))];var r,i},Ud=function(e,o){var t={onChange:function(e,t,n){o.undoManager.transact(function(){o.formatter.apply("forecolor",{value:n}),o.nodeChanged()})},getInitialValue:function(){return-1}};return Pd(e,"color",function(){return jd(t)})},Wd=jo([gr("getInitialValue"),gr("onChange"),gr("category"),gr("sizes")]),Gd=function(e){var i=rr("SizeSlider",Wd,e);return Nd.sketch({dom:{tag:"div",classes:[Ia.resolve("slider-"+i.category+"-size-container"),Ia.resolve("slider"),Ia.resolve("slider-size-container")]},onChange:function(e,t,n){var o,r=n.x();0<=(o=r)&&o<i.sizes.length&&i.onChange(r)},onDragStart:function(e,t){Aa.on(t)},onDragEnd:function(e,t){Aa.off(t)},model:{mode:"x",minX:0,maxX:i.sizes.length-1,getInitialValue:function(){return{x:function(){return i.getInitialValue()}}}},stepSize:1,snapToGrid:!0,sliderBehaviours:wi([Da(Nd.refresh)]),components:[Nd.parts().spectrum({dom:Al('<div class="${prefix}-slider-size-container"></div>'),components:[Bl('<div class="${prefix}-slider-size-line"></div>')]}),Nd.parts().thumb({dom:Al('<div class="${prefix}-slider-thumb"></div>'),behaviours:wi([Aa.config({toggleClass:Ia.resolve("thumb-active")})])})]})},Xd=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],Yd=function(e){var t,n,o=e.selection.getStart(),r=Yt.fromDom(o),i=Yt.fromDom(e.getBody()),a=(t=function(e){return dn(i,e)},n=r,(_n.isElement(n)?P.some(n):yn.parent(n)).map(function(e){return Pr.closest(e,function(e){return Ka.getRaw(e,"font-size").isSome()},t).bind(function(e){return Ka.getRaw(e,"font-size")}).getOrThunk(function(){return Ka.get(e,"font-size")})}).getOr(""));return F(Xd,function(e){return a===e}).getOr("medium")},$d={candidates:U(Xd),get:function(e){var t,n=Yd(e);return(t=n,I(Xd,function(e){return e===t})).getOr(2)},apply:function(o,e){var t;(t=e,P.from(Xd[t])).each(function(e){var t,n;n=e,Yd(t=o)!==n&&t.execCommand("fontSize",!1,n)})}},qd=$d.candidates(),Kd=function(e){return[Bl('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(t=e,Gd({onChange:t.onChange,sizes:qd,category:"font",getInitialValue:t.getInitialValue})),Bl('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')];var t},Jd=function(e){var t=function n(e){return e.uid!==undefined}(e)&&He(e,"uid")?e.uid:xl("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).fold(P.none,P.some)},asSpec:function(){return te(e,{uid:t})}}};function Qd(e,t){return em(document.createElement("canvas"),e,t)}function Zd(e){return e.getContext("2d")}function em(e,t,n){return e.width=t,e.height=n,e}var tm={create:Qd,clone:function CB(e){var t;return Zd(t=Qd(e.width,e.height)).drawImage(e,0,0),t},resize:em,get2dContext:Zd,get3dContext:function zB(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(n){}return t||(t=null),t}},nm={getWidth:function OB(e){return e.naturalWidth||e.width},getHeight:function TB(e){return e.naturalHeight||e.height}},om=window.Promise?window.Promise:function(){var e=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,o(r,this),o(a,this))},t=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(o){var r=this;null!==this._state?t(function(){var e=r._state?o.onFulfilled:o.onRejected;if(null!==e){var t;try{t=e(r._value)}catch(n){return void o.reject(n)}o.resolve(t)}else(r._state?o.resolve:o.reject)(r._value)}):this._deferreds.push(o)}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void s(o(t,e),o(r,this),o(a,this))}this._state=!0,this._value=e,u.call(this)}catch(n){a.call(this,n)}}function a(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function s(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(r){if(o)return;o=!0,n(r)}}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype.then=function(n,o){var r=this;return new e(function(e,t){i.call(r,new c(n,o,e,t))})},e.all=function(){var c=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new e(function(r,i){if(0===c.length)return r([]);var a=c.length;function u(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}c[t]=e,0==--a&&r(c)}catch(o){i(o)}}for(var e=0;e<c.length;e++)u(e,c[e])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(n){return new e(function(e,t){t(n)})},e.race=function(r){return new e(function(e,t){for(var n=0,o=r.length;n<o;n++)r[n].then(e,t)})},e}();function rm(){return new(rn.getOrDie("FileReader"))}var im={atob:function(e){return rn.getOrDie("atob")(e)},requestAnimationFrame:function(e){rn.getOrDie("requestAnimationFrame")(e)}};function am(u){return new om(function(e,t){var n=URL.createObjectURL(u),o=new Image,r=function(){o.removeEventListener("load",i),o.removeEventListener("error",a)};function i(){r(),e(o)}function a(){r(),t("Unable to load data of type "+u.type+": "+n)}o.addEventListener("load",i),o.addEventListener("error",a),o.src=n,o.complete&&i()})}function um(o){return new om(function(e,n){var t=new XMLHttpRequest;t.open("GET",o,!0),t.responseType="blob",t.onload=function(){200==this.status&&e(this.response)},t.onerror=function(){var e,t=this;n(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},t.send()})}function cm(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return P.none();for(var o,r=n[1],i=t[1],a=im.atob(i),u=a.length,c=Math.ceil(u/1024),s=new Array(c),l=0;l<c;++l){for(var f=1024*l,d=Math.min(f+1024,u),m=new Array(d-f),g=f,h=0;g<d;++h,++g)m[h]=a[g].charCodeAt(0);s[l]=(o=m,new(rn.getOrDie("Uint8Array"))(o))}return P.some(function v(e,t){return new(rn.getOrDie("Blob"))(e,t)}(s,{type:r}))}function sm(n){return new om(function(e,t){cm(n).fold(function(){t("uri is not base64: "+n)},e)})}function lm(n){return new om(function(e){var t=new rm;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})}var fm,dm,mm={blobToImage:am,imageToBlob:function MB(e){var t=e.src;return 0===t.indexOf("data:")?sm(t):um(t)},blobToArrayBuffer:function HB(n){return new om(function(e){var t=new rm;t.onloadend=function(){e(t.result)},t.readAsArrayBuffer(n)})},blobToDataUri:lm,blobToBase64:function EB(e){return lm(e).then(function(e){return e.split(",")[1]})},dataUriToBlobSync:cm,canvasToBlob:function VB(e,n,o){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new om(function(t){e.toBlob(function(e){t(e)},n,o)}):sm(e.toDataURL(n,o))},canvasToDataURL:function AB(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})},blobToCanvas:function BB(e){return am(e).then(function(e){var t;return function n(e){URL.revokeObjectURL(e.src)}(e),t=tm.create(nm.getWidth(e),nm.getHeight(e)),tm.get2dContext(t).drawImage(e,0,0),t})},uriToBlob:function DB(e){return 0===e.indexOf("blob:")?um(e):0===e.indexOf("data:")?sm(e):null}},gm=function(e){return mm.blobToBase64(e)},hm=function(a){var t=Jd({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:Ur([Jr(qe()),Xr($e(),function(e,t){var n,o,r;(n=t,o=n.event(),r=o.raw().target.files||o.raw().dataTransfer.files,P.from(r[0])).each(function(e){var r,i;r=a,gm(i=e).then(function(o){r.undoManager.transact(function(){var e=r.editorUpload.blobCache,t=e.create(oo("mceu"),i,o);e.add(t);var n=r.dom.createHTML("img",{src:t.blobUri()});r.insertContent(n)})})})})])});return Ml.sketch({dom:Al('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[t.asSpec()],action:function(e){t.get(e).element().dom().click()}})},vm=function(e){return e.dom().textContent},pm=function(e,t){e.dom().textContent=t},bm=function(e){return 0<e.length},ym=function(e){return e===undefined||null===e?"":e},xm=function(t,n,e){return e.text.toOption().filter(bm).fold(function(){return Un.get(e=t,"href")===vm(e)?P.some(n):P.none();var e},P.some)},wm=function(e){var t=Yt.fromDom(e.selection.getStart());return du(t,"a")},km={getInfo:function(e){return wm(e).fold(function(){return{url:"",text:e.selection.getContent({format:"text"}),title:"",target:"",link:P.none()}},function(e){return n=vm(t=e),o=Un.get(t,"href"),r=Un.get(t,"title"),i=Un.get(t,"target"),{url:ym(o),text:n!==o?ym(n):"",title:ym(r),target:ym(i),link:P.some(t)};var t,n,o,r,i})},applyInfo:function(r,i){i.url.toOption().filter(bm).fold(function(){var t;t=r,i.link.bind(b).each(function(e){t.execCommand("unlink")})},function(n){var e,t,o=(e=i,(t={}).href=n,e.title.toOption().filter(bm).each(function(e){t.title=e}),e.target.toOption().filter(bm).each(function(e){t.target=e}),t);i.link.bind(b).fold(function(){var e=i.text.toOption().filter(bm).getOr(n);r.insertContent(r.dom.createHTML("a",o,r.dom.encode(e)))},function(t){var e=xm(t,n,i);Un.setAll(t,o),e.each(function(e){pm(t,e)})})})},query:wm},Sm=zt.detect(),Cm=function(e,t){var n=t.selection.getRng();e(),t.selection.setRng(n)},zm=function(e,t){(Sm.os.isAndroid()?Cm:u)(t,e)},Om=function(e,t){var n,o;return{key:e,value:{config:{},me:(n=e,o=Ur(t),Si({fields:[gr("enabled")],name:n,active:{events:U(o)}})),configAsRaw:U({}),initialConfig:{},state:yi}}},Tm=Object.freeze({getCurrent:function(e,t,n){return t.find()(e)}}),Mm=[gr("find")],Hm=Si({fields:Mm,name:"composing",apis:Tm}),Em=Ol({name:"Container",factory:function(e){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"presentation"}},e.dom()),components:e.components(),behaviours:gs(e.containerBehaviours()),events:e.events(),domModification:e.domModification(),eventOrder:e.eventOrder()}},configFields:[Or("components",[]),ms("containerBehaviours",[]),Or("events",{}),Or("domModification",{}),Or("eventOrder",{})]}),Vm=Ol({name:"DataField",factory:function(n){return{uid:n.uid(),dom:n.dom(),behaviours:te(wi([af.config({store:{mode:"memory",initialValue:n.getInitialValue()()}}),Hm.config({find:P.some})]),gs(n.dataBehaviours())),events:Ur([ei(function(e,t){af.setValue(e,n.getInitialValue()())})])}},configFields:[gr("uid"),gr("dom"),gr("getInitialValue"),ms("dataBehaviours",[af,Hm])]}),Am=function(e,t){if(t===undefined)throw new Error("Value.set was undefined");e.dom().value=t},Bm=function(e){return e.dom().value},Dm=U([wr("data"),Or("inputAttributes",{}),Or("inputStyles",{}),Or("tag","input"),Or("inputClasses",[]),da("onSetValue"),Or("styles",{}),Or("eventOrder",{}),ms("inputBehaviours",[af,Ua]),Or("selectOnFocus",!0)]),Rm=function(e){return wi([Ua.config({onFocus:!1===e.selectOnFocus()?N:function(e){var t=e.element(),n=Bm(t);t.dom().setSelectionRange(0,n.length)}})])},Fm=function(e){return{tag:e.tag(),attributes:te({type:"input"},e.inputAttributes()),styles:e.inputStyles(),classes:e.inputClasses()}},Im=Ol({name:"Input",configFields:Dm(),factory:function(e,t){return{uid:e.uid(),dom:Fm(e),components:[],behaviours:(n=e,te(wi([af.config({store:{mode:"manual",initialValue:n.data().getOr(undefined),getValue:function(e){return Bm(e.element())},setValue:function(e,t){Bm(e.element())!==t&&Am(e.element(),t)}},onSetValue:n.onSetValue()})]),Rm(n),gs(n.inputBehaviours()))),eventOrder:e.eventOrder()};var n}}),_m=Object.freeze({exhibit:function(e,t){return ci({attributes:Te([{key:t.tabAttr(),value:"true"}])})}}),Lm=[Or("tabAttr","data-alloy-tabstop")],Nm=Si({fields:Lm,name:"tabstopping",active:_m}),Pm=function(e,t){var n=Jd(Im.sketch({inputAttributes:{placeholder:t},onSetValue:function(e,t){io(e,Ye())},inputBehaviours:wi([Hm.config({find:P.some}),Nm.config({}),ds.config({mode:"execution"})]),selectOnFocus:!1})),o=Jd(Ml.sketch({dom:Al('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(e){var t=n.get(e);af.setValue(t,"")}}));return{name:e,spec:Em.sketch({dom:Al('<div class="${prefix}-input-container"></div>'),components:[n.asSpec(),o.asSpec()],containerBehaviours:wi([Aa.config({toggleClass:Ia.resolve("input-container-empty")}),Hm.config({find:function(e){return P.some(n.get(e))}}),Om("input-clearing",[Xr(Ye(),function(e){var t=n.get(e);(0<af.getValue(t).length?Aa.off:Aa.on)(e)})])])})}},jm=["input","button","textarea"],Um=function(e,t,n){t.disabled()&&qm(e,t,n)},Wm=function(e){return M(jm,_n.name(e.element()))},Gm=function(e){Un.set(e.element(),"disabled","disabled")},Xm=function(e){Un.remove(e.element(),"disabled")},Ym=function(e){Un.set(e.element(),"aria-disabled","true")},$m=function(e){Un.set(e.element(),"aria-disabled","false")},qm=function(t,e,n){e.disableClass().each(function(e){Pi.add(t.element(),e)}),(Wm(t)?Gm:Ym)(t)},Km=function(e){return Wm(e)?Un.has(e.element(),"disabled"):"true"===Un.get(e.element(),"aria-disabled")},Jm=Object.freeze({enable:function(t,e,n){e.disableClass().each(function(e){Pi.remove(t.element(),e)}),(Wm(t)?Xm:$m)(t)},disable:qm,isDisabled:Km,onLoad:Um}),Qm=Object.freeze({exhibit:function(e,t,n){return ci({classes:t.disabled()?t.disableClass().map(q).getOr([]):[]})},events:function(e,t){return Ur([Wr(Et(),function(e,t){return Km(e)}),li(e,t,Um)])}}),Zm=[Or("disabled",!1),wr("disableClass")],eg=Si({fields:Zm,name:"disabling",active:Qm,apis:Jm}),tg=[ms("formBehaviours",[af])],ng=function(e){return"<alloy.field."+e+">"},og=function(o,e,t){return te({"debug.sketcher":{Form:t},uid:o.uid(),dom:o.dom(),components:e,behaviours:te(wi([af.config({store:{mode:"manual",getValue:function(e){var t=ol(e,o);return se(t,function(e,t){return e().bind(function(e){var t,n=Hm.getCurrent(e);return t="missing current",n.fold(function(){return ie.error(t)},ie.value)}).map(af.getValue)})},setValue:function(n,e){ce(e,function(t,e){el(n,o,e).each(function(e){Hm.getCurrent(e).each(function(e){af.setValue(e,t)})})})}}})]),gs(o.formBehaviours())),apis:{getField:function(e,t){return el(e,o,t).bind(Hm.getCurrent)}}})},rg={getField:dl(function(e,t,n){return e.getField(t,n)}),sketch:function(e){var n,t=(n=[],{field:function(e,t){return n.push(e),qs("form",ng(e),t)},record:function(){return n}}),o=e(t),r=t.record(),i=V(r,function(e){return Ns({name:e,pname:ng(e)})});return kl("form",tg,i,og,o)}},ig=function(){var t=Ee(P.none()),n=function(){t.get().each(function(e){e.destroy()})};return{clear:function(){n(),t.set(P.none())},isSet:function(){return t.get().isSome()},set:function(e){n(),t.set(P.some(e))},run:function(e){t.get().each(e)}}},ag=function(){var t=Ee(P.none());return{clear:function(){t.set(P.none())},set:function(e){t.set(P.some(e))},isSet:function(){return t.get().isSome()},on:function(e){t.get().each(e)}}},ug=function(e){return{xValue:e,points:[]}},cg=function(e,t){if(t===e.xValue)return e;var n=0<t-e.xValue?1:-1,o={direction:n,xValue:t};return{xValue:t,points:(0===e.points.length?[]:e.points[e.points.length-1].direction===n?e.points.slice(0,e.points.length-1):e.points).concat([o])}},sg=function(e){if(0===e.points.length)return 0;var t=e.points[0].direction,n=e.points[e.points.length-1].direction;return-1===t&&-1===n?-1:1===t&&1===n?1:0},lg=function(e){var o="navigateEvent",t=Uo([gr("fields"),Or("maxFieldIndex",e.fields.length-1),gr("onExecute"),gr("getInitialValue"),Br("state",function(){return{dialogSwipeState:ag(),currentScreen:Ee(0)}})]),a=rr("SerialisedDialog",t,e),r=function(t,e,n){return Ml.sketch({dom:Al('<span class="${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:function(e){ao(e,o,{direction:t})},buttonBehaviours:wi([eg.config({disableClass:Ia.resolve("toolbar-navigation-disabled"),disabled:!n})])})},i=function(e,r){var i=uu(e.element(),"."+Ia.resolve("serialised-dialog-screen"));fu(e.element(),"."+Ia.resolve("serialised-dialog-chain")).each(function(o){0<=a.state.currentScreen.get()+r&&a.state.currentScreen.get()+r<i.length&&(Ka.getRaw(o,"left").each(function(e){var t=parseInt(e,10),n=yf(i[0]);Ka.set(o,"left",t-r*n+"px")}),a.state.currentScreen.set(a.state.currentScreen.get()+r))})},u=function(o){var e=uu(o.element(),"input");P.from(e[a.state.currentScreen.get()]).each(function(e){o.getSystem().getByDom(e).each(function(e){var t,n;t=o,n=e.element(),t.getSystem().triggerFocus(n,t.element())})});var t=s.get(o);Ru.highlightAt(t,a.state.currentScreen.get())},c=Jd(rg.sketch(function(n){return{dom:Al('<div class="${prefix}-serialised-dialog"></div>'),components:[Em.sketch({dom:Al('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:V(a.fields,function(e,t){return t<=a.maxFieldIndex?Em.sketch({dom:Al('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",0<t),n.field(e.name,e.spec),r(1,"next",t<a.maxFieldIndex)]}):n.field(e.name,e.spec)})})],formBehaviours:wi([Da(function(e,t){var n;n=t,fu(e.element(),"."+Ia.resolve("serialised-dialog-chain")).each(function(e){Ka.set(e,"left",-a.state.currentScreen.get()*n.width+"px")})}),ds.config({mode:"special",focusIn:function(e){u(e)},onTab:function(e){return i(e,1),P.some(!0)},onShiftTab:function(e){return i(e,-1),P.some(!0)}}),Om("form-events",[ei(function(t,e){a.state.currentScreen.set(0),a.state.dialogSwipeState.clear();var n=s.get(t);Ru.highlightFirst(n),a.getInitialValue(t).each(function(e){af.setValue(t,e)})}),oi(a.onExecute),Xr(Ke(),function(e,t){"left"===t.event().raw().propertyName&&u(e)}),Xr(o,function(e,t){var n=t.event().direction();i(e,n)})])])}})),s=Jd({dom:Al('<div class="${prefix}-dot-container"></div>'),behaviours:wi([Ru.config({highlightClass:Ia.resolve("dot-active"),itemClass:Ia.resolve("dot-item")})]),components:W(a.fields,function(e,t){return t<=a.maxFieldIndex?[Bl('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:Al('<div class="${prefix}-serializer-wrapper"></div>'),components:[c.asSpec(),s.asSpec()],behaviours:wi([ds.config({mode:"special",focusIn:function(e){var t=c.get(e);ds.focusIn(t)}}),Om("serializer-wrapper-events",[Xr(De(),function(e,t){var n=t.event();a.state.dialogSwipeState.set(ug(n.raw().touches[0].clientX))}),Xr(Re(),function(e,t){var n=t.event();a.state.dialogSwipeState.on(function(e){t.event().prevent(),a.state.dialogSwipeState.set(cg(e,n.raw().touches[0].clientX))})}),Xr(Fe(),function(o){a.state.dialogSwipeState.on(function(e){var t=c.get(o),n=-1*sg(e);i(t,n)})})])])}},fg=Ze(function(n,o){return[{label:"the link group",items:[lg({fields:[Pm("url","Type or paste URL"),Pm("text","Link text"),Pm("title","Link title"),Pm("target","Link target"),(e="link",{name:e,spec:Vm.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return P.none()}})})],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return P.some(km.getInfo(o))},onExecute:function(e){var t=af.getValue(e);km.applyInfo(o,t),n.restoreToolbar(),o.focus()}})]}];var e}),dg=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],mg=Ur([(fm=Tt(),dm=function(e,t){var n,o,r=t.event().originator(),i=t.event().target();return o=i,!(dn(n=r,e.element())&&!dn(n,o)&&(console.warn(Tt()+" did not get interpreted by the desired target. \nOriginator: "+Xn(r)+"\nTarget: "+Xn(i)+"\nCheck the "+Tt()+" event handlers"),1))},{key:fm,value:Dr({can:dm})})]),gg=Object.freeze({events:mg}),hg=b,vg=bi(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn","isConnected"]),pg=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+"\n"+Xn(t().element())+" is not in context.")}};return vg({debugInfo:U("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),isConnected:U(!1)})},bg=function(e,r){var i={};return ce(e,function(e,o){ce(e,function(e,t){var n=Ce(t,[])(i);i[t]=n.concat([r(o,e)])})}),i},yg=function(e,t){return 1<e.length?ie.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+Do(V(e,function(e){return e.name()}))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===e.length?ie.value({}):ie.value(e[0].modification().fold(function(){return{}},function(e){return Oe(t,e)}))},xg=function(a,u){return R(a,function(e,t){var n=t.modification().getOr({});return e.bind(function(i){var e=fe(n,function(e,t){return i[t]!==undefined?(n=u,o=t,r=a,ie.error("Mulitple behaviours have tried to change the _"+o+'_ "'+n+'". The guilty behaviours are: '+Do(W(r,function(e){return e.modification().getOr({})[o]!==undefined?[e.name()]:[]}),null,2)+". This is not currently supported.")):ie.value(Oe(t,e));var n,o,r});return Me(e,i)})},ie.value({})).map(function(e){return Oe(u,e)})},wg={classes:function(e,t){var n=W(e,function(e){return e.modification().getOr([])});return ie.value(Oe(t,n))},attributes:xg,styles:xg,domChildren:yg,defChildren:yg,innerHtml:yg,value:yg},kg=function(e,t){return n=f.apply(undefined,[e.handler].concat(t)),o=e.purpose(),{cHandler:n,purpose:U(o)};var n,o},Sg=function(e){return e.cHandler},Cg=function(e,t){return{name:U(e),handler:U(t)}},zg=function(e,t,n){var o,r,i=te(n,(o=e,r={},A(t,function(e){r[e.name()]=e.handlers(o)}),r));return bg(i,Cg)},Og=function(e){var t,i=z(t=e)?{can:U(!0),abort:U(!1),run:t}:t;return function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[e,t].concat(n);i.abort.apply(undefined,r)?t.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}},Tg=function(e,t,n){var o,r,i=t[n];return i?function(a,u,e,c){var t=e.slice(0);try{var n=t.sort(function(e,t){var n=e[u](),o=t[u](),r=c.indexOf(n),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+a+" does not have an entry for "+n+".\nOrder specified: "+Do(c,null,2));if(-1===i)throw new Error("The ordering for "+a+" does not have an entry for "+o+".\nOrder specified: "+Do(c,null,2));return r<i?-1:i<r?1:0});return ie.value(n)}catch(o){return ie.error([o])}}("Event: "+n,"name",e,i).map(function(e){var t=V(e,function(e){return e.handler()});return Rr(t)}):(o=n,r=e,ie.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+Do(V(r,function(e){return e.name()}),null,2)]))},Mg=function(e,i){var t=fe(e,function(o,r){return(1===o.length?ie.value(o[0].handler()):Tg(o,i,r)).map(function(e){var t=Og(e),n=1<o.length?B(i,function(t){return M(o,function(e){return e.name()===t})}).join(" > "):o[0].name();return Oe(r,{handler:t,purpose:U(n)})})});return Me(t,{})},Hg=function(e){return tr("custom.definition",jo([qo("dom","dom",To(),jo([gr("tag"),Or("styles",{}),Or("classes",[]),Or("attributes",{}),wr("value"),wr("innerHtml")])),gr("components"),gr("uid"),Or("events",{}),Or("apis",U({})),qo("eventOrder","eventOrder",(t={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"],mousedown:["focusing","alloy.base.behaviour","item-type-events"]},zo.mergeWithThunk(U(t))),cr()),wr("domModification"),pa("originalSpec"),Or("debug.sketcher","unknown")]),e);var t},Eg=function(t,e){A(e,function(e){Pi.add(t,e)})},Vg=function(t,e){A(e,function(e){Pi.remove(t,e)})},Ag=function(t){if(t.domChildren().isSome()&&t.defChildren().isSome())throw new Error("Cannot specify children and child specs! Must be one or the other.\nDef: "+(e=ui(t),Do(e,null,2)));return t.domChildren().fold(function(){var e=t.defChildren().getOr([]);return V(e,Dg)},function(e){return e});var e},Bg=function(e){var t=Yt.fromTag(e.tag());Un.setAll(t,e.attributes().getOr({})),Eg(t,e.classes().getOr([])),Ka.setAll(t,e.styles().getOr({})),En(t,e.innerHtml().getOr(""));var n=Ag(e);return zn(t,n),e.value().each(function(e){Am(t,e)}),bl(t,e.uid()),t},Dg=function(e){var t=ai(e);return Bg(t)},Rg=function(e,t){return n=e,r=V(o=t,function(e){return Cr(e.name(),[gr("config"),Or("state",yi)])}),i=tr("component.behaviours",Uo(r),n.behaviours).fold(function(e){throw new Error(ar(e)+"\nComplete spec:\n"+Do(n,null,2))},function(e){return e}),{list:o,data:se(i,function(e){var t=e().map(function(e){return{config:e.config(),state:e.state().init(e.config())}});return function(){return t}})};var n,o,r,i},Fg=function(e){var t,n,o=(t=ze(e,"behaviours").getOr({}),n=B(ae(t),function(e){return t[e]!==undefined}),V(n,function(e){return t[e].me}));return Rg(e,o)},Ig=bi(["getSystem","config","hasConfigured","spec","connect","disconnect","element","syncComponents","readState","components","events"]),_g=function(e,t,n){var o,r,i,a,u,c,s=(r={uid:(o=e).uid(),tag:o.dom().tag(),classes:o.dom().classes(),attributes:o.dom().attributes(),styles:o.dom().styles(),domChildren:V(o.components(),function(e){return e.element()})},ai(te(r,o.dom().innerHtml().map(function(e){return Oe("innerHtml",e)}).getOr({}),o.dom().value().map(function(e){return Oe("value",e)}).getOr({})))),l=function(t,e,n,o){var r=te({},e);A(n,function(e){r[e.name()]=e.exhibit(t,o)});var i=bg(r,function(e,t){return{name:function(){return e},modification:t}}),a=se(i,function(e,t){return W(e,function(t){return t.modification().fold(function(){return[]},function(e){return[t]})})}),u=fe(a,function(t,n){return ze(wg,n).fold(function(){return ie.error("Unknown field type: "+n)},function(e){return e(t,n)})});return Me(u,{}).map(ci)}(n,{"alloy.base.modification":(i=e,i.domModification().fold(function(){return ci({})},ci))},t,s).getOrDie();return u=l,c=te({uid:(a=s).uid(),tag:a.tag(),classes:u.classes().getOr([]).concat(a.classes().getOr([])),attributes:ne(a.attributes().getOr({}),u.attributes().getOr({})),styles:ne(a.styles().getOr({}),u.styles().getOr({}))},u.innerHtml().or(a.innerHtml()).map(function(e){return Oe("innerHtml",e)}).getOr({}),si("domChildren",u.domChildren(),a.domChildren()),si("defChildren",u.defChildren(),a.defChildren()),u.value().or(a.value()).map(function(e){return Oe("value",e)}).getOr({})),ai(c)},Lg=function(e,t,n){var o,r,i,a,u,c,s={"alloy.base.behaviour":(o=e,o.events())};return(r=n,i=e.eventOrder(),a=t,u=s,c=zg(r,a,u),Mg(c,i)).getOrDie()},Ng=function(e){var t,n,o,r,i,a,u,c,s,l,f,d,m,g,h=hg(e),v=(t=h,n=Ce("components",[])(t),V(n,Ug)),p=te(gg,h,Oe("components",v));return ie.value((o=p,i=Ee(pg(r=function(){return g})),a=or(Hg(te(o,{behaviours:undefined}))),u=Fg(o),c=u.list,s=u.data,l=_g(a,c,s),f=Bg(l),d=Lg(a,c,s),m=Ee(a.components()),g=Ig({getSystem:i.get,config:function(e){if(e===ml())return a.apis();if(x(e))throw new Error("Invalid input: only API constant is allowed");var t=s;return(z(t[e.name()])?t[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+Do(o,null,2))})()},hasConfigured:function(e){return z(s[e.name()])},spec:U(o),readState:function(e){return s[e]().map(function(e){return e.state.readState()}).getOr("not enabled")},connect:function(e){i.set(e)},disconnect:function(){i.set(pg(r))},element:U(f),syncComponents:function(){var e=yn.children(f),t=W(e,function(e){return i.get().getByDom(e).fold(function(){return[]},function(e){return[e]})});m.set(t)},components:m.get,events:U(d)})))},Pg=function(e){var t=Yt.fromText(e);return jg({element:t})},jg=function(e){var t=ir("external.component",jo([gr("element"),wr("uid")]),e),n=Ee(pg());t.uid().each(function(e){bl(t.element(),e)});var o=Ig({getSystem:n.get,config:P.none,hasConfigured:U(!1),connect:function(e){n.set(e)},disconnect:function(){n.set(pg(function(){return o}))},element:U(t.element()),spec:U(e),readState:U("No state"),syncComponents:N,components:U([]),events:U({})});return fl(o)},Ug=function(t){return(e=t,ze(e,sl)).fold(function(){var e=te({uid:xl("")},t);return Ng(e).getOrDie()},function(e){return e});var e},Wg=fl,Gg="alloy.item-hover",Xg="alloy.item-focus",Yg=function(e){(Zi(e.element()).isNone()||Ua.isFocused(e))&&(Ua.isFocused(e)||Ua.focus(e),ao(e,Gg,{item:e}))},$g=function(e){ao(e,Xg,{item:e})},qg=U(Gg),Kg=U(Xg),Jg=[gr("data"),gr("components"),gr("dom"),wr("toggling"),hs("itemBehaviours",[Aa,Ua,ds,af]),Or("ignoreFocus",!1),Or("domModification",{}),va("builder",function(e){return{dom:te(e.dom(),{attributes:{role:e.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:te(wi([e.toggling().fold(Aa.revoke,function(e){return Aa.config(te({aria:{mode:"checked"}},e))}),Ua.config({ignore:e.ignoreFocus(),stopMousedown:e.ignoreFocus(),onFocus:function(e){$g(e)}}),ds.config({mode:"execution"}),af.config({store:{mode:"memory",initialValue:e.data()}}),Om("item-type-events",[Xr(Bt(),uo),Jr(_e()),Xr(je(),Yg),Xr(Vt(),Ua.focus)])]),vs(e.itemBehaviours())),components:e.components(),domModification:e.domModification(),eventOrder:e.eventOrder()}}),Or("eventOrder",{})],Qg=[gr("dom"),gr("components"),va("builder",function(e){return{dom:e.dom(),components:e.components(),events:Ur([Qr(Vt())])}})],Zg=U([Ns({name:"widget",overrides:function(t){return{behaviours:wi([af.config({store:{mode:"manual",getValue:function(e){return t.data()},setValue:function(){}}})])}}})]),eh=[gr("uid"),gr("data"),gr("components"),gr("dom"),Or("autofocus",!1),Or("ignoreFocus",!1),hs("widgetBehaviours",[af,Ua,ds]),Or("domModification",{}),ul(Zg()),va("builder",function(n){var e=Qs(0,n,Zg()),t=Zs("item-widget",n,e.internals()),o=function(e){return el(e,n,"widget").map(function(e){return ds.focusIn(e),e})},r=function(e,t){return Uu(t.event().target())||n.autofocus()&&t.setSource(e.element()),P.none()};return te({dom:n.dom(),components:t,domModification:n.domModification(),events:Ur([oi(function(e,t){o(e).each(function(e){t.stop()})}),Xr(je(),Yg),Xr(Vt(),function(e,t){n.autofocus()?o(e):Ua.focus(e)})]),behaviours:te(wi([af.config({store:{mode:"memory",initialValue:n.data()}}),Ua.config({ignore:n.ignoreFocus(),onFocus:function(e){$g(e)}}),ds.config({mode:"special",focusIn:n.autofocus()?function(e){o(e)}:Oi(),onLeft:r,onRight:r,onEscape:function(e,t){return Ua.isFocused(e)||n.autofocus()?(n.autofocus()&&t.setSource(e.element()),P.none()):(Ua.focus(e),P.some(!0))}})]),vs(n.widgetBehaviours()))})})],th=ur("type",{widget:eh,item:Jg,separator:Qg}),nh=U([Us({factory:{sketch:function(e){var t=ir("menu.spec item",th,e);return t.builder()(t)}},name:"items",unit:"item",defaults:function(e,t){var n=xl("");return te({uid:n},t)},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus(),domModification:{classes:[e.markers().item()]}}}})]),oh=U([gr("value"),gr("items"),gr("dom"),gr("components"),Or("eventOrder",{}),ms("menuBehaviours",[Ru,af,Hm,ds]),Tr("movement",{mode:"menu",moveOnTab:!0},ur("mode",{grid:[ba(),va("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:e.focusManager()}})],matrix:[va("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector(),cell:"."+e.markers().item()},focusManager:e.focusManager()}}),gr("rowSelector")],menu:[Or("moveOnTab",!0),va("config",function(e,t){return{mode:"menu",selector:"."+e.markers().item(),moveOnTab:t.moveOnTab(),focusManager:e.focusManager()}})]})),ca(),Or("fakeFocus",!1),Or("focusManager",Iu()),da("onHighlight")]),rh=U("alloy.menu-focus"),ih=Tl({name:"Menu",configFields:oh(),partFields:nh(),factory:function(e,t,n,o){return te({dom:te(e.dom(),{attributes:{role:"menu"}}),uid:e.uid(),behaviours:te(wi([Ru.config({highlightClass:e.markers().selectedItem(),itemClass:e.markers().item(),onHighlight:e.onHighlight()}),af.config({store:{mode:"memory",initialValue:e.value()}}),Hm.config({find:P.some}),ds.config(e.movement().config()(e,e.movement()))]),gs(e.menuBehaviours())),events:Ur([Xr(Kg(),function(t,n){var e=n.event();t.getSystem().getByDom(e.target()).each(function(e){Ru.highlight(t,e),n.stop(),ao(t,rh(),{menu:t,item:e})})}),Xr(qg(),function(e,t){var n=t.event().item();Ru.highlight(e,n)})]),components:t,eventOrder:e.eventOrder()})}}),ah=function(e,t,n,o){var r=e.getSystem().build(o);bo(e,r,n)},uh=function(e,t,n,o){var r=ch(e,t);F(r,function(e){return dn(o.element(),e.element())}).each(xo)},ch=function(e,t){return e.components()},sh=function(t,n,e,o,r){var i=ch(t,n);return P.from(i[o]).map(function(e){return uh(t,n,0,e),r.each(function(e){ah(t,0,function(e,t){Sn.appendAt(e,t,o)},e)}),e})},lh=Object.freeze({append:function(e,t,n,o){ah(e,0,Sn.append,o)},prepend:function(e,t,n,o){ah(e,0,Sn.prepend,o)},remove:uh,replaceAt:sh,replaceBy:function(t,n,e,o,r){var i=ch(t,n);return I(i,o).bind(function(e){return sh(t,n,0,e,r)})},set:function(t,e,n,o){var r,i,a,u;wo(t),r=function(){var e=V(o,t.getSystem().build);A(e,function(e){po(t,e)})},i=t.element(),a=yn.owner(i),u=Qi(a).bind(function(t){var e=function(e){return dn(t,e)};return e(i)?P.some(i):Pr.descendant(i,e)}),r(i),u.each(function(t){Qi(a).filter(function(e){return dn(e,t)}).fold(function(){Ki(t)},N)})},contents:ch}),fh=Si({fields:[],name:"replacing",apis:lh}),dh=function(n,o,r,e){return ze(r,e).bind(function(e){return ze(n,e).bind(function(e){var t=dh(n,o,r,e);return P.some([e].concat(t))})}).getOr([])},mh=function(e,t){var n={};ce(e,function(e,t){A(e,function(e){n[e]=t})});var o=t,r=le(t,function(e,t){return{k:e,v:t}}),i=se(r,function(e,t){return[t].concat(dh(n,o,r,t))});return se(n,function(e){return ze(i,e).getOr([e])})},gh=function(){var i=Ee({}),a=Ee({}),u=Ee({}),c=Ee(P.none()),s=Ee({}),e=function(e){return ze(a.get(),e)};return{setContents:function(e,t,n,o){c.set(P.some(e)),i.set(n),a.set(t),s.set(o);var r=mh(o,n);u.set(r)},expand:function(n){return ze(i.get(),n).map(function(e){var t=ze(u.get(),n).getOr([]);return[e].concat(t)})},refresh:function(e){return ze(u.get(),e)},collapse:function(e){return ze(u.get(),e).bind(function(e){return 1<e.length?P.some(e.slice(1)):P.none()})},lookupMenu:e,otherMenus:function(e){var t=s.get();return $(ae(t),e)},getPrimary:function(){return c.get().bind(e)},getMenus:function(){return a.get()},clear:function(){i.set({}),a.set({}),u.set({}),c.set(P.none())},isClear:function(){return c.get().isNone()}}},hh=U("collapse-item"),vh=Ol({name:"TieredMenu",configFields:[ha("onExecute"),ha("onEscape"),ga("onOpenMenu"),ga("onOpenSubmenu"),da("onCollapseMenu"),Or("highlightImmediately",!0),br("data",[gr("primary"),gr("menus"),gr("expansions")]),Or("fakeFocus",!1),da("onHighlight"),da("onHover"),sa(),gr("dom"),Or("navigateOnHover",!0),Or("stayInDom",!1),ms("tmenuBehaviours",[ds,Ru,Hm,fh]),Or("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)}},factory:function(i,a){var u,e,c=gh(),n=function(e){var o,t,n=(o=e,t=i.data().menus(),se(t,function(e,t){var n=ih.sketch(te(e,{value:t,items:e.items,markers:we(a.markers,["item","selectedItem"]),fakeFocus:i.fakeFocus(),onHighlight:i.onHighlight(),focusManager:i.fakeFocus()?_u():Iu()}));return o.getSystem().build(n)})),r=l(e);return c.setContents(i.data().primary(),n,i.data().expansions(),r),c.getPrimary()},s=function(e){return af.getValue(e).value},l=function(e){return se(i.data().menus(),function(e,t){return W(e.items,function(e){return"separator"===e.type?[]:[e.data.value]})})},f=function(t,e){Ru.highlight(t,e),Ru.getHighlighted(e).orThunk(function(){return Ru.getFirst(e)}).each(function(e){co(t,e.element(),Vt())})},d=function(e,t){return Ve(V(t,e.lookupMenu))},m=function(t,e,n){var o=d(e,e.otherMenus(n));A(o,function(e){Vg(e.element(),[i.markers().backgroundMenu()]),i.stayInDom()||fh.remove(t,e)})},g=function(n,o,r){return P.from(r[0]).bind(o.lookupMenu).map(function(e){var t=d(o,r.slice(1));return A(t,function(e){Pi.add(e.element(),i.markers().backgroundMenu())}),go.inBody(e.element())||fh.append(n,Wg(e)),Vg(e.element(),[i.markers().backgroundMenu()]),f(n,e),m(n,o,r),e})};(e=u||(u={}))[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent";var h=function(n,o,r){void 0===r&&(r=u.HighlightSubmenu);var e=s(o);return c.expand(e).bind(function(t){return P.from(t[0]).bind(c.lookupMenu).bind(function(e){return go.inBody(e.element())||fh.append(n,Wg(e)),i.onOpenSubmenu()(n,o,e),r===u.HighlightSubmenu?(Ru.highlightFirst(e),g(n,c,t)):(Ru.dehighlightAll(e),P.some(o))})})},o=function(t,n){var e=s(n);return c.collapse(e).bind(function(e){return g(t,c,e).map(function(e){return i.onCollapseMenu()(t,n,e),e})})},t=function(n){return function(t,e){return du(e.getSource(),"."+i.markers().item()).bind(function(e){return t.getSystem().getByDom(e).toOption().bind(function(e){return n(t,e).map(function(){return!0})})})}},r=Ur([Xr(rh(),function(t,e){var n=e.event().menu();Ru.highlight(t,n);var o=s(e.event().item());c.refresh(o).each(function(e){return m(t,c,e)})}),oi(function(t,e){var n=e.event().target();t.getSystem().getByDom(n).each(function(e){0===s(e).indexOf("collapse-item")&&o(t,e),h(t,e,u.HighlightSubmenu).fold(function(){i.onExecute()(t,e)},function(){})})}),ei(function(t,e){n(t).each(function(e){fh.append(t,Wg(e)),i.onOpenMenu()(t,e),i.highlightImmediately()&&f(t,e)})})].concat(i.navigateOnHover()?[Xr(qg(),function(e,t){var n,o,r=t.event().item();n=e,o=s(r),c.refresh(o).bind(function(e){return g(n,c,e)}),h(e,r,u.HighlightParent),i.onHover()(e,r)})]:[])),v={collapseMenu:function(t){Ru.getHighlighted(t).each(function(e){Ru.getHighlighted(e).each(function(e){o(t,e)})})},highlightPrimary:function(t){c.getPrimary().each(function(e){f(t,e)})}};return{uid:i.uid(),dom:i.dom(),behaviours:te(wi([ds.config({mode:"special",onRight:t(function(e,t){return Uu(t.element())?P.none():h(e,t,u.HighlightSubmenu)}),onLeft:t(function(e,t){return Uu(t.element())?P.none():o(e,t)}),onEscape:t(function(e,t){return o(e,t).orThunk(function(){return i.onEscape()(e,t).map(function(){return e})})}),focusIn:function(t,e){c.getPrimary().each(function(e){co(t,e.element(),Vt())})}}),Ru.config({highlightClass:i.markers().selectedMenu(),itemClass:i.markers().menu()}),Hm.config({find:function(e){return Ru.getHighlighted(e)}}),fh.config({})]),gs(i.tmenuBehaviours())),eventOrder:i.eventOrder(),apis:v,events:r}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:Oe(e,t),expansions:{}}},collapseItem:function(e){return{value:oo(hh()),meta:{text:e}}}}}),ph=function(e,t,n,o){return ze(t.routes(),o.start()).map(u).bind(function(e){return ze(e,o.destination()).map(u)})},bh=function(e,t,n,o){return ph(0,t,0,o).bind(function(t){return t.transition().map(function(e){return{transition:U(e),route:U(t)}})})},yh=function(n,o,e){var t,r,i;(t=n,r=o,i=e,xh(t,r,i).bind(function(e){return bh(t,r,i,e)})).each(function(e){var t=e.transition();Pi.remove(n.element(),t.transitionClass()),Un.remove(n.element(),o.destinationAttr())})},xh=function(e,t,n){var o=e.element();return Un.has(o,t.destinationAttr())?P.some({start:U(Un.get(e.element(),t.stateAttr())),destination:U(Un.get(e.element(),t.destinationAttr()))}):P.none()},wh=function(e,t,n,o){yh(e,t,n),Un.has(e.element(),t.stateAttr())&&Un.get(e.element(),t.stateAttr())!==o&&t.onFinish()(e,o),Un.set(e.element(),t.stateAttr(),o)},kh=Object.freeze({findRoute:ph,disableTransition:yh,getCurrentRoute:xh,jumpTo:wh,progressTo:function(n,o,r,i){var e,t;t=o,Un.has((e=n).element(),t.destinationAttr())&&(Un.set(e.element(),t.stateAttr(),Un.get(e.element(),t.destinationAttr())),Un.remove(e.element(),t.destinationAttr()));var a,u,c=(a=o,u=i,{start:U(Un.get(n.element(),a.stateAttr())),destination:U(u)});bh(n,o,r,c).fold(function(){wh(n,o,r,i)},function(e){yh(n,o,r);var t=e.transition();Pi.add(n.element(),t.transitionClass()),Un.set(n.element(),o.destinationAttr(),i)})},getState:function(e,t,n){var o=e.element();return Un.has(o,t.stateAttr())?P.some(Un.get(o,t.stateAttr())):P.none()}}),Sh=Object.freeze({events:function(r,i){return Ur([Xr(Ke(),function(n,e){var o=e.event().raw();xh(n,r,i).each(function(t){ph(0,r,0,t).each(function(e){e.transition().each(function(e){o.propertyName===e.property()&&(wh(n,r,i,t.destination()),r.onTransition()(n,t))})})})}),ei(function(e,t){wh(e,r,i,r.initialState())})])}}),Ch=[Or("destinationAttr","data-transitioning-destination"),Or("stateAttr","data-transitioning-state"),gr("initialState"),da("onTransition"),da("onFinish"),hr("routes",Go(ie.value,Go(ie.value,jo([zr("transition",[gr("property"),gr("transitionClass")])]))))],zh=Si({fields:Ch,name:"transitioning",active:Sh,apis:kh,extra:{createRoutes:function(e){var o={};return ce(e,function(e,t){var n=t.split("<->");o[n[0]]=Oe(n[1],e),o[n[1]]=Oe(n[0],e)}),o},createBistate:function(e,t,n){return Te([{key:e,value:Oe(t,n)},{key:t,value:Oe(e,n)}])},createTristate:function(e,t,n,o){return Te([{key:e,value:Te([{key:t,value:o},{key:n,value:o}])},{key:t,value:Te([{key:e,value:o},{key:n,value:o}])},{key:n,value:Te([{key:e,value:o},{key:t,value:o}])}])}}}),Oh=Ia.resolve("scrollable"),Th={register:function(e){Pi.add(e,Oh)},deregister:function(e){Pi.remove(e,Oh)},scrollable:U(Oh)},Mh=function(e){return ze(e,"format").getOr(e.title)},Hh=function(e,t,n,o,r){return{data:{value:e,text:t},type:"item",dom:{tag:"div",classes:r?[Ia.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Ia.resolve("format-matches"),selected:n},itemBehaviours:wi(r?[]:[Ba(e,function(e,t){(t?Aa.on:Aa.off)(e)})]),components:[{dom:{tag:"div",attributes:{style:o},innerHtml:t}}]}},Eh=function(e,t,n,o){return{value:e,dom:{tag:"div"},components:[Ml.sketch({dom:{tag:"div",classes:[Ia.resolve("styles-collapser")]},components:o?[{dom:{tag:"span",classes:[Ia.resolve("styles-collapse-icon")]}},Pg(e)]:[Pg(e)],action:function(e){if(o){var t=n().get(e);vh.collapseMenu(t)}}}),{dom:{tag:"div",classes:[Ia.resolve("styles-menu-items-container")]},components:[ih.parts().items({})],behaviours:wi([Om("adhoc-scrollable-menu",[ei(function(e,t){Ka.set(e.element(),"overflow-y","auto"),Ka.set(e.element(),"-webkit-overflow-scrolling","touch"),Th.register(e.element())}),ti(function(e){Ka.remove(e.element(),"overflow-y"),Ka.remove(e.element(),"-webkit-overflow-scrolling"),Th.deregister(e.element())})])])}],items:t,menuBehaviours:wi([zh.config({initialState:"after",routes:zh.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Vh=function(o){var r,i,e,t,n,a=(r=o.formats,i=function(){return u},e=Eh("Styles",[].concat(V(r.items,function(e){return Hh(Mh(e),e.title,e.isSelected(),e.getPreview(),He(r.expansions,Mh(e)))})),i,!1),t=se(r.menus,function(e,t){var n=V(e,function(e){return Hh(Mh(e),e.title,e.isSelected!==undefined&&e.isSelected(),e.getPreview!==undefined?e.getPreview():"",He(r.expansions,Mh(e)))});return Eh(t,n,i,!0)}),n=te(t,Oe("styles",e)),{tmenu:vh.tieredData("styles",n,r.expansions)}),u=Jd(vh.sketch({dom:{tag:"div",classes:[Ia.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(e,t){var n=af.getValue(t);return o.handle(t,n.value),P.none()},onEscape:function(){return P.none()},onOpenMenu:function(e,t){var n=yf(e.element());bf(t.element(),n),zh.jumpTo(t,"current")},onOpenSubmenu:function(e,t,n){var o=yf(e.element()),r=lu(t.element(),'[role="menu"]').getOrDie("hacky"),i=e.getSystem().getByDom(r).getOrDie();bf(n.element(),o),zh.progressTo(i,"before"),zh.jumpTo(n,"after"),zh.progressTo(n,"current")},onCollapseMenu:function(e,t,n){var o=lu(t.element(),'[role="menu"]').getOrDie("hacky"),r=e.getSystem().getByDom(o).getOrDie();zh.progressTo(r,"after"),zh.progressTo(n,"current")},navigateOnHover:!1,highlightImmediately:!0,data:a.tmenu,markers:{backgroundMenu:Ia.resolve("styles-background-menu"),menu:Ia.resolve("styles-menu"),selectedMenu:Ia.resolve("styles-selected-menu"),item:Ia.resolve("styles-item"),selectedItem:Ia.resolve("styles-selected-item")}}));return u.asSpec()},Ah=function(e){return He(e,"items")?(n=te(ke(t=e,["items"]),{menu:!0}),o=Bh(t.items),{item:n,menus:te(o.menus,Oe(t.title,o.items)),expansions:te(o.expansions,Oe(t.title,t.title))}):{item:e,menus:{},expansions:{}};var t,n,o},Bh=function(e){return D(e,function(e,t){var n=Ah(t);return{menus:te(e.menus,n.menus),items:[n.item].concat(e.items),expansions:te(e.expansions,n.expansions)}},{menus:{},expansions:{},items:[]})},Dh={expand:Bh},Rh=function(a,e){var u=function(e){return function(){return a.formatter.match(e)}},c=function(e){return function(){return a.formatter.getCssText(e)}},t=ze(e,"style_formats").getOr(dg),s=function(e){return V(e,function(e){if(He(e,"items")){var t=s(e.items);return te(te(e,{isSelected:U(!1),getPreview:U("")}),{items:t})}return He(e,"format")?te(i=e,{isSelected:u(i.format),getPreview:c(i.format)}):(o=oo((n=e).title),r=te(n,{format:o,isSelected:u(o),getPreview:c(o)}),a.formatter.register(o,r),r);var n,o,r,i})};return s(t)},Fh=function(n,e,o){var t,r,i,a=(t=n,i=(r=function(e){return W(e,function(e){return e.items===undefined?!He(e,"format")||t.formatter.canApply(e.format)?[e]:[]:0<r(e.items).length?[e]:[]})})(e),Dh.expand(i));return Vh({formats:a,handle:function(e,t){n.undoManager.transact(function(){Aa.isOn(e)?n.formatter.remove(t):n.formatter.apply(t)}),o()}})},Ih=["undo","bold","italic","link","image","bullist","styleselect"],_h=function(e){var t=e.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]},Lh=function(e){return W(e,function(e){return S(e)?Lh(e):_h(e)})},Nh=function(e){var t=e.toolbar!==undefined?e.toolbar:Ih;return S(t)?Lh(t):_h(t)},Ph=function(o,r){var e=function(e){return function(){return Fl.forToolbarCommand(r,e)}},t=function(e){return function(){return Fl.forToolbarStateCommand(r,e)}},n=function(e,t,n){return function(){return Fl.forToolbarStateAction(r,e,t,n)}},i=e("undo"),a=e("redo"),u=t("bold"),c=t("italic"),s=t("underline"),l=e("removeformat"),f=n("unlink","link",function(){r.execCommand("unlink",null,!1)}),d=n("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),m=n("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),g=Rh(r,r.settings),h=function(){return Fh(r,g,function(){r.fire("scrollIntoView")})},v=function(e,t){return{isSupported:function(){return e.forall(function(e){return He(r.buttons,e)})},sketch:t}};return{undo:v(P.none(),i),redo:v(P.none(),a),bold:v(P.none(),u),italic:v(P.none(),c),underline:v(P.none(),s),removeformat:v(P.none(),l),link:v(P.none(),function(){return t=o,n=r,Fl.forToolbarStateAction(n,"link","link",function(){var e=fg(t,n);t.setContextToolbar(e),zm(n,function(){t.focusToolbar()}),km.query(n).each(function(e){n.selection.select(e.dom())})});var t,n}),unlink:v(P.none(),f),image:v(P.none(),function(){return hm(r)}),bullist:v(P.some("bullist"),d),numlist:v(P.some("numlist"),m),fontsizeselect:v(P.none(),function(){return t=r,e={onChange:function(e){$d.apply(t,e)},getInitialValue:function(){return $d.get(t)}},Pd(o,"font-size",function(){return Kd(e)});var t,e}),forecolor:v(P.none(),function(){return Ud(o,r)}),styleselect:v(P.none(),function(){return Fl.forToolbar("style-formats",function(e){r.fire("toReading"),o.dropup().appear(h,Aa.on,e)},wi([Aa.config({toggleClass:Ia.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),xa.config({channels:Te([Ra(na.orientationChanged(),Aa.off),Ra(na.dropupDismissed(),Aa.off)])})]))})}},jh=function(e,n){var t=Nh(e),o={};return W(t,function(e){var t=!He(o,e)&&He(n,e)&&n[e].isSupported()?[n[e].sketch()]:[];return o[e]=!0,t})},Uh=function(m,g){return function(e){if(m(e)){var t,n,o,r,i,a,u,c=Yt.fromDom(e.target),s=function(){e.stopPropagation()},l=function(){e.preventDefault()},f=h(l,s),d=(t=c,n=e.clientX,o=e.clientY,r=s,i=l,a=f,u=e,{target:U(t),x:U(n),y:U(o),stop:r,prevent:i,kill:a,raw:U(u)});g(d)}}},Wh=function(e,t,n,o,r){var i=Uh(n,o);return e.dom().addEventListener(t,i,r),{unbind:f(Gh,e,t,i,r)}},Gh=function(e,t,n,o){e.dom().removeEventListener(t,n,o)},Xh=function(e,t,n,o){return Wh(e,t,n,o,!1)},Yh=function(e,t,n,o){return Wh(e,t,n,o,!0)},$h=U(!0),qh=function(e,t,n){return Xh(e,t,$h,n)},Kh=function(e,t,n){return Yh(e,t,$h,n)},Jh=function(e){var t=e.matchMedia("(orientation: portrait)").matches;return{isPortrait:U(t)}},Qh=Jh,Zh=function(o,t){var e=Yt.fromDom(o),r=null,n=qh(e,"orientationchange",function(){clearInterval(r);var e=Jh(o);t.onChange(e),i(function(){t.onReady(e)})}),i=function(e){clearInterval(r);var t=o.innerHeight,n=0;r=setInterval(function(){t!==o.innerHeight?(clearInterval(r),e(P.some(o.innerHeight))):20<n&&(clearInterval(r),e(P.none())),n++},50)};return{onAdjustment:i,destroy:function(){n.unbind()}}},ev=function(e){var t=zt.detect().os.isiOS(),n=Jh(e).isPortrait();return t&&!n?e.screen.height:e.screen.width};function tv(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r=setTimeout(function(){n.apply(null,e),r=null},o)}}}var nv=function(e){var t=e.raw();return t.touches===undefined||1!==t.touches.length?P.none():P.some(t.touches[0])},ov=function(n){var a=Ee(P.none()),o=tv(function(e){a.set(P.none()),n.triggerEvent(Dt(),e)},400),r=Te([{key:De(),value:function(n){return nv(n).each(function(e){o.cancel();var t={x:U(e.clientX),y:U(e.clientY),target:n.target};o.schedule(n),a.set(P.some(t))}),P.none()}},{key:Re(),value:function(e){return o.cancel(),nv(e).each(function(i){a.get().each(function(e){var t,n,o,r;t=i,n=e,o=Math.abs(t.clientX-n.x()),r=Math.abs(t.clientY-n.y()),(5<o||5<r)&&a.set(P.none())})}),P.none()}},{key:Fe(),value:function(t){return o.cancel(),a.get().filter(function(e){return dn(e.target(),t.target())}).map(function(e){return n.triggerEvent(At(),t)})}}]);return{fireIfReady:function(t,e){return ze(r,e).bind(function(e){return e(t)})}}},rv=function(n){var t=ov({triggerEvent:function(e,t){n.onTapContent(t)}});return{fireTouchstart:function(e){t.fireIfReady(e,"touchstart")},onTouchend:function(){return qh(n.body(),"touchend",function(e){t.fireIfReady(e,"touchend")})},onTouchmove:function(){return qh(n.body(),"touchmove",function(e){t.fireIfReady(e,"touchmove")})}}},iv=6<=zt.detect().os.version.major,av=function(o,t,n){var r=rv(o),i=yn.owner(t),a=function(e){return!dn(e.start(),e.finish())||e.soffset()!==e.foffset()},e=function(){var e=o.doc().dom().hasFocus()&&o.getSelection().exists(a);n.getByDom(t).each(!0===(e||Qi(i).filter(function(e){return"input"===_n.name(e)}).exists(function(e){return e.dom().selectionStart!==e.dom().selectionEnd}))?Aa.on:Aa.off)},u=[qh(o.body(),"touchstart",function(e){o.onTouchContent(),r.fireTouchstart(e)}),r.onTouchmove(),r.onTouchend(),qh(t,"touchstart",function(e){o.onTouchToolstrip()}),o.onToReading(function(){Ji(o.body())}),o.onToEditing(N),o.onScrollToCursor(function(e){e.preventDefault(),o.getCursorBox().each(function(e){var t=o.win(),n=e.top()>t.innerHeight||e.bottom()>t.innerHeight?e.bottom()-t.innerHeight+50:0;0!==n&&t.scrollTo(t.pageXOffset,t.pageYOffset+n)})})].concat(!0===iv?[]:[qh(Yt.fromDom(o.win()),"blur",function(){n.getByDom(t).each(Aa.off)}),qh(i,"select",e),qh(o.doc(),"selectionchange",e)]);return{destroy:function(){A(u,function(e){e.unbind()})}}},uv=function(e,t){var n=parseInt(Un.get(e,t),10);return isNaN(n)?0:n},cv=function RB(n,o){var r=function(e){return n(e)?P.from(e.dom().nodeValue):P.none()},e=zt.detect().browser,t=e.isIE()&&10===e.version.major?function(e){try{return r(e)}catch(t){return P.none()}}:r;return{get:function(e){if(!n(e))throw new Error("Can only get "+o+" value of a "+o+" node");return t(e).getOr("")},getOption:t,set:function(e,t){if(!n(e))throw new Error("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}(_n.isText,"text"),sv=function(e){return cv.get(e)},lv=function(e){return cv.getOption(e)},fv=function(e){return"img"===_n.name(e)?1:lv(e).fold(function(){return yn.children(e).length},function(e){return e.length})},dv=fv,mv=me([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),gv={before:mv.before,on:mv.on,after:mv.after,cata:function(e,t,n,o){return e.fold(t,n,o)},getStart:function(e){return e.fold(b,b,b)}},hv=me([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vv=$t("start","soffset","finish","foffset"),pv={domRange:hv.domRange,relative:hv.relative,exact:hv.exact,exactFromRange:function(e){return hv.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:vv,getWin:function(e){var t=e.match({domRange:function(e){return Yt.fromDom(e.startContainer)},relative:function(e,t){return gv.getStart(e)},exact:function(e,t,n,o){return e}});return yn.defaultView(t)}},bv=function(e,t,n,o){var r=yn.owner(e).dom().createRange();return r.setStart(e.dom(),t),r.setEnd(n.dom(),o),r},yv=function(e,t,n,o){var r=bv(e,t,n,o),i=dn(e,n)&&t===o;return r.collapsed&&!i},xv=function(e,t){e.selectNodeContents(t.dom())},wv=function(e){e.deleteContents()},kv=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},Sv={create:function(e){return e.document.createRange()},replaceWith:function(e,t){wv(e),e.insertNode(t.dom())},selectNodeContents:function(e,t){var n=e.document.createRange();return xv(n,t),n},selectNodeContentsUsing:xv,relativeToNative:function(e,t,n){var o,r,i=e.document.createRange();return o=i,t.fold(function(e){o.setStartBefore(e.dom())},function(e,t){o.setStart(e.dom(),t)},function(e){o.setStartAfter(e.dom())}),r=i,n.fold(function(e){r.setEndBefore(e.dom())},function(e,t){r.setEnd(e.dom(),t)},function(e){r.setEndAfter(e.dom())}),i},exactToNative:function(e,t,n,o,r){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(o.dom(),r),i},deleteContents:wv,cloneFragment:function(e){var t=e.cloneContents();return Yt.fromDom(t)},getFirstRect:function(e){var t=e.getClientRects(),n=0<t.length?t[0]:e.getBoundingClientRect();return 0<n.width||0<n.height?P.some(n).map(kv):P.none()},getBounds:function(e){var t=e.getBoundingClientRect();return 0<t.width||0<t.height?P.some(t).map(kv):P.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<t.compareBoundaryPoints(e.START_TO_END,e)},toString:function(e){return e.toString()}},Cv=me([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zv=function(e,t,n){return t(Yt.fromDom(n.startContainer),n.startOffset,Yt.fromDom(n.endContainer),n.endOffset)},Ov=function(e,t){var r,n,o,i=(r=e,t.match({domRange:function(e){return{ltr:U(e),rtl:P.none}},relative:function(e,t){return{ltr:Ze(function(){return Sv.relativeToNative(r,e,t)}),rtl:Ze(function(){return P.some(Sv.relativeToNative(r,t,e))})}},exact:function(e,t,n,o){return{ltr:Ze(function(){return Sv.exactToNative(r,e,t,n,o)}),rtl:Ze(function(){return P.some(Sv.exactToNative(r,n,o,e,t))})}}}));return(o=(n=i).ltr()).collapsed?n.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Cv.rtl(Yt.fromDom(e.endContainer),e.endOffset,Yt.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return zv(0,Cv.ltr,o)}):zv(0,Cv.ltr,o)},Tv=(Cv.ltr,Cv.rtl,Ov),Mv=function(i,e){return Ov(i,e).match({ltr:function(e,t,n,o){var r=i.document.createRange();return r.setStart(e.dom(),t),r.setEnd(n.dom(),o),r},rtl:function(e,t,n,o){var r=i.document.createRange();return r.setStart(n.dom(),o),r.setEnd(e.dom(),t),r}})},Hv=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(e,t){var n=_n.name(e);return"input"===n?gv.after(e):M(["br","img"],n)?0===t?gv.before(e):gv.after(e):gv.on(e,t)}),Ev=function(e,t,n,o){var r=Hv(e,t),i=Hv(n,o);return pv.relative(r,i)},Vv=Ev,Av=function(e,t){P.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Bv=function(e,t,n,o,r){var i=Sv.exactToNative(e,t,n,o,r);Av(e,i)},Dv=function(f,e){return Tv(f,e).match({ltr:function(e,t,n,o){Bv(f,e,t,n,o)},rtl:function(e,t,n,o){var r,i,a,u,c,s=f.getSelection();if(s.setBaseAndExtent)s.setBaseAndExtent(e.dom(),t,n.dom(),o);else if(s.extend)try{i=e,a=t,u=n,c=o,(r=s).collapse(i.dom(),a),r.extend(u.dom(),c)}catch(l){Bv(f,n,o,e,t)}else Bv(f,n,o,e,t)}})},Rv=function(e){var t=Yt.fromDom(e.anchorNode),n=Yt.fromDom(e.focusNode);return yv(t,e.anchorOffset,n,e.focusOffset)?P.some(pv.range(Yt.fromDom(e.anchorNode),e.anchorOffset,Yt.fromDom(e.focusNode),e.focusOffset)):function(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return P.some(pv.range(Yt.fromDom(t.startContainer),t.startOffset,Yt.fromDom(n.endContainer),n.endOffset))}return P.none()}(e)},Fv=function(e){return P.from(e.getSelection()).filter(function(e){return 0<e.rangeCount}).bind(Rv)},Iv=function(e,t,n,o,r){var i=Vv(t,n,o,r);Dv(e,i)},_v=Fv,Lv=function(e){return Fv(e).map(function(e){return pv.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},Nv=function(e){e.getSelection().removeAllRanges()},Pv=function(e,t){var n=Mv(e,t);return Sv.getFirstRect(n)},jv=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:U(2),height:e.height}},Uv=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},Wv=function(e){var t=e.getSelection();return t!==undefined&&0<t.rangeCount?function(n){if(n.collapsed){var o=Yt.fromDom(n.startContainer);return yn.parent(o).bind(function(e){var t=pv.exact(o,n.startOffset,e,dv(e));return Pv(n.startContainer.ownerDocument.defaultView,t).map(jv).map(q)}).getOr([])}return V(n.getClientRects(),Uv)}(t.getRangeAt(0)):[]},Gv=function(e){e.focus();var t=Yt.fromDom(e.document.body);(Qi().exists(function(e){return M(["input","textarea"],_n.name(e))})?function(e){setTimeout(function(){e()},0)}:u)(function(){Qi().each(Ji),Ki(t)})},Xv="data-"+Ia.resolve("last-outer-height"),Yv=function(e,t){Un.set(e,Xv,t)},$v=function(e){return{top:U(e.top()),bottom:U(e.top()+e.height())}},qv=function(e,t){var n=uv(t,Xv),o=e.innerHeight;return o<n?P.some(n-o):P.none()},Kv=function(e,a){var t=Yt.fromDom(a.document.body),n=qh(Yt.fromDom(e),"resize",function(){qv(e,t).each(function(i){var e,t;(e=a,t=Wv(e),0<t.length?P.some(t[0]).map($v):P.none()).each(function(e){var t,n,o,r=(t=a,o=i,(n=e).top()>t.innerHeight||n.bottom()>t.innerHeight?Math.min(o,n.bottom()-t.innerHeight+50):0);0!==r&&a.scrollTo(a.pageXOffset,a.pageYOffset+r)})}),Yv(t,e.innerHeight)});return Yv(t,e.innerHeight),{toEditing:function(){Gv(a)},destroy:function(){n.unbind()}}},Jv=function(e){return P.some(Yt.fromDom(e.dom().contentWindow.document.body))},Qv=function(e){return P.some(Yt.fromDom(e.dom().contentWindow.document))},Zv=function(e){return P.from(e.dom().contentWindow)},ep=function(e){return Zv(e).bind(_v)},tp=function(e){return e.getFrame()},np=function(e,n){return function(t){return t[e].getOrThunk(function(){var e=tp(t);return function(){return n(e)}})()}},op=function(e,t,n,o){return e[n].getOrThunk(function(){return function(e){return qh(t,o,e)}})},rp=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},ip={getBody:np("getBody",Jv),getDoc:np("getDoc",Qv),getWin:np("getWin",Zv),getSelection:np("getSelection",ep),getFrame:tp,getActiveApi:function(u){var c=tp(u);return Jv(c).bind(function(a){return Qv(c).bind(function(i){return Zv(c).map(function(r){var e=Yt.fromDom(i.dom().documentElement),t=u.getCursorBox.getOrThunk(function(){return function(){return Lv(r).bind(function(e){return Pv(r,e).orThunk(function(){return _v(r).filter(function(e){return dn(e.start(),e.finish())&&e.soffset()===e.foffset()}).bind(function(e){var t=e.start().dom().getBoundingClientRect();return 0<t.width||0<t.height?P.some(t).map(rp):P.none()})})})}}),n=u.setSelection.getOrThunk(function(){return function(e,t,n,o){Iv(r,e,t,n,o)}}),o=u.clearSelection.getOrThunk(function(){return function(){Nv(r)}});return{body:U(a),doc:U(i),win:U(r),html:U(e),getSelection:f(ep,c),setSelection:n,clearSelection:o,frame:U(c),onKeyup:op(u,i,"onKeyup","keyup"),onNodeChanged:op(u,i,"onNodeChanged","selectionchange"),onDomChanged:u.onDomChanged,onScrollToCursor:u.onScrollToCursor,onScrollToElement:u.onScrollToElement,onToReading:u.onToReading,onToEditing:u.onToEditing,onToolbarScrollStart:u.onToolbarScrollStart,onTouchContent:u.onTouchContent,onTapContent:u.onTapContent,onTouchToolstrip:u.onTouchToolstrip,getCursorBox:t}})})})}},ap="data-ephox-mobile-fullscreen-style",up="position:absolute!important;",cp="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",sp=zt.detect().os.isAndroid(),lp=function(e,t){var n,o,r=function(o){return function(e){var t=Un.get(e,"style"),n=t===undefined?"no-styles":t.trim();n!==o&&(Un.set(e,ap,n),Un.set(e,"style",o))}},i=iu(e,"*"),a=W(i,function(e){return au(e,"*")}),u=(n=t,(o=Ka.get(n,"background-color"))!==undefined&&""!==o?"background-color:"+o+"!important":"background-color:rgb(255,255,255)!important;");A(a,r("display:none!important;")),A(i,r(up+cp+u)),r((!0===sp?"":up)+cp+u)(e)},fp=function(){var e=ru("["+ap+"]");A(e,function(e){var t=Un.get(e,ap);"no-styles"!==t?Un.set(e,"style",t):Un.remove(e,"style"),Un.remove(e,ap)})},dp=function(){var t=su("head").getOrDie(),e=su('meta[name="viewport"]').getOrThunk(function(){var e=Yt.fromTag("meta");return Un.set(e,"name","viewport"),Sn.append(t,e),e}),n=Un.get(e,"content");return{maximize:function(){Un.set(e,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){n!==undefined&&null!==n&&0<n.length?Un.set(e,"content",n):Un.set(e,"content","user-scalable=yes")}}},mp=function(t,e){var n=dp(),o=ig(),r=ig();return{enter:function(){e.hide(),Pi.add(t.container,Ia.resolve("fullscreen-maximized")),Pi.add(t.container,Ia.resolve("android-maximized")),n.maximize(),Pi.add(t.body,Ia.resolve("android-scroll-reload")),o.set(Kv(t.win,ip.getWin(t.editor).getOrDie("no"))),ip.getActiveApi(t.editor).each(function(e){lp(t.container,e.body()),r.set(av(e,t.toolstrip,t.alloy))})},exit:function(){n.restore(),e.show(),Pi.remove(t.container,Ia.resolve("fullscreen-maximized")),Pi.remove(t.container,Ia.resolve("android-maximized")),fp(),Pi.remove(t.body,Ia.resolve("android-scroll-reload")),r.clear(),o.clear()}}},gp=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,e),r=null},o)}}},hp=function(e,t){var n,o,r,i=Jd(Em.sketch({dom:Al('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:wi([Aa.config({toggleClass:Ia.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),a=(n=e,o=200,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===r&&(r=setTimeout(function(){n.apply(null,e),r=null},o))}});return Em.sketch({dom:Al('<div class="${prefix}-disabled-mask"></div>'),components:[Em.sketch({dom:Al('<div class="${prefix}-content-container"></div>'),components:[Ml.sketch({dom:Al('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(e){a.throttle()},buttonBehaviours:wi([Aa.config({toggleClass:Ia.resolve("mask-tap-icon-selected")})])})]})]})},vp=Uo([br("editor",[gr("getFrame"),wr("getBody"),wr("getDoc"),wr("getWin"),wr("getSelection"),wr("setSelection"),wr("clearSelection"),wr("cursorSaver"),wr("onKeyup"),wr("onNodeChanged"),wr("getCursorBox"),gr("onDomChanged"),Or("onTouchContent",N),Or("onTapContent",N),Or("onTouchToolstrip",N),Or("onScrollToCursor",U({unbind:N})),Or("onScrollToElement",U({unbind:N})),Or("onToEditing",U({unbind:N})),Or("onToReading",U({unbind:N})),Or("onToolbarScrollStart",b)]),gr("socket"),gr("toolstrip"),gr("dropup"),gr("toolbar"),gr("container"),gr("alloy"),Br("win",function(e){return yn.owner(e.socket).dom().defaultView}),Br("body",function(e){return Yt.fromDom(e.socket.dom().ownerDocument.body)}),Or("translate",b),Or("setReadOnly",N),Or("readOnlyOnInit",U(!0))]),pp=function(e){var t=rr("Getting AndroidWebapp schema",vp,e);Ka.set(t.toolstrip,"width","100%");var n=Ug(hp(function(){t.setReadOnly(t.readOnlyOnInit()),r.enter()},t.translate));t.alloy.add(n);var o={show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}};Sn.append(t.container,n.element());var r=mp(t,o);return{setReadOnly:t.setReadOnly,refreshStructure:N,enter:r.enter,exit:r.exit,destroy:N}},bp=U([Or("shell",!0),ms("toolbarBehaviours",[fh])]),yp=U([js({name:"groups",overrides:function(e){return{behaviours:wi([fh.config({})])}}})]),xp=Tl({name:"Toolbar",configFields:bp(),partFields:yp(),factory:function(t,e,n,o){var r=function(e){return t.shell()?P.some(e):el(e,t,"groups")},i=t.shell()?{behaviours:[fh.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid(),dom:t.dom(),components:i.components,behaviours:te(wi(i.behaviours),gs(t.toolbarBehaviours())),apis:{setGroups:function(e,t){r(e).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){fh.set(e,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),wp=U([gr("items"),la(["itemSelector"]),ms("tgroupBehaviours",[ds])]),kp=U([Us({name:"items",unit:"item"})]),Sp=Tl({name:"ToolbarGroup",configFields:wp(),partFields:kp(),factory:function(e,t,n,o){return te({dom:{attributes:{role:"toolbar"}}},{uid:e.uid(),dom:e.dom(),components:t,behaviours:te(wi([ds.config({mode:"flow",selector:e.markers().itemSelector()})]),gs(e.tgroupBehaviours())),"debug.sketcher":n["debug.sketcher"]})}}),Cp="data-"+Ia.resolve("horizontal-scroll"),zp=function(e){return"true"===Un.get(e,Cp)?0<(n=e).dom().scrollLeft||function(e){e.dom().scrollLeft=1;var t=0!==e.dom().scrollLeft;return e.dom().scrollLeft=0,t}(n):0<(t=e).dom().scrollTop||function(e){e.dom().scrollTop=1;var t=0!==e.dom().scrollTop;return e.dom().scrollTop=0,t}(t);var t,n},Op={exclusive:function(e,t){return qh(e,"touchmove",function(e){du(e.target(),t).filter(zp).fold(function(){e.raw().preventDefault()},N)})},markAsHorizontal:function(e){Un.set(e,Cp,"true")}};function Tp(){var t=function(e){var t=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:Al('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:wi([Om("adhoc-scrollable-toolbar",!0===e.scrollable?[ni(function(e,t){Ka.set(e.element(),"overflow-x","auto"),Op.markAsHorizontal(e.element()),Th.register(e.element())})]:[])]),components:[Em.sketch({components:[Sp.parts().items({})]})],markers:{itemSelector:"."+Ia.resolve("toolbar-group-item")},items:e.items}},n=Ug(xp.sketch({dom:Al('<div class="${prefix}-toolbar"></div>'),components:[xp.parts().groups({})],toolbarBehaviours:wi([Aa.config({toggleClass:Ia.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),ds.config({mode:"cyclic"})]),shell:!0})),e=Ug(Em.sketch({dom:{classes:[Ia.resolve("toolstrip")]},components:[Wg(n)],containerBehaviours:wi([Aa.config({toggleClass:Ia.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),o=function(){xp.setGroups(n,r.get()),Aa.off(n)},r=Ee([]);return{wrapper:U(e),toolbar:U(n),createGroups:function(e){return V(e,h(Sp.sketch,t))},setGroups:function(e){r.set(e),o()},setContextToolbar:function(e){Aa.on(n),xp.setGroups(n,e)},restoreToolbar:function(){Aa.isOn(n)&&o()},refresh:function(){},focus:function(){ds.focusIn(n)}}}var Mp=function(e,t){fh.append(e,Wg(t))},Hp=function(e,t){fh.remove(e,t)},Ep=function(e){return Ug(Ml.sketch({dom:Al('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){e.run(function(e){e.setReadOnly(!1)})}}))},Vp=function(){return Ug(Em.sketch({dom:Al('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:wi([fh.config({})])}))},Ap=function(e,t,n,o){(!0===n?Gi.toAlpha:Gi.toOmega)(o),(n?Mp:Hp)(e,t)},Bp=function(t,e){return e.getAnimationRoot().fold(function(){return t.element()},function(e){return e(t)})},Dp=function(e){return e.dimension().property()},Rp=function(e,t){return e.dimension().getDimension()(t)},Fp=function(e,t){var n=Bp(e,t);Vg(n,[t.shrinkingClass(),t.growingClass()])},Ip=function(e,t){Pi.remove(e.element(),t.openClass()),Pi.add(e.element(),t.closedClass()),Ka.set(e.element(),Dp(t),"0px"),Ka.reflow(e.element())},_p=function(e,t){Pi.remove(e.element(),t.closedClass()),Pi.add(e.element(),t.openClass()),Ka.remove(e.element(),Dp(t))},Lp=function(e,t,n,o){n.setCollapsed(),Ka.set(e.element(),Dp(t),Rp(t,e.element())),Ka.reflow(e.element()),Fp(e,t),Ip(e,t),t.onStartShrink()(e),t.onShrunk()(e)},Np=function(e,t,n,o){var r=o.getOrThunk(function(){return Rp(t,e.element())});n.setCollapsed(),Ka.set(e.element(),Dp(t),r),Ka.reflow(e.element());var i=Bp(e,t);Pi.add(i,t.shrinkingClass()),Ip(e,t),t.onStartShrink()(e)},Pp=function(e,t,n){var o=Rp(t,e.element());("0px"===o?Lp:Np)(e,t,n,P.some(o))},jp=function(e,t,n){_p(e,t);var o=Rp(t,e.element());Ip(e,t);var r=Bp(e,t);Pi.add(r,t.growingClass()),_p(e,t),Ka.set(e.element(),Dp(t),o),n.setExpanded(),t.onStartGrow()(e)},Up=function(e,t,n){var o=Bp(e,t);return!0===Pi.has(o,t.growingClass())},Wp=function(e,t,n){var o=Bp(e,t);return!0===Pi.has(o,t.shrinkingClass())},Gp=Object.freeze({grow:function(e,t,n){n.isExpanded()||jp(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&Pp(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&Lp(e,t,n,P.none())},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:Up,isShrinking:Wp,isTransitioning:function(e,t,n){return!0===Up(e,t)||!0===Wp(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?Pp:jp)(e,t,n)},disableTransitions:Fp}),Xp=Object.freeze({exhibit:function(e,t){var n=t.expanded();return ci(n?{classes:[t.openClass()],styles:{}}:{classes:[t.closedClass()],styles:Oe(t.dimension().property(),"0px")})},events:function(n,o){return Ur([Zr(Ke(),function(e,t){t.event().raw().propertyName===n.dimension().property()&&(Fp(e,n),o.isExpanded()&&Ka.remove(e.element(),n.dimension().property()),(o.isExpanded()?n.onGrown():n.onShrunk())(e))})])}}),Yp=[gr("closedClass"),gr("openClass"),gr("shrinkingClass"),gr("growingClass"),wr("getAnimationRoot"),da("onShrunk"),da("onStartShrink"),da("onGrown"),da("onStartGrow"),Or("expanded",!1),hr("dimension",ur("property",{width:[va("property","width"),va("getDimension",function(e){return yf(e)+"px"})],height:[va("property","height"),va("getDimension",function(e){return Za(e)+"px"})]}))],$p=Object.freeze({init:function(e){var t=Ee(e.expanded());return xi({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:f(t.set,!1),setExpanded:f(t.set,!0),readState:function(){return"expanded: "+t.get()}})}}),qp=Si({fields:Yp,name:"sliding",active:Xp,apis:Gp,state:$p}),Kp=function(t,n){var o=Ug(Em.sketch({dom:{tag:"div",classes:[Ia.resolve("dropup")]},components:[],containerBehaviours:wi([fh.config({}),qp.config({closedClass:Ia.resolve("dropup-closed"),openClass:Ia.resolve("dropup-open"),shrinkingClass:Ia.resolve("dropup-shrinking"),growingClass:Ia.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){t(),n(),fh.set(e,[])},onGrown:function(e){t(),n()}}),Da(function(e,t){r(N)})])})),r=function(e){window.requestAnimationFrame(function(){e(),qp.shrink(o)})};return{appear:function(e,t,n){!0===qp.hasShrunk(o)&&!1===qp.isTransitioning(o)&&window.requestAnimationFrame(function(){t(n),fh.set(o,[e()]),qp.grow(o)})},disappear:r,component:U(o),element:o.element}},Jp=zt.detect().browser.isFirefox(),Qp=jo([pr("triggerEvent"),pr("broadcastEvent"),Or("stopBackspace",!0)]),Zp=function(t,e){var n,o,r,i,a=rr("Getting GUI events settings",Qp,e),u=zt.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=ov(a),s=V(u.concat(["selectstart","input","contextmenu","change","paste","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return qh(t,e,function(t){c.fireIfReady(t,e).each(function(e){e&&t.kill()}),a.triggerEvent(e,t)&&t.kill()})}),l=qh(t,"keydown",function(e){var t;a.triggerEvent("keydown",e)?e.kill():!0!==a.stopBackspace||8!==(t=e).raw().which||M(["input","textarea"],_n.name(t.target()))||e.prevent()}),f=(n=t,o=function(e){a.triggerEvent("focusin",e)&&e.kill()},Jp?Kh(n,"focus",o):qh(n,"focusin",o)),d=(r=t,i=function(e){a.triggerEvent("focusout",e)&&e.kill(),setTimeout(function(){a.triggerEvent(Mt(),e)},0)},Jp?Kh(r,"blur",i):qh(r,"focusout",i)),m=yn.defaultView(t),g=qh(m,"scroll",function(e){a.broadcastEvent(_t(),e)&&e.kill()});return{unbind:function(){A(s,function(e){e.unbind()}),l.unbind(),f.unbind(),d.unbind(),g.unbind()}}},eb=function(e,t){var n=ze(e,"target").map(function(e){return e()}).getOr(t);return Ee(n)},tb=me([{stopped:[]},{resume:["element"]},{complete:[]}]),nb=function(e,o,t,n,r,i){var a,u,c,s,l=e(o,n),f=(a=t,u=r,c=Ee(!1),s=Ee(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:U(a),setSource:u.set,getSource:u.get});return l.fold(function(){return i.logEventNoHandlers(o,n),tb.complete()},function(t){var n=t.descHandler();return Sg(n)(f),f.isStopped()?(i.logEventStopped(o,t.element(),n.purpose()),tb.stopped()):f.isCut()?(i.logEventCut(o,t.element(),n.purpose()),tb.complete()):yn.parent(t.element()).fold(function(){return i.logNoParent(o,t.element(),n.purpose()),tb.complete()},function(e){return i.logEventResponse(o,t.element(),n.purpose()),tb.resume(e)})})},ob=function(t,n,o,e,r,i){return nb(t,n,o,e,r,i).fold(function(){return!0},function(e){return ob(t,n,o,e,r,i)},function(){return!1})},rb=function(e,t,n){var o,r,i=(o=t,r=Ee(!1),{stop:function(){r.set(!0)},cut:N,isStopped:r.get,isCut:U(!1),event:U(o),setSource:a("Cannot set source of a broadcasted event"),getSource:a("Cannot get source of a broadcasted event")});return A(e,function(e){var t=e.descHandler();Sg(t)(i)}),i.isStopped()},ib=function(e,t,n,o,r){var i=eb(n,o);return ob(e,t,n,o,i,r)},ab=$t("element","descHandler"),ub=function(e,t){return{id:U(e),descHandler:U(t)}};function cb(){var i={};return{registerId:function(o,r,e){ce(e,function(e,t){var n=i[t]!==undefined?i[t]:{};n[r]=kg(e,o),i[t]=n})},unregisterId:function(n){ce(i,function(e,t){e.hasOwnProperty(n)&&delete e[n]})},filterByType:function(e){return ze(i,e).map(function(e){return fe(e,function(e,t){return ub(t,e)})}).getOr([])},find:function(e,t,n){var r=Se(t)(i);return jr(n,function(e){return n=r,yl(o=e).fold(function(){return P.none()},function(e){var t=Se(e);return n.bind(t).map(function(e){return ab(o,e)})});var n,o},e)}}}function sb(){var o=cb(),r={},i=function(o){var e=o.element();return yl(e).fold(function(){return e="uid-",t=o.element(),n=oo(vl+e),bl(t,n),n;var e,t,n},function(e){return e})},a=function(e){yl(e.element()).each(function(e){r[e]=undefined,o.unregisterId(e)})};return{find:function(e,t,n){return o.find(e,t,n)},filter:function(e){return o.filterByType(e)},register:function(e){var t=i(e);He(r,t)&&function(e,t){var n=r[t];if(n!==e)throw new Error('The tagId "'+t+'" is already used by: '+Xn(n.element())+"\nCannot use it for: "+Xn(e.element())+"\nThe conflicting element is"+(go.inBody(n.element())?" ":" not ")+"already in the DOM");a(e)}(e,t);var n=[e];o.registerId(n,t,e.events()),r[t]=e},unregister:a,getById:function(e){return Se(e)(r)}}}var lb=function(n){var o=function(t){return yn.parent(n.element()).fold(function(){return!0},function(e){return dn(t,e)})},r=sb(),s=function(e,t){return r.find(o,e,t)},e=Zp(n.element(),{triggerEvent:function(a,u){return Qn(a,u.target(),function(e){return t=s,n=a,r=e,i=(o=u).target(),ib(t,n,o,i,r);var t,n,o,r,i})},broadcastEvent:function(e,t){var n=r.filter(e);return rb(n,t)}}),i=vg({debugInfo:U("real"),triggerEvent:function(t,n,o){Qn(t,n,function(e){ib(s,t,o,n,e)})},triggerFocus:function(u,c){yl(u).fold(function(){Ki(u)},function(e){Qn(Tt(),u,function(e){var t,n,o,r,i,a;t=s,n=Tt(),o={originator:U(c),kill:N,prevent:N,target:U(u)},i=e,a=eb(o,r=u),nb(t,n,o,r,a,i)})})},triggerEscape:function(e,t){i.triggerEvent("keydown",e.element(),t.event())},getByUid:function(e){return m(e)},getByDom:function(e){return g(e)},build:Ug,addToGui:function(e){u(e)},removeFromGui:function(e){c(e)},addToWorld:function(e){t(e)},removeFromWorld:function(e){a(e)},broadcast:function(e){f(e)},broadcastOn:function(e,t){d(e,t)},isConnected:U(!0)}),t=function(e){e.connect(i),_n.isText(e.element())||(r.register(e),A(e.components(),t),i.triggerEvent(It(),e.element(),{target:U(e.element())}))},a=function(e){_n.isText(e.element())||(A(e.components(),a),r.unregister(e)),e.disconnect()},u=function(e){po(n,e)},c=function(e){xo(e)},l=function(n){var e=r.filter(Ht());A(e,function(e){var t=e.descHandler();Sg(t)(n)})},f=function(e){l({universal:U(!0),data:U(e)})},d=function(e,t){l({universal:U(!1),channels:U(e),data:U(t)})},m=function(e){return r.getById(e).fold(function(){return ie.error(new Error('Could not find component with uid: "'+e+'" in system.'))},ie.value)},g=function(e){var t=yl(e).getOr("not found");return m(t)};return t(n),{root:U(n),element:n.element,destroy:function(){e.unbind(),Tn.remove(n.element())},add:u,remove:c,getByUid:m,getByDom:g,addToWorld:t,removeFromWorld:a,broadcast:f,broadcastOn:d}},fb=U(Ia.resolve("readonly-mode")),db=U(Ia.resolve("edit-mode"));function mb(e){var t=Ug(Em.sketch({dom:{classes:[Ia.resolve("outer-container")].concat(e.classes)},containerBehaviours:wi([Gi.config({alpha:fb(),omega:db()})])}));return lb(t)}var gb=function(e,t){var n=Yt.fromTag("input");Ka.setAll(n,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Sn.append(e,n),Ki(n),t(n),Tn.remove(n)},hb=function(e){var t=e.getSelection();if(0<t.rangeCount){var n=t.getRangeAt(0),o=e.document.createRange();o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),t.removeAllRanges(),t.addRange(o)}},vb=function(e,t){Qi().each(function(e){dn(e,t)||Ji(e)}),e.focus(),Ki(Yt.fromDom(e.document.body)),hb(e)},pb={stubborn:function(e,t,n,o){var r=function(){vb(t,o)},i=qh(n,"keydown",function(e){M(["input","textarea"],_n.name(e.target()))||r()});return{toReading:function(){gb(e,Ji)},toEditing:r,onToolbarTouch:function(){},destroy:function(){i.unbind()}}},timid:function(e,t,n,o){var r=function(){Ji(o)};return{toReading:function(){r()},toEditing:function(){vb(t,o)},onToolbarTouch:function(){r()},destroy:N}}},bb=function(n,o,r,i,e){var a=function(){o.run(function(e){e.refreshSelection()})},t=function(e,t){var n=e-i.dom().scrollTop;o.run(function(e){e.scrollIntoView(n,n+t)})},u=function(){o.run(function(e){e.clearSelection()})},c=function(){n.getCursorBox().each(function(e){t(e.top(),e.height())}),o.run(function(e){e.syncHeight()})},s=rv(n),l=gp(c,300),f=[n.onKeyup(function(){u(),l.throttle()}),n.onNodeChanged(a),n.onDomChanged(l.throttle),n.onDomChanged(a),n.onScrollToCursor(function(e){e.preventDefault(),l.throttle()}),n.onScrollToElement(function(e){e.element(),t(o,i)}),n.onToEditing(function(){o.run(function(e){e.toEditing()})}),n.onToReading(function(){o.run(function(e){e.toReading()})}),qh(n.doc(),"touchend",function(e){dn(n.html(),e.target())||dn(n.body(),e.target())}),qh(r,"transitionend",function(e){var t;"height"===e.raw().propertyName&&(t=Za(r),o.run(function(e){e.setViewportOffset(t)}),a(),c())}),Kh(r,"touchstart",function(e){var t;o.run(function(e){e.highlightSelection()}),t=e,o.run(function(e){e.onToolbarTouch(t)}),n.onTouchToolstrip()}),qh(n.body(),"touchstart",function(e){u(),n.onTouchContent(),s.fireTouchstart(e)}),s.onTouchmove(),s.onTouchend(),qh(n.body(),"click",function(e){e.kill()}),qh(r,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){A(f,function(e){e.unbind()})}}},yb=function(e){var n=P.none(),t=[],o=function(e){r()?a(e):t.push(e)},r=function(){return n.isSome()},i=function(e){A(e,a)},a=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){n=P.some(e),i(t),t=[]}),{get:o,map:function(n){return yb(function(t){o(function(e){t(n(e))})})},isReady:r}},xb={nu:yb,pure:function(t){return yb(function(e){e(t)})}},wb=function(t){var e=function(e){var o;t((o=e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;setTimeout(function(){o.apply(n,e)},0)}))},n=function(){return xb.nu(e)};return{map:function(o){return wb(function(n){e(function(e){var t=o(e);n(t)})})},bind:function(n){return wb(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return wb(function(t){e(function(e){n.get(t)})})},toLazy:n,toCached:function(){var t=null;return wb(function(e){null===t&&(t=n()),t.get(e)})},get:e}},kb={nu:wb,pure:function(t){return wb(function(e){e(t)})}},Sb=function(e,t,n){return Math.abs(e-t)<=n?P.none():e<t?P.some(e+n):P.some(e-n)},Cb=function(){var s=null;return{animate:function(o,r,e,i,t,n){var a=!1,u=function(e){a=!0,t(e)};clearInterval(s);var c=function(e){clearInterval(s),u(e)};s=setInterval(function(){var n=o();Sb(n,r,e).fold(function(){clearInterval(s),u(r)},function(e){if(i(e,c),!a){var t=o();(t!==e||Math.abs(t-r)>Math.abs(n-r))&&(clearInterval(s),u(r))}})},n)}}},zb=function(t,n){return Ae([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(e){return t<=e.width&&n<=e.height?P.some(e.keyboard):P.none()}).getOr({portrait:n/5,landscape:t/4})},Ob=function(e){var t,n=Qh(e).isPortrait(),o=zb((t=e).screen.width,t.screen.height),r=n?o.portrait:o.landscape;return(n?e.screen.height:e.screen.width)-e.innerHeight>r?0:r},Tb=function(e,t){var n=yn.owner(e).dom().defaultView;return Za(e)+Za(t)-Ob(n)},Mb=Tb,Hb=function(e,t,n){var o=Tb(t,n),r=Za(t)+Za(n)-o;Ka.set(e,"padding-bottom",r+"px")},Eb=me([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),Vb="data-"+Ia.resolve("position-y-fixed"),Ab="data-"+Ia.resolve("y-property"),Bb="data-"+Ia.resolve("scrolling"),Db="data-"+Ia.resolve("last-window-height"),Rb=function(e){return uv(e,Vb)},Fb=function(e,t){var n=Un.get(e,Ab);return Eb.fixed(e,n,t)},Ib=function(e,t){return Eb.scroller(e,t)},_b=function(e){var t=Rb(e);return("true"===Un.get(e,Bb)?Ib:Fb)(e,t)},Lb=function(e,t,n){var o=yn.owner(e).dom().defaultView.innerHeight;return Un.set(e,Db,o+"px"),o-t-n},Nb=function(e){var t=uu(e,"["+Vb+"]");return V(t,_b)},Pb=function(o,r,i,a){var e,t,n,u,c,s,l,f,d=yn.owner(o).dom().defaultView,m=(f=Un.get(l=i,"style"),Ka.setAll(l,{position:"absolute",top:"0px"}),Un.set(l,Vb,"0px"),Un.set(l,Ab,"top"),{restore:function(){Un.set(l,"style",f||""),Un.remove(l,Vb),Un.remove(l,Ab)}}),g=Za(i),h=Za(a),v=Lb(o,g,h),p=(n=g,u=v,s=Un.get(c=o,"style"),Th.register(c),Ka.setAll(c,{position:"absolute",height:u+"px",width:"100%",top:n+"px"}),Un.set(c,Vb,n+"px"),Un.set(c,Bb,"true"),Un.set(c,Ab,"top"),{restore:function(){Th.deregister(c),Un.set(c,"style",s||""),Un.remove(c,Vb),Un.remove(c,Bb),Un.remove(c,Ab)}}),b=(t=Un.get(e=a,"style"),Ka.setAll(e,{position:"absolute",bottom:"0px"}),Un.set(e,Vb,"0px"),Un.set(e,Ab,"bottom"),{restore:function(){Un.set(e,"style",t||""),Un.remove(e,Vb),Un.remove(e,Ab)}}),y=!0,x=function(){var e=d.innerHeight;return uv(o,Db)<e},w=function(){if(y){var e=Za(i),t=Za(a),n=Lb(o,e,t);Un.set(o,Vb,e+"px"),Ka.set(o,"height",n+"px"),Ka.set(a,"bottom",-(e+n+t)+"px"),Hb(r,o,a)}};return Hb(r,o,a),{setViewportOffset:function(e){Un.set(o,Vb,e+"px"),w()},isExpanding:x,isShrinking:k(x),refresh:w,restore:function(){y=!1,m.restore(),p.restore(),b.restore()}}},jb=Rb,Ub=Cb(),Wb="data-"+Ia.resolve("last-scroll-top"),Gb=function(e){var t=Ka.getRaw(e,"top").getOr("0");return parseInt(t,10)},Xb=function(e){return parseInt(e.dom().scrollTop,10)},Yb=function(e,t){var n=t+jb(e)+"px";Ka.set(e,"top",n)},$b=function(n,o,r){return kb.nu(function(e){var t=f(Xb,n);Ub.animate(t,o,15,function(e){n.dom().scrollTop=e,Ka.set(n,"top",Gb(n)+15+"px")},function(){n.dom().scrollTop=o,Ka.set(n,"top",r+"px"),e(o)},10)})},qb=function(r,i){return kb.nu(function(e){var t=f(Xb,r);Un.set(r,Wb,t());var n=Math.abs(i-t()),o=Math.ceil(n/10);Ub.animate(t,i,o,function(e,t){uv(r,Wb)!==r.dom().scrollTop?t(r.dom().scrollTop):(r.dom().scrollTop=e,Un.set(r,Wb,e))},function(){r.dom().scrollTop=i,Un.set(r,Wb,i),e(i)},10)})},Kb=function(i,a){return kb.nu(function(e){var t=f(Gb,i),n=function(e){Ka.set(i,"top",e+"px")},o=Math.abs(a-t()),r=Math.ceil(o/10);Ub.animate(t,a,r,n,function(){n(a),e(a)},10)})},Jb=function(t,n,o){var r=yn.owner(t).dom().defaultView;return kb.nu(function(e){Yb(t,o),Yb(n,o),r.scrollTo(0,o),e(o)})},Qb=function(e,t,n,o,r){var i=Mb(t,n),a=f(hb,e);i<o||i<r?qb(t,t.dom().scrollTop-i+r).get(a):o<0&&qb(t,t.dom().scrollTop+o).get(a)},Zb=function(a,e){return e(function(o){var r=[],i=0;0===a.length?o([]):A(a,function(e,t){var n;e.get((n=t,function(e){r[n]=e,++i>=a.length&&o(r)}))})})},ey=function(e,c){return e.fold(function(e,t,n){return o=e,r=t,a=c+(i=n),Ka.set(o,r,a+"px"),kb.pure(i);var o,r,i,a},function(e,t){return n=e,r=c+(o=t),i=Ka.getRaw(n,"top").getOr(o),a=r-parseInt(i,10),u=n.dom().scrollTop+a,$b(n,u,r);var n,o,r,i,a,u})},ty=function(e,t){var n=Nb(e),o=V(n,function(e){return ey(e,t)});return Zb(o,kb.nu)},ny=function(t,n,e,o,r,i){var a=function s(n){var o=Ee(xb.pure({}));return{start:function(t){var e=xb.nu(function(e){return n(t).get(e)});o.set(e)},idle:function(e){o.get().get(function(){e()})}}}(function(e){return Jb(t,n,e)}),u=gp(function(){a.idle(function(){ty(e,o.pageYOffset).get(function(){var e;(e=Wv(i),P.from(e[0]).bind(function(e){var t=e.top()-n.dom().scrollTop;return t>o.innerHeight+5||t<-5?P.some({top:U(t),bottom:U(t+e.height())}):P.none()})).each(function(e){n.dom().scrollTop=n.dom().scrollTop+e.top()}),a.start(0),r.refresh()})})},1e3),c=qh(Yt.fromDom(o),"scroll",function(){o.pageYOffset<0||u.throttle()});return ty(e,o.pageYOffset).get(b),{unbind:c.unbind}},oy=function(e){var n=e.cWin(),t=e.ceBody(),o=e.socket(),r=e.toolstrip(),i=e.toolbar(),a=e.contentElement(),u=e.keyboardType(),c=e.outerWindow(),s=e.dropup(),l=Pb(o,t,r,s),f=u(e.outerBody(),n,go.body(),a,r,i),d=Zh(c,{onChange:N,onReady:l.refresh});d.onAdjustment(function(){l.refresh()});var m=qh(Yt.fromDom(c),"resize",function(){l.isExpanding()&&l.refresh()}),g=ny(r,o,e.outerBody(),c,l,n),h=function p(n,t){var e=n.document,o=Yt.fromTag("div");Pi.add(o,Ia.resolve("unfocused-selections")),Sn.append(Yt.fromDom(e.documentElement),o);var r=qh(o,"touchstart",function(e){e.prevent(),vb(n,t),a()}),i=function(e){var t=Yt.fromTag("span");return Eg(t,[Ia.resolve("layer-editor"),Ia.resolve("unfocused-selection")]),Ka.setAll(t,{left:e.left()+"px",top:e.top()+"px",width:e.width()+"px",height:e.height()+"px"}),t},a=function(){Tn.empty(o)};return{update:function(){a();var e=Wv(n),t=V(e,i);zn(o,t)},isActive:function(){return 0<yn.children(o).length},destroy:function(){r.unbind(),Tn.remove(o)},clear:a}}(n,a),v=function(){h.clear()};return{toEditing:function(){f.toEditing(),v()},toReading:function(){f.toReading()},onToolbarTouch:function(e){f.onToolbarTouch(e)},refreshSelection:function(){h.isActive()&&h.update()},clearSelection:v,highlightSelection:function(){h.update()},scrollIntoView:function(e,t){Qb(n,o,s,e,t)},updateToolbarPadding:N,setViewportOffset:function(e){l.setViewportOffset(e),Kb(o,e).get(b)},syncHeight:function(){Ka.set(a,"height",a.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:l.refresh,destroy:function(){l.restore(),d.destroy(),g.unbind(),m.unbind(),f.destroy(),h.destroy(),gb(go.body(),Ji)}}},ry=function(o,e){var r=dp(),i=ag(),a=ag(),u=ig(),c=ig();return{enter:function(){e.hide();var n=Yt.fromDom(document);ip.getActiveApi(o.editor).each(function(e){i.set({socketHeight:Ka.getRaw(o.socket,"height"),iframeHeight:Ka.getRaw(e.frame(),"height"),outerScroll:document.body.scrollTop}),a.set({exclusives:Op.exclusive(n,"."+Th.scrollable())}),Pi.add(o.container,Ia.resolve("fullscreen-maximized")),lp(o.container,e.body()),r.maximize(),Ka.set(o.socket,"overflow","scroll"),Ka.set(o.socket,"-webkit-overflow-scrolling","touch"),Ki(e.body());var t=en(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);u.set(oy(t({cWin:e.win(),ceBody:e.body(),socket:o.socket,toolstrip:o.toolstrip,toolbar:o.toolbar,dropup:o.dropup.element(),contentElement:e.frame(),cursor:N,outerBody:o.body,outerWindow:o.win,keyboardType:pb.stubborn,isScrolling:function(){return a.get().exists(function(e){return e.socket.isScrolling()})}}))),u.run(function(e){e.syncHeight()}),c.set(bb(e,u,o.toolstrip,o.socket,o.dropup))})},refreshStructure:function(){u.run(function(e){e.refreshStructure()})},exit:function(){r.restore(),c.clear(),u.clear(),e.show(),i.on(function(e){e.socketHeight.each(function(e){Ka.set(o.socket,"height",e)}),e.iframeHeight.each(function(e){Ka.set(o.editor.getFrame(),"height",e)}),document.body.scrollTop=e.scrollTop}),i.clear(),a.on(function(e){e.exclusives.unbind()}),a.clear(),Pi.remove(o.container,Ia.resolve("fullscreen-maximized")),fp(),Th.deregister(o.toolbar),Ka.remove(o.socket,"overflow"),Ka.remove(o.socket,"-webkit-overflow-scrolling"),Ji(o.editor.getFrame()),ip.getActiveApi(o.editor).each(function(e){e.clearSelection()})}}},iy=function(e){var t=rr("Getting IosWebapp schema",vp,e);Ka.set(t.toolstrip,"width","100%"),Ka.set(t.container,"position","relative");var n=Ug(hp(function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()},t.translate));t.alloy.add(n);var o=ry(t,{show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}});return{setReadOnly:t.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:N}},ay=tinymce.util.Tools.resolve("tinymce.EditorManager"),uy=function(e){var t=ze(e.settings,"skin_url").fold(function(){return ay.baseURL+"/skins/oxide"},function(e){return e});return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}},cy=function(e,t,n){e.system().broadcastOn([na.formatChanged()],{command:t,state:n})},sy=function(o,e){var t=ae(e.formatter.get());A(t,function(t){e.formatter.formatChanged(t,function(e){cy(o,t,e)})}),A(["ul","ol"],function(n){e.selection.selectorChanged(n,function(e,t){cy(o,n,e)})})},ly=(U(["x-small","small","medium","large","x-large"]),function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}),fy=U("toReading"),dy=U("toEditing"),my=function(m){return{getNotificationManagerImpl:function(){return{open:b,close:N,reposition:N,getArgs:b}},renderUI:function(e){var t=uy(m);0==(!1===m.settings.skin)?(m.contentCSS.push(t.content),ea.DOM.styleSheetLoader.load(t.ui,ly(m))):ly(m)();var n=function(){m.fire("scrollIntoView")},o=Yt.fromTag("div"),s=zt.detect().os.isAndroid()?function u(e){var t=mb({classes:[Ia.resolve("android-container")]}),n=Tp(),o=ig(),r=Ep(o),i=Vp(),a=Kp(N,e);return t.add(n.wrapper()),t.add(i),t.add(a.component()),{system:U(t),element:t.element,init:function(e){o.set(pp(e))},exit:function(){o.run(function(e){e.exit(),fh.remove(i,r)})},setToolbarGroups:function(e){var t=n.createGroups(e);n.setGroups(t)},setContextToolbar:function(e){var t=n.createGroups(e);n.setContextToolbar(t)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(e){Ap(i,r,e,t.root())},socket:U(i),dropup:U(a)}}(n):function c(e){var t=mb({classes:[Ia.resolve("ios-container")]}),n=Tp(),o=ig(),r=Ep(o),i=Vp(),a=Kp(function(){o.run(function(e){e.refreshStructure()})},e);return t.add(n.wrapper()),t.add(i),t.add(a.component()),{system:U(t),element:t.element,init:function(e){o.set(iy(e))},exit:function(){o.run(function(e){fh.remove(i,r),e.exit()})},setToolbarGroups:function(e){var t=n.createGroups(e);n.setGroups(t)},setContextToolbar:function(e){var t=n.createGroups(e);n.setContextToolbar(t)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(e){Ap(i,r,e,t.root())},socket:U(i),dropup:U(a)}}(n),r=Yt.fromDom(e.targetNode);Sn.after(r,o),ko(o,s.system());var i=e.targetNode.ownerDocument.defaultView,l=Zh(i,{onChange:function(){s.system().broadcastOn([na.orientationChanged()],{width:ev(i)})},onReady:N}),f=function(e,t,n,o){!1===o&&m.selection.collapse();var r=a(e,t,n);s.setToolbarGroups(!0===o?r.readOnly:r.main),m.setMode(!0===o?"readonly":"design"),m.fire(!0===o?fy():dy()),s.updateMode(o)},a=function(e,t,n){var o=e.get(),r={readOnly:o.backToMask.concat(t.get()),main:o.backToMask.concat(n.get())};return r},d=function(e,t){return m.on(e,t),{unbind:function(){m.off(e)}}};return m.on("init",function(){s.init({editor:{getFrame:function(){return Yt.fromDom(m.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:N}},onToReading:function(e){return d(fy(),e)},onToEditing:function(e){return d(dy(),e)},onScrollToCursor:function(t){return m.on("scrollIntoView",function(e){t(e)}),{unbind:function(){m.off("scrollIntoView"),l.destroy()}}},onTouchToolstrip:function(){n()},onTouchContent:function(){var e,t=Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolbar")));(e=t,Zi(e).bind(function(e){return s.system().getByDom(e).toOption()})).each(uo),s.restoreToolbar(),n()},onTapContent:function(e){var t=e.target();"img"===_n.name(t)?(m.selection.select(t.dom()),e.kill()):"a"===_n.name(t)&&s.system().getByDom(Yt.fromDom(m.editorContainer)).each(function(e){Gi.isAlpha(e)&&ta(t.dom())})}},container:Yt.fromDom(m.editorContainer),socket:Yt.fromDom(m.contentAreaContainer),toolstrip:Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolstrip"))),toolbar:Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolbar"))),dropup:s.dropup(),alloy:s.system(),translate:N,setReadOnly:function(e){f(c,u,a,e)},readOnlyOnInit:function(){return!1}});var n=function(){s.dropup().disappear(function(){s.system().broadcastOn([na.dropupDismissed()],{})})},e={label:"The first group",scrollable:!1,items:[Fl.forToolbar("back",function(){m.selection.collapse(),s.exit()},{})]},t={label:"Back to read only",scrollable:!1,items:[Fl.forToolbar("readonly-back",function(){f(c,u,a,!0)},{})]},o=Ph(s,m),r=jh(m.settings,o),i={label:"The extra group",scrollable:!1,items:[]},a=Ee([{label:"the action group",scrollable:!0,items:r},i]),u=Ee([{label:"The read only mode group",scrollable:!0,items:[]},i]),c=Ee({backToMask:[e],backToReadOnly:[t]});sy(s,m)}),{iframeContainer:s.socket().element().dom(),editorContainer:s.element().dom()}}}};ro.add("mobile",my);var gy=function(t,e){return(n=e,Pr.closest(n,function(e){if(!_n.isElement(e))return!1;var t=Un.get(e,"id");return t!==undefined&&-1<t.indexOf("aria-owns")}).bind(function(e){var t=Un.get(e,"id"),n=yn.owner(e);return fu(n,'[aria-owns="'+t+'"]')})).exists(function(e){return hy(t,e)});var n},hy=function(t,e){return Xi(e,function(e){return dn(e,t.element())},U(!1))||gy(t,e)},vy=Object.freeze({exhibit:function(e,t){return ci({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),py=function(e,t){var n=t||Yt.fromDom(document.documentElement);return Pr.ancestor(e,f(dn,n)).isSome()},by=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:_n.isDocument(e)?t.defaultView||t.parentWindow:null},yy=function(e,t){return e!==undefined?e:t!==undefined?t:0},xy=function(e){var t,n=e.dom(),o=n.ownerDocument,r=o.body,i=Yt.fromDom(o.documentElement);return r===n?cf(r.offsetLeft,r.offsetTop):py(e,i)?(t=n.getBoundingClientRect(),cf(t.left,t.top)):cf(0,0)},wy={absolute:function(e){var t=e.dom().ownerDocument,n=t.body,o=by(Yt.fromDom(t)),r=t.documentElement,i=yy(o.pageYOffset,r.scrollTop),a=yy(o.pageXOffset,r.scrollLeft),u=yy(r.clientTop,n.clientTop),c=yy(r.clientLeft,n.clientLeft);return xy(e).translate(a-c,i-u)},relative:function(e){var t=e.dom();return cf(t.offsetLeft,t.offsetTop)},viewport:xy},ky=(zt.detect().browser.isSafari(),function(e){var t=e!==undefined?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return cf(n,o)}),Sy=ky,Cy=en(["x","y","width","height","maxHeight","direction","classes","label","candidateYforTest"],[]),zy=$t("position","left","top","right","bottom"),Oy=me([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ty=Oy.southeast,My=Oy.southwest,Hy=Oy.northeast,Ey=Oy.northwest,Vy=Oy.south,Ay=Oy.north,By=Oy.east,Dy=Oy.west,Ry=$t("point","width","height"),Fy=$t("x","y","width","height"),Iy=function(e,t,n,o){return{x:U(e),y:U(t),width:U(n),height:U(o),right:U(e+n),bottom:U(t+o)}},_y=function(o,e){return o.view(e).fold(U([]),function(e){var t=o.owner(e),n=_y(o,t);return[e].concat(n)})},Ly=Object.freeze({view:function(e){return(e.dom()===document?P.none():P.from(e.dom().defaultView.frameElement)).map(Yt.fromDom)},owner:function(e){return yn.owner(e)}}),Ny=function(o){var e,t,n,r,i=Yt.fromDom(document),a=Sy(i);return(e=o,n=(t=Ly).owner(e),r=_y(t,n),P.some(r)).fold(f(wy.absolute,o),function(e){var t=wy.viewport(o),n=D(e,function(e,t){var n=wy.viewport(t);return{left:e.left+n.left(),top:e.top+n.top()}},{left:0,top:0});return cf(n.left+t.left()+a.left(),n.top+t.top()+a.top())})},Py=function(){var e=window.innerWidth,t=window.innerHeight,n=Yt.fromDom(document),o=Sy(n);return Iy(o.left(),o.top(),e,t)},jy=me([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Uy=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=t.x()-n,v=t.y()-o,p=r-(h+t.width()),b=i-(v+t.height()),y=P.some(h),x=P.some(v),w=P.some(p),k=P.some(b),S=P.none();return a=t.direction(),u=function(){return zy(e,y,x,S,S)},c=function(){return zy(e,S,x,w,S)},s=function(){return zy(e,y,S,S,k)},l=function(){return zy(e,S,S,w,k)},f=function(){return zy(e,y,x,S,S)},d=function(){return zy(e,y,S,S,k)},m=function(){return zy(e,y,x,S,S)},g=function(){return zy(e,S,x,w,S)},a.fold(u,c,s,l,f,d,m,g)},Wy=function(e,t){var n=f(Ny,t),o=e.fold(n,n,function(){var e=Sy();return Ny(t).translate(-e.left(),-e.top())}),r=xf(t),i=eu(t);return Iy(o.left(),o.top(),r,i)},Gy=(jy.none,jy.relative),Xy=jy.fixed,Yy=$t("anchorBox","origin"),$y=me([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),qy=function(e,I,_,L,N){var P=_.width(),j=_.height(),o=function(e,o,r,i){var t,n,a,u,c,s,l,f,d,m,g,h,v,p,b,y,x,w,k,S,C,z,O,T,M,H,E,V,A,B,D,R,F=e(I,_,L);return(n=P,a=j,u=N,d=(t=F).x(),m=t.y(),g=t.bubble().offset().left(),h=t.bubble().offset().top(),v=u.x(),p=u.y(),b=u.width(),y=u.height(),S=p<=(w=m+h),C=(k=v<=(x=d+g))&&S,z=x+n<=v+b&&w+a<=p+y,O=k?Math.min(n,v+b-x):Math.abs(v-(x+n)),T=S?Math.min(a,p+y-w):Math.abs(p-(w+a)),M=u.width()-n,H=Math.max(0,x),E=Math.min(H,M),A=U((V=S?w:w+(a-T))+T-p),B=U(p+y-V),c=t.direction(),l=s=B,f=A,D=c.fold(s,s,f,f,s,f,l,l),R=Cy({x:E,y:V,width:O,height:T,maxHeight:D,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:w}),C&&z?$y.fit(R):$y.nofit(R,O,T)).fold($y.fit,function(e,t,n){return r<t||i<n?$y.nofit(e,t,n):$y.nofit(o,r,i)})};return R(e,function(e,t){var n=f(o,t);return e.fold($y.fit,n)},$y.nofit(Cy({x:I.x(),y:I.y(),width:_.width(),height:_.height(),maxHeight:_.height(),direction:Ty(),classes:[],label:"none",candidateYforTest:I.y()}),-1,-1)).fold(b,b)},Ky=function(e,t,n,o){Ka.remove(t,"max-height");var r,i={width:U(xf(r=t)),height:U(eu(r))};return qy(o.preference(),e,i,n,o.bounds())},Jy=function(e,t,n){var o,r,i=function(e){return e+"px"},a=(o=n.origin(),r=t,o.fold(function(){return zy("absolute",P.some(r.x()),P.some(r.y()),P.none(),P.none())},function(e,t,n,o){return Uy("absolute",r,e,t,n,o)},function(e,t,n,o){return Uy("fixed",r,e,t,n,o)}));Ka.setOptions(e,{position:P.some(a.position()),left:a.left().map(i),top:a.top().map(i),right:a.right().map(i),bottom:a.bottom().map(i)})},Qy=function(e,t){tu(e,Math.floor(t))},Zy=U(function(e,t){Qy(e,t),Ka.setAll(e,{"overflow-x":"hidden","overflow-y":"auto"})}),ex=U(function(e,t){Qy(e,t)}),tx=en(["bounds","origin","preference","maxHeightFunction"],[]),nx=function(e,t,n,o,r,i){var a,u,c,s,l,f=(a=i,u="maxHeightFunction",c=Zy(),a[u]===undefined?c:a[u]),d=e.anchorBox(),m=e.origin(),g=tx({bounds:(s=m,l=r,l.fold(function(){return s.fold(Py,Py,Iy)},function(e){return s.fold(e,e,Iy)})),origin:m,preference:o,maxHeightFunction:f});ox(d,t,n,g)},ox=function(e,t,n,o){var r,i,a,u,c=Ky(e,t,n,o);Jy(t,c,o),r=t,i=c.classes(),Vg(r,i.off),Eg(r,i.on),a=t,u=c,o.maxHeightFunction()(a,u.maxHeight())},rx=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],ix=function(e,t,n){var r=function(e){return ze(n,e).getOr([])},o=function(e,t,n){var o=$(rx,n);return{offset:function(){return cf(e,t)},classesOn:function(){return W(n,r)},classesOff:function(){return W(o,r)}}};return{southeast:function(){return o(-e,t,["top","alignLeft"])},southwest:function(){return o(e,t,["top","alignRight"])},south:function(){return o(-e/2,t,["top","alignCentre"])},northeast:function(){return o(-e,-t,["bottom","alignLeft"])},northwest:function(){return o(e,-t,["bottom","alignRight"])},north:function(){return o(-e/2,-t,["bottom","alignCentre"])},east:function(){return o(e,-t/2,["valignCentre","left"])},west:function(){return o(-e,-t/2,["valignCentre","right"])}}},ax=function(){return ix(0,0,{})},ux=$t("x","y","bubble","direction","label"),cx=function(e){return e.x()},sx=function(e,t){return e.x()+e.width()-t.width()/2},lx=function(e,t){return e.x()+e.width()-t.width()},fx=function(e,t){return e.y()-t.height()},dx=function(e){return e.y()+e.height()},mx=function(e,t){return e.y()+e.height()-t.height()/2},gx=function(e,t,n){return ux(cx(e),dx(e),n.southeast(),Ty(),"layout-se")},hx=function(e,t,n){return ux(lx(e,t),dx(e),n.southwest(),My(),"layout-sw")},vx=function(e,t,n){return ux(cx(e),fx(e,t),n.northeast(),Hy(),"layout-ne")},px=function(e,t,n){return ux(lx(e,t),fx(e,t),n.northwest(),Ey(),"layout-nw")},bx=function(e,t,n){return ux(sx(e,t),fx(e,t),n.north(),Ay(),"layout-n")},yx=function(e,t,n){return ux(sx(e,t),dx(e),n.south(),Vy(),"layout-s")},xx=function(e,t,n){return ux((o=e).x()+o.width(),mx(e,t),n.east(),By(),"layout-e");var o},wx=function(e,t,n){return ux((o=t,e.x()-o.width()),mx(e,t),n.west(),Dy(),"layout-w");var o},kx=function(){return[gx,hx,vx,px,yx,bx,xx,wx]},Sx=function(){return[hx,gx,px,vx,yx,bx,xx,wx]},Cx=bi(["anchorBox","bubble","overrides","layouts","placer"]),zx=function(){return Cr("layouts",[gr("onLtr"),gr("onRtl")])},Ox=function(t,e,n,o){var r=e.layouts().map(function(e){return e.onLtr()(t)}).getOr(n),i=e.layouts().map(function(e){return e.onRtl()(t)}).getOr(o);return Qu(r,i)(t)},Tx=[gr("hotspot"),zx(),va("placement",function(e,t,n,o){var r=n.hotspot(),i=Wy(o,r.element()),a=Ox(e.element(),n,kx(),Sx());return P.some(Cx({anchorBox:U(i),bubble:U(ax()),overrides:U({}),layouts:U(a),placer:P.none}))})],Mx=[gr("x"),gr("y"),Or("height",0),Or("width",0),Or("bubble",ax()),zx(),va("placement",function(e,t,n,o){var r=Iy(n.x(),n.y(),n.width(),n.height()),i=Ox(e.element(),n,kx(),Sx());return P.some(Cx({anchorBox:U(r),bubble:n.bubble,overrides:U({}),layouts:U(i),placer:P.none}))})],Hx=me([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ex=function(e){return e.fold(function(e){return e},function(e,t,n){return e.translate(-t,-n)})},Vx=function(e){return e.fold(function(e){return e},function(e,t,n){return e})},Ax=function(e){return R(e,function(e,t){return e.translate(t.left(),t.top())},cf(0,0))},Bx=function(e){var t=V(e,Vx);return Ax(t)},Dx=Hx.screen,Rx=Hx.absolute,Fx=$t("element","offset"),Ix=function(e,t,n){var o,r,i,a=yn.owner(e.element()),u=Sy(a),c=(o=e,r=n,i=yn.defaultView(r.root()).dom(),P.from(i.frameElement).map(Yt.fromDom).filter(function(e){var t=yn.owner(e),n=yn.owner(o.element());return dn(t,n)}).map(wy.absolute)).getOr(u);return Rx(c,u.left(),u.top())},_x=$t("element","offset"),Lx=function(e,t){return _n.isText(e)?_x(e,t):function(e,t){var n=yn.children(e);if(0===n.length)return Fx(e,t);if(t<n.length)return Fx(n[t],0);var o=n[n.length-1],r=_n.isText(o)?sv(o).length:yn.children(o).length;return Fx(o,r)}(e,t)},Nx=function(e,t){return t.getSelection().getOrThunk(function(){return function(){return _v(e)}})().map(function(e){var t=Lx(e.start(),e.soffset()),n=Lx(e.finish(),e.foffset());return pv.range(t.element(),t.offset(),n.element(),n.offset())})},Px=[wr("getSelection"),gr("root"),wr("bubble"),zx(),Or("overrides",{}),Or("showAbove",!1),va("placement",function(s,e,l,f){var d=yn.defaultView(l.root()).dom(),m=Ix(s,0,l);return Nx(d,l).bind(function(e){return Pv(d,pv.exactFromRange(e)).orThunk(function(){var t=Yt.fromText("\ufeff");return Sn.before(e.start(),t),Pv(d,pv.exact(t,0,t,1)).map(function(e){return Tn.remove(t),e})}).map(function(e){var t=Dx(cf(Math.max(0,e.left()),Math.max(0,e.top())));return Ry(t,e.width(),e.height())})}).map(function(e){var t,n,o,r=[m,e.point()],i=(t=function(){return Bx(r)},n=function(){return Bx(r)},o=function(){return e=V(r,Ex),Ax(e);var e},f.fold(t,n,o)),a=Fy(i.left(),i.top(),e.width(),e.height()),u=Nx(d,l).bind(function(e){return _n.isElement(e.start())?P.some(e.start()):yn.parent(e.start())}).getOr(s.element()),c=Ox(u,l,l.showAbove()?[vx,px,gx,hx,bx,yx]:[gx,hx,vx,px,yx,yx],l.showAbove()?[px,vx,hx,gx,bx,yx]:[hx,gx,px,vx,yx,bx]);return Cx({anchorBox:U(a),bubble:U(l.bubble().getOr(ax())),overrides:l.overrides,layouts:U(c),placer:P.none})})})],jx=function(e){return e.x()+e.width()},Ux=function(e,t){return e.x()-t.width()},Wx=function(e,t){return e.y()-t.height()+e.height()},Gx=function(e){return e.y()},Xx=function(e,t,n){return ux(jx(e),Gx(e),n.southeast(),Ty(),"link-layout-se")},Yx=function(e,t,n){return ux(Ux(e,t),Gx(e),n.southwest(),My(),"link-layout-sw")},$x=function(e,t,n){return ux(jx(e),Wx(e,t),n.northeast(),Hy(),"link-layout-ne")},qx=function(e,t,n){return ux(Ux(e,t),Wx(e,t),n.northwest(),Ey(),"link-layout-nw")},Kx=[gr("item"),zx(),va("placement",function(e,t,n,o){var r=Wy(o,n.item().element()),i=Ox(e.element(),n,[Xx,Yx,$x,qx],[Yx,Xx,qx,$x]);return P.some(Cx({anchorBox:U(r),bubble:U(ax()),overrides:U({}),layouts:U(i),placer:P.none}))})],Jx=ur("anchor",{selection:Px,hotspot:Tx,submenu:Kx,makeshift:Mx}),Qx=function(e,t,n,o,r){var i,a=(i=n.anchorBox(),Yy(i,t));nx(a,r.element(),n.bubble(),n.layouts(),o.getBounds(),n.overrides())},Zx=Object.freeze({position:function(t,n,e,o,r){var i=ir("positioning anchor.info",Jx,o);Ka.set(r.element(),"position","fixed");var a=Ka.getRaw(r.element(),"visibility");Ka.set(r.element(),"visibility","hidden");var u,c,s,l=n.useFixed()?Xy(0,0,window.innerWidth,window.innerHeight):(u=t,c=wy.absolute(u.element()),s=u.element().dom().getBoundingClientRect(),Gy(c.left(),c.top(),s.width,s.height));i.placement()(t,n,i,l).each(function(e){e.placer().getOr(Qx)(t,l,e,n,r)}),a.fold(function(){Ka.remove(r.element(),"visibility")},function(e){Ka.set(r.element(),"visibility",e)}),Ka.getRaw(r.element(),"left").isNone()&&Ka.getRaw(r.element(),"top").isNone()&&Ka.getRaw(r.element(),"right").isNone()&&Ka.getRaw(r.element(),"bottom").isNone()&&Ka.getRaw(r.element(),"position").is("fixed")&&Ka.remove(r.element(),"position")},getMode:function(e,t,n){return t.useFixed()?"fixed":"absolute"}}),ew=[Or("useFixed",!1),wr("getBounds")],tw=Si({fields:ew,name:"positioning",active:vy,apis:Zx}),nw=function(e,t,n,o){var r=function(t,e,n,o){n.get().each(function(e){wo(t)});var r=e.getAttachPoint()();po(r,t);var i=t.getSystem().build(o);return po(t,i),n.set(i),i}(e,t,n,o);return t.onOpen()(e,r),r},ow=function(t,n,o){o.get().each(function(e){wo(t),xo(t),n.onClose()(t,e),o.clear()})},rw=function(e,t,n){return n.isOpen()},iw=function(e,t,n){var o,r,i,a,u=t.getAttachPoint()();Ka.set(e.element(),"position",tw.getMode(u)),o=e,r="visibility",i=t.cloakVisibilityAttr(),a="hidden",Ka.getRaw(o.element(),r).fold(function(){Un.remove(o.element(),i)},function(e){Un.set(o.element(),i,e)}),Ka.set(o.element(),r,a)},aw=function(e,t,n){var o;o=e.element(),H(["top","left","right","bottom"],function(e){return Ka.getRaw(o,e).isSome()})||Ka.remove(e.element(),"position"),function(e,t,n){if(Un.has(e.element(),n)){var o=Un.get(e.element(),n);Ka.set(e.element(),t,o)}else Ka.remove(e.element(),t)}(e,"visibility",t.cloakVisibilityAttr())},uw=Object.freeze({cloak:iw,decloak:aw,open:nw,openWhileCloaked:function(e,t,n,o,r){iw(e,t,n),nw(e,t,n,o),r(),aw(e,t,n)},close:ow,isOpen:rw,isPartOf:function(t,n,e,o){return rw(0,0,e)&&e.get().exists(function(e){return n.isPartOf()(t,e,o)})},getState:function(e,t,n){return n.get()}}),cw=Object.freeze({events:function(n,o){return Ur([Xr(Rt(),function(e,t){ow(e,n,o)})])}}),sw=[da("onOpen"),da("onClose"),gr("isPartOf"),gr("getAttachPoint"),Or("cloakVisibilityAttr","data-precloak-visibility")],lw=Object.freeze({init:function(){var t=Ee(P.none()),e=U("not-implemented");return xi({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(P.none())},set:function(e){t.set(P.some(e))},get:function(e){return t.get()}})}}),fw=Si({fields:sw,name:"sandboxing",active:cw,apis:uw,state:lw}),dw=U("dismiss.popups"),mw=U("mouse.released"),gw=jo([Or("isExtraPart",U(!1)),Cr("fireEventInstead",[Or("event",Pt())])]),hw=function(e){var t=vw(e);return xa.config(t)},vw=function(e){var n=rr("Dismissal",gw,e);return{channels:Oe(dw(),{schema:jo([gr("target")]),onReceive:function(t,e){fw.isOpen(t)&&(fw.isPartOf(t,e.target())||n.isExtraPart(t,e.target())||n.fireEventInstead.fold(function(){return fw.close(t)},function(e){return io(t,e.event)}))}})}},pw=Ol({name:"InlineView",configFields:[gr("lazySink"),da("onShow"),da("onHide"),ms("inlineBehaviours",[fw,xa]),Cr("fireDismissalEventInstead",[Or("event",Pt())]),Or("getRelated",P.none),Or("eventOrder",P.none)],factory:function(u,e){return te({uid:u.uid(),dom:u.dom(),behaviours:te(wi([fw.config({isPartOf:function(e,t,n){return hy(t,n)||(o=e,r=n,u.getRelated()(o).exists(function(e){return hy(e,r)}));var o,r},getAttachPoint:function(){return u.lazySink()().getOrDie()}}),hw(te({isExtraPart:U(!1)},u.fireDismissalEventInstead().map(function(e){return{fireEventInstead:{event:e.event()}}}).getOr({})))]),gs(u.inlineBehaviours())),eventOrder:u.eventOrder(),apis:{setContent:function(e,t){fw.open(e,t)},showAt:function(e,t,n){var o=u.lazySink()().getOrDie();fw.openWhileCloaked(e,n,function(){return tw.position(o,t,e)}),u.onShow()(e)},showMenuAt:function(e,t,n){var r,o,i,a=(r=u.lazySink(),o=t,i=n,vh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,onEscape:function(){return P.some(!0)},onExecute:function(){return P.some(!0)},onOpenMenu:function(e,t){tw.position(r().getOrDie(),o,t)},onOpenSubmenu:function(e,t,n){var o=r().getOrDie();tw.position(o,{anchor:"submenu",item:t},n)}}));fw.open(e,a),u.onShow()(e)},hide:function(e){fw.close(e),u.onHide()(e)},getContent:function(e){return fw.getState(e)},isOpen:fw.isOpen}})},apis:{showAt:function(e,t,n,o){e.showAt(t,n,o)},showMenuAt:function(e,t,n,o){e.showMenuAt(t,n,o)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)}}}),bw={"icon-accessibility-check":'<svg width="24" height="24"><g id="icon-accessibility-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-align-center":'<svg width="24" height="24"><g id="icon-align-center" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-justify":'<svg width="24" height="24"><g id="icon-align-justify" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-left":'<svg width="24" height="24"><g id="icon-align-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-right":'<svg width="24" height="24"><g id="icon-align-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-background-color":'<svg width="24" height="24"><g id="icon-background-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" opacity=".1" d="M3 3h18v16H3z"/><path id="color" d="M3 19h18v3H3z"/><path d="M8.7 17h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z" id="shape"/></g></svg>',"icon-bold":'<svg width="24" height="24"><g id="icon-bold" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" id="B"/></g></svg>',"icon-bookmark":'<svg width="24" height="24"><g id="icon-bookmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-border-width":'<svg width="24" height="24"><g id="icon-border-width" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z" id="shape"/></g></svg>',"icon-brightness":'<svg width="24" height="24"><g id="icon-brightness" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" id="shape"/></g></svg>',"icon-browse":'<svg width="24" height="24"><g id="icon-browse" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-cancel":'<svg width="24" height="24"><g id="icon-cancel" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-character-count":'<svg width="24" height="24"><g id="icon-character-count" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" id="shape"/></g></svg>',"icon-checkmark":'<svg width="24" height="24"><g id="icon-checkmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z" id="Shape-Copy" fill-rule="nonzero"/></g></svg>',"icon-chevron-down":'<svg width="10" height="10"><g id="icon-chevron-down" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-left":'<svg width="10" height="10"><g id="icon-chevron-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-right":'<svg width="10" height="10"><g id="icon-chevron-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-up":'<svg width="10" height="10"><g id="icon-chevron-up" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-close":'<svg width="24" height="24"><g id="icon-close" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z" id="shape"/></g></svg>',"icon-code-sample":'<svg width="24" height="26"><g id="icon-code-sample" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" id="shape"/></g></svg>',"icon-color-levels":'<svg width="24" height="24"><g id="icon-color-levels" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z" id="shape"/></g></svg>',"icon-color-picker":'<svg width="24" height="24"><g id="icon-color-picker" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-color-swatch":'<svg width="24" height="24"><g id="icon-color-swatch" stroke="none" stroke-width="1" fill-rule="evenodd"><rect id="Rectangle" x="3" y="3" width="18" height="18" rx="1"/></g></svg>',"icon-comment":'<svg width="24" height="24"><g id="icon-comment" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-contrast":'<svg width="24" height="24"><g id="icon-contrast" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z" id="shape"/></g></svg>',"icon-copy":'<svg width="24" height="24"><g id="icon-copy" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 2H5a2 2 0 0 0-2 2v13h2V4h12V2zm3 3.8a2 2 0 0 1 2 2V21c0 1-.9 1.9-2 1.9H9a2 2 0 0 1-2-2V7.8c0-1 .9-1.9 2-1.9h11zm0 15.3V7.7H9v13.4h11z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-crop":'<svg width="24" height="24"><g id="icon-crop" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" id="shape"/></g></svg>',"icon-cut":'<svg width="24" height="24"><g id="icon-cut" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z" id="shape"/></g></svg>',"icon-drag":'<svg width="24" height="24"><g id="icon-drag" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" id="shape"/></g></svg>',"icon-duplicate":'<svg width="24" height="24"><g id="icon-duplicate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 2H5a2 2 0 0 0-2 2v13h2V4h12V2zm3 3.8a2 2 0 0 1 2 2V21c0 1-.9 1.9-2 1.9H9a2 2 0 0 1-2-2V7.8c0-1 .9-1.9 2-1.9h11zm0 15.3V7.7H9v13.4h11zM17 16h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-edit-image":'<svg width="24" height="24"><g id="icon-edit-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h17v2h-3v4h-2v-4H6a2 2 0 0 1-2-2V7H1V5h3V1h2v16zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-embed":'<svg width="24" height="24"><g id="icon-embed" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-emoji":'<svg width="24" height="24"><g id="icon-emoji" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm3.5-9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm3.5 6.5c2.3 0 4.3-1.5 5.1-3.5H7c.8 2 2.8 3.5 5.1 3.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fill":'<svg width="24" height="26"><g id="icon-fill" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-horizontally":'<svg width="24" height="24"><g id="icon-flip-horizontally" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5a2 2 0 0 0-2 2zm16-2v2h2a2 2 0 0 0-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-vertically":'<svg width="24" height="24"><g id="icon-flip-vertically" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3 15h2v2H3v-2zm12 4h2v2h-2v-2zm4-16a2 2 0 0 1 2 2v4h-2V5H5v4H3V5c0-1.1.9-2 2-2h14zm2 16a2 2 0 0 1-2 2v-2h2zM1 11h22v2H1v-2zm6 8h2v2H7v-2zm12-4h2v2h-2v-2zm-8 4h2v2h-2v-2zm-8 0h2v2a2 2 0 0 1-2-2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-format-painter":'<svg width="24" height="24"><g id="icon-format-painter" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fullscreen":'<svg width="24" height="24"><g id="icon-fullscreen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.6 9.8l-1.4-1.4L17.6 5H15a1 1 0 0 1 0-2h5c.6 0 1 .4 1 1v5a1 1 0 0 1-2 0V6.4l-3.4 3.4zm0 4.4l3.4 3.4V15a1 1 0 0 1 2 0v5c0 .6-.4 1-1 1h-5a1 1 0 0 1 0-2h2.6l-3.4-3.4 1.4-1.4zm-5.8 1.4L6.4 19H9a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1v-5a1 1 0 0 1 2 0v2.6l3.4-3.4 1.4 1.4zM8.4 9.8L5 6.4V9a1 1 0 1 1-2 0V4c0-.6.4-1 1-1h5a1 1 0 1 1 0 2H6.4l3.4 3.4-1.4 1.4z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-gamma":'<svg width="24" height="24"><g id="icon-gamma" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-help":'<svg width="24" height="24"><g id="icon-help" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z" id="shape"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" id="Path-2" fill-rule="nonzero"/><circle id="Oval" cx="12" cy="16" r="1"/></g></svg>',"icon-highlight-bg-color":'<svg width="24" height="24"><g id="icon-highlight-bg-color" stroke="none" stroke-width="1" fill-rule="nonzero"><rect id="Rectangle-path" x="3" y="18" width="18" height="3" rx=".6"/><path d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zM12.8 9.2L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6" id="Shape"/></g></svg>',"icon-home":'<svg width="24" height="24"><g id="icon-home" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Shape" fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></g></svg>',"icon-horizontal-rule":'<svg width="24" height="24"><g id="icon-horizontal-rule" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="shape" d="M4 11h16v2H4z"/></g></svg>',"icon-image-options":'<svg width="24" height="24"><g id="icon-image-options" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-image":'<svg width="24" height="24"><g id="icon-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-indent":'<svg width="24" height="24"><g id="icon-indent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" id="Combined-Shape"/></g></svg>',"icon-indeterminate":'<svg width="24" height="24"><g id="icon-indeterminate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zM9 11a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H9z" id="Combined-Shape"/></g></svg>',"icon-info":'<svg width="24" height="24"><g id="icon-info" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" id="shape"/></g></svg>',"icon-insert-character":'<svg width="24" height="24"><g id="icon-insert-character" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z" id="shape"/></g></svg>',"icon-insert-time":'<svg width="24" height="24"><g id="icon-insert-time" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="clock" transform="translate(2 2)" fill-rule="nonzero"><path d="M17 0H3a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3zm-7 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z" id="Shape"/><path d="M13 10h-3V5a.5.5 0 0 0-1 0v6h4a.5.5 0 0 0 0-1z" id="Shape"/></g></g></svg>',"icon-invert":'<svg width="24" height="24"><g id="icon-invert" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z" id="shape"/></g></svg>',"icon-italic":'<svg width="24" height="24"><g id="icon-italic" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" id="I"/></g></svg>',"icon-line":'<svg width="24" height="24"><g id="icon-line" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.5 9.2L7.7 17H4.8v-2.8l7.9-7.9 2.8 2.9zm1-1l-2.8-2.9 1-1 .6-.3.6.3L17.6 6l.3.6-.3.6-1 1zm-11.8 10h14.6V20H4.7v-1.8z" id="shape"/></g></svg>',"icon-link":'<svg width="24" height="24"><g id="icon-link" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="link" transform="translate(3 3)" fill-rule="nonzero"><path d="M3.2 9.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4A1 1 0 1 1 11.4 8a2.9 2.9 0 0 1 0 4L6.6 17a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L8 7.3a1 1 0 0 0 0 1.4A1 1 0 1 1 6.6 10a2.9 2.9 0 0 1 0-4L11.4 1a3.9 3.9 0 0 1 5.5 5.5l-2 2z" id="Shape"/></g></g></svg>',"icon-list-bull-circle":'<svg width="48" height="48"><g id="icon-list-bull-circle" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval" fill-rule="nonzero"/><path d="M11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy" fill-rule="nonzero"/><path d="M11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy-2" fill-rule="nonzero"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-default":'<svg width="48" height="48"><g id="icon-list-bull-default" stroke="none" stroke-width="1" fill-rule="evenodd"><circle id="Oval" cx="11" cy="14" r="3"/><circle id="Oval-Copy" cx="11" cy="24" r="3"/><circle id="Oval-Copy-2" cx="11" cy="34" r="3"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-square":'<svg width="48" height="48"><g id="icon-list-bull-square" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" d="M8 11h6v6H8z"/><path id="Rectangle-Copy" d="M8 21h6v6H8z"/><path id="Rectangle-Copy-2" d="M8 31h6v6H8z"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-num-default":'<svg width="48" height="48"><g id="icon-list-num-default" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z" id="1.-2.-3."/></g></svg>',"icon-list-num-lower-alpha":'<svg width="48" height="48"><g id="icon-list-num-lower-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="a.-b.-c."/></g></svg>',"icon-list-num-lower-greek":'<svg width="48" height="48"><g id="icon-list-num-lower-greek" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="\u03b1.-\u03b2.-\u0194."/></g></svg>',"icon-list-num-lower-roman":'<svg width="48" height="48"><g id="icon-list-num-lower-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 21h1.5v5H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 31h1.5v5H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 21h1.5v5H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 31h1.5v5H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 31h1.5v5H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 11h1.5v5H12z"/><path id="Rectangle-Copy" fill-rule="nonzero" d="M12 19h1.5v1H12z"/><path id="Rectangle-Copy-8" fill-rule="nonzero" d="M12 29h1.5v1H12z"/><path id="Rectangle-Copy-3" fill-rule="nonzero" d="M9 19h1.5v1H9z"/><path id="Rectangle-Copy-9" fill-rule="nonzero" d="M9 29h1.5v1H9z"/><path id="Rectangle-Copy-11" fill-rule="nonzero" d="M6 29h1.5v1H6z"/><path id="Rectangle-Copy-5" fill-rule="nonzero" d="M12 9h1.5v1H12z"/></g></svg>',"icon-list-num-upper-alpha":'<svg width="48" height="48"><g id="icon-list-num-upper-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="A.-B.-C."/></g></svg>',"icon-list-num-upper-roman":'<svg width="48" height="48"><g id="icon-list-num-upper-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 20h1.5v7H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 30h1.5v7H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 20h1.5v7H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 30h1.5v7H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 30h1.5v7H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 10h1.5v7H12z"/></g></svg>',"icon-lock":'<svg width="24" height="24"><g id="icon-lock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" id="shape"/></g></svg>',"icon-ltr":'<svg width="24" height="24"><g id="icon-ltr" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" id="shape"/></g></svg>',"icon-new-document":'<svg width="24" height="24"><g id="icon-new-document" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.4 2H6a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6.6L15.4 2zM18 20H6V4h8v4h4v12z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-new-tab":'<svg width="24" height="24"><g id="icon-new-tab" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" id="shape"/></g></svg>',"icon-non-breaking":'<svg width="24" height="24"><g id="icon-non-breaking" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" id="shape"/></g></svg>',"icon-notice":'<svg width="24" height="24"><g id="icon-notice" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" id="shape"/></g></svg>',"icon-ordered-list":'<svg width="24" height="24"><g id="icon-ordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z" id="shape"/></g></svg>',"icon-orientation":'<svg width="24" height="24"><g id="icon-orientation" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-outdent":'<svg width="24" height="24"><g id="icon-outdent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z" id="Combined-Shape"/></g></svg>',"icon-page-break":'<svg width="24" height="24"><g id="icon-page-break" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2z" id="shape"/><path d="M7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1z" id="Combined-Shape"/><path d="M6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z" id="Combined-Shape-Copy"/></g></svg>',"icon-paragraph":'<svg width="24" height="24"><g id="icon-paragraph" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z" id="shape"/></g></svg>',"icon-paste-text":'<svg width="24" height="24"><g id="icon-paste-text" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-paste":'<svg width="24" height="24"><g id="icon-paste" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-plus":'<svg width="24" height="24"><g id="icon-plus" stroke="#000" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14" id="Shape"/></g></svg>',"icon-preferences":'<svg width="24" height="24"><g id="icon-preferences" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" id="Combined-Shape"/></g></svg>',"icon-preview":'<svg width="24" height="24"><g id="icon-preview" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-print":'<svg width="24" height="24"><g id="icon-print" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19 8H5a3 3 0 0 0-3 3v6h3v4h14v-4h3v-6a3 3 0 0 0-3-3zm-2 11H7v-5h10v5zm2-7a1 1 0 0 1-1-1c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1zm-1-9H6v4h12V3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-quote":'<svg width="24" height="24"><g id="icon-quote" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-redo":'<svg width="24" height="24"><g id="icon-redo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-reload":'<svg width="24" height="24"><g id="icon-reload" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="Group" transform="rotate(-45 13.2 13.2)" fill-rule="nonzero"><path d="M19.8 13.7l-2.4-4.2-.2-.2a1 1 0 0 0-1.5 0l-3.2 4a1 1 0 1 0 1.5 1.2l1.5-1.7a7.8 7.8 0 0 1-5.8 6c-2.5.6-5.1-.1-7-2a1 1 0 1 0-1.4 1.4 9.5 9.5 0 0 0 8.9 2.5 9.9 9.9 0 0 0 7.2-7.2l.7 1.2a1 1 0 1 0 1.7-1z" id="Shape" transform="matrix(-1 0 0 1 21 0)"/><path d="M13 9.4a1 1 0 0 0-1.4.1l-1.8 2a8 8 0 0 1 6-7.4c2.8-.5 5.6.4 7.5 2.4a1 1 0 0 0 1.5-1.3 9.5 9.5 0 0 0-9.3-3 10 10 0 0 0-7.5 8l-.6-1a1 1 0 0 0-1.7 1l2.6 4.3a1 1 0 0 0 1.6.1l3.2-3.8c.4-.4.3-1-.1-1.4z" id="Shape" transform="matrix(-1 0 0 1 30.6 0)"/></g></g></svg>',"icon-remove-formatting":'<svg width="24" height="24"><g id="icon-remove-formatting" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z" id="shape"/></g></svg>',"icon-remove":'<svg width="24" height="24"><g id="icon-remove" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 6h3a1 1 0 0 1 0 2h-1v11a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V8H4a1 1 0 1 1 0-2h3V5a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1zm-2 0V5c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v1h6zm2 2H7v11c0 .6.4 1 1 1h8c.6 0 1-.4 1-1V8zm-8 3a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0v-6zm4 0a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0v-6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-resize-handle":'<svg width="10" height="10"><g id="icon-resize-handle" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7z" id="Line"/><path d="M8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z" id="Line-2"/></g></svg>',"icon-resize":'<svg width="24" height="24"><g id="icon-resize" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z" id="shape"/></g></svg>',"icon-restore-draft":'<svg width="24" height="24"><g id="icon-restore-draft" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z" id="shape"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-left":'<svg width="24" height="24"><g id="icon-rotate-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-right":'<svg width="24" height="24"><g id="icon-rotate-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rtl":'<svg width="24" height="24"><g id="icon-rtl" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z" id="shape"/></g></svg>',"icon-save":'<svg width="24" height="24"><g id="icon-save" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-search":'<svg width="24" height="24"><g id="icon-search" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-select-all":'<svg width="24" height="24"><g id="icon-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-selected":'<svg width="24" height="24"><g id="icon-selected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm-2.4-6.1L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z" id="Combined-Shape"/></g></svg>',"icon-settings":'<svg width="24" height="24"><g id="icon-settings" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" id="shape"/></g></svg>',"icon-sharpen":'<svg width="24" height="24"><g id="icon-sharpen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" id="shape"/></g></svg>',"icon-sourcecode":'<svg width="24" height="24"><g id="icon-sourcecode" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M10.7 9.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2l-4.1 4.4c-.3.3-.8.3-1.2 0l-4.2-4.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L7 13l3.7-3.8z" id="Shape" transform="rotate(90 7 12)"/><path d="M20.7 9.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2l-4.1 4.4c-.3.3-.8.3-1.2 0l-4.2-4.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L17 13l3.7-3.8z" id="Shape-Copy" transform="matrix(0 1 1 0 5 -5)"/></g></svg>',"icon-spell-check":'<svg width="24" height="24"><g id="icon-spell-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" id="shape"/></g></svg>',"icon-strike-through":'<svg width="24" height="24"><g id="icon-strike-through" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.2 9.8c-.2-.5-.4-1-.4-1.7 0-.6.2-1.2.5-1.7.2-.5.6-1 1-1.3.5-.3 1.1-.6 1.8-.8a7.9 7.9 0 0 1 4.3 0 5 5 0 0 1 1.7 1c.5.4.9.9 1.1 1.4l.2.6a1 1 0 0 1-1 1.2h-1a1 1 0 0 1-1-.7v-.1c0-.3-.2-.5-.4-.7l-.8-.5-1-.1-1 .1-.8.4-.4.5-.2.7c0 .5.3.9.8 1.2l1.4.7H7.4l-.2-.3zM20 11H4a1 1 0 0 0 0 2h8.6l.6.2.8.5c.3.2.4.4.5.6V15.6l-.5.6-.7.3-1 .1h-1.2l-.9-.5a2 2 0 0 1-.7-1.2 1 1 0 0 0-1-.8h-1a1 1 0 0 0-1 1.2l.1.4a4.3 4.3 0 0 0 1.7 2.1c.3.3.8.5 1.2.7a7.8 7.8 0 0 0 5 .2c.6-.2 1.2-.4 1.7-.8a3.5 3.5 0 0 0 1.4-3 4 4 0 0 0-.5-1.9H20c.6 0 1-.4 1-1s-.4-1-1-1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-subscript":'<svg width="24" height="24"><g id="icon-subscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-superscript":'<svg width="24" height="24"><g id="icon-superscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-properties":'<svg width="24" height="24"><g id="icon-table-cell-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-cell-select-all":'<svg width="24" height="24"><g id="icon-table-cell-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-select-inner":'<svg width="24" height="24"><g id="icon-table-cell-select-inner" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z" id="Rectangle-5-Copy" opacity=".2"/><path d="M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z" id="Combined-Shape"/></g></svg>',"icon-table-delete-column":'<svg width="24" height="24"><g id="icon-table-delete-column" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 11.2l1 1v.2l-1 1v-2.2zm5 1l1-1v2.2l-1-1v-.2zM20 5v14H4V5h16zm-1 2h-4v.8l-.2-.2-.8.8V7h-4v1.4l-.8-.8-.2.2V7H5v11h4v-1.8l.5.5.5-.4V18h4v-1.8l.8.8.2-.3V18h4V7zm-3.9 3.4l-1.8 1.9 1.8 1.9c.4.3.4.9 0 1.2-.3.3-.8.3-1.2 0L12 13.5l-1.8 1.9a.8.8 0 0 1-1.2 0 .9.9 0 0 1 0-1.2l1.8-1.9-1.9-2a.9.9 0 0 1 1.2-1.2l2 2 1.8-1.8c.3-.4.9-.4 1.2 0a.8.8 0 0 1 0 1.1z" id="shape"/></g></svg>',"icon-table-delete-row":'<svg width="24" height="24"><g id="icon-table-delete-row" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.7 8.8l1.1 1.2-2.4 2.5L18 15l-1.2 1.2-2.5-2.5-2.4 2.5-1.3-1.2 2.5-2.5-2.5-2.5 1.2-1.3 2.6 2.6 2.4-2.5zM4 5h16v14H4V5zm15 5V7H5v3h4.8l1 1H5v3h5.8l-1 1H5v3h14v-3h-.4l-1-1H19v-3h-1.3l1-1h.3z" id="shape"/></g></svg>',"icon-table-delete-table":'<svg width="24" height="26"><g id="icon-table-delete-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 6h16v14H4V6zm1 2v11h14V8H5zm11.7 8.7l-1.5 1.5L12 15l-3.3 3.2-1.4-1.5 3.2-3.2-3.3-3.2 1.5-1.5L12 12l3.2-3.2 1.5 1.5-3.2 3.2 3.2 3.2z" id="shape"/></g></svg>',"icon-table-insert-column-after":'<svg width="24" height="24"><g id="icon-table-insert-column-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.3 9c.4 0 .7.3.7.6v2.2h2.1c.4 0 .7.3.7.7 0 .4-.3.7-.7.7H15v2.2c0 .3-.3.6-.7.6a.7.7 0 0 1-.6-.6v-2.2h-2.2a.7.7 0 0 1 0-1.4h2.2V9.6c0-.3.3-.6.6-.6zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z" id="shape"/></g></svg>',"icon-table-insert-column-before":'<svg width="24" height="24"><g id="icon-table-insert-column-before" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.7 16a.7.7 0 0 1-.7-.6v-2.2H6.9a.7.7 0 0 1 0-1.4H9V9.6c0-.3.3-.6.7-.6.3 0 .6.3.6.6v2.2h2.2c.4 0 .8.3.8.7 0 .4-.4.7-.8.7h-2.2v2.2c0 .3-.3.6-.6.6zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-insert-row-above":'<svg width="24" height="24"><g id="icon-table-insert-row-above" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.8 10.5c0 .3-.2.5-.5.5h-1.8v1.8c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.6V11H9.7a.5.5 0 0 1 0-1h1.8V8.3c0-.3.2-.6.5-.6s.5.3.5.6V10h1.8c.3 0 .5.2.5.5zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-4V7H5v7h14z" id="shape"/></g></svg>',"icon-table-insert-row-after":'<svg width="24" height="24"><g id="icon-table-insert-row-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.2 14.5c0-.3.2-.5.5-.5h1.8v-1.8c0-.3.2-.5.5-.5s.5.2.5.6V14h1.8c.3 0 .5.2.5.5s-.2.5-.5.5h-1.8v1.7c0 .3-.2.6-.5.6a.5.5 0 0 1-.5-.6V15H9.7a.5.5 0 0 1-.5-.5zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7H5v7h14zm0-8V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-left-header":'<svg width="24" height="24"><g id="icon-table-left-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z" id="shape"/></g></svg>',"icon-table-merge-cells":'<svg width="24" height="24"><g id="icon-table-merge-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z" id="shape"/></g></svg>',"icon-table-row-properties":'<svg width="24" height="24"><g id="icon-table-row-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-split-cells":'<svg width="24" height="24"><g id="icon-table-split-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.5 4.5l1.5 1.6c.3.2.3.7 0 1-.2.2-.7.2-1 0l-1.5-1.6-1.6 1.5c-.2.3-.7.3-1 0a.7.7 0 0 1 0-1l1.6-1.5-1.5-1.6a.7.7 0 0 1 1-1l1.5 1.6 1.6-1.5c.2-.3.7-.3 1 0 .2.2.2.7 0 1l-1.6 1.5z" id="shape"/></g></svg>',"icon-table-top-header":'<svg width="24" height="24"><g id="icon-table-top-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z" id="shape"/></g></svg>',"icon-table":'<svg width="24" height="24"><g id="icon-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-template":'<svg width="24" height="24"><g id="icon-template" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="stamp" transform="translate(3 3)" fill-rule="nonzero"><path d="M16 16v-1H2v1h14zM6 13V9a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H0v-3c0-1.1.9-2 2-2h4zm4 0V8l.8-.6a3 3 0 1 0-3.6 0L8 8v5h2z" id="Shape"/></g></g></svg>',"icon-temporary-placeholder":'<svg width="24" height="24"><g id="icon-temporary-placeholder" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.5 2.5c-.8 0-1.5.7-1.5 1.5a1.5 1.5 0 0 1-3 0 3 3 0 0 0-6 0v2H8.5c-.3 0-.5.2-.5.5v1a8 8 0 1 0 6 0v-1c0-.3-.2-.5-.5-.5H11V4a2 2 0 0 1 4 0 2.5 2.5 0 0 0 5 0c0-.3.2-.5.5-.5a.5.5 0 0 0 0-1zM8.1 10.9a5 5 0 0 0-1.2 7 .5.5 0 0 1-.8.5 6 6 0 0 1 1.5-8.3.5.5 0 1 1 .5.8z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-text-color":'<svg width="24" height="24"><g id="icon-text-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="color" d="M3 19h18v3H3z"/><path d="M8.7 17h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z" id="shape"/></g></svg>',"icon-toc":'<svg width="24" height="24"><g id="icon-toc" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-translate":'<svg width="24" height="24"><g id="icon-translate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" id="shape"/></g></svg>',"icon-underline":'<svg width="24" height="24"><g id="icon-underline" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-undo":'<svg width="24" height="24"><g id="icon-undo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlink":'<svg width="24" height="24"><g id="icon-unlink" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlock":'<svg width="24" height="24"><g id="icon-unlock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" id="shape"/></g></svg>',"icon-unordered-list":'<svg width="24" height="24"><g id="icon-unordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" id="shape"/></g></svg>',"icon-unselected":'<svg width="24" height="24"><g id="icon-unselected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" id="Combined-Shape"/></g></svg>',"icon-upload":'<svg width="24" height="24"><g id="icon-upload" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-user":'<svg width="24" height="24"><g id="icon-user" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-warning":'<svg width="24" height="24"><g id="icon-warning" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z" id="shape"/></g></svg>',"icon-zoom-in":'<svg width="24" height="24"><g id="icon-zoom-in" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-zoom-out":'<svg width="24" height="24"><g id="icon-zoom-out" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>'},yw=function(e,t){return P.from(bw[e]).getOrThunk(t)},xw=function(e,t){return P.from(t()[e]).getOrThunk(function(){return yw(e,function(){return"!not found!"})})},ww=function(e,t,n){return P.from(t()[e]).getOrThunk(function(){return yw(e,n)})},kw={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Sw=Ol({name:"Notification",factory:function(t){var e,n,o,r=Jd({dom:{tag:"p",innerHtml:t.text()},behaviours:wi([fh.config({})])}),i=function(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}},a=function(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}},u=Jd({dom:{tag:"div",classes:t.progress()?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},a(0)],behaviours:wi([fh.config({})])}),c={updateProgress:function(e,t){e.getSystem().isConnected()&&u.getOpt(e).each(function(e){fh.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(t)]},a(t)])})},updateText:function(e,t){if(e.getSystem().isConnected()){var n=r.get(e);fh.set(n,[Pg(t)])}}},s=V(j([t.icon().toArray(),t.level().toArray(),t.level().bind(function(e){return P.from(kw[e])}).toArray()]),function(e){return"icon-"+e});return{uid:t.uid(),dom:{tag:"div",attributes:{role:"alert"},classes:t.level().map(function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=s,n=t.iconProvider(),o=function(){return e=function(){return""},Ae(s,function(e){return P.from(bw[e])}).getOrThunk(e);var e},Ae(e,function(e){return P.from(n()[e])}).getOrThunk(o))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:wi([fh.config({})])}].concat(t.progress()?[u.asSpec()]:[]).concat(Ml.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:xw("icon-close",t.iconProvider())}}],action:function(e){t.onAction()(e)}})),apis:c}},configFields:[wr("level"),gr("progress"),gr("icon"),gr("onAction"),gr("text"),gr("iconProvider")],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function Cw(r,i,a){var u=i.backstage;return{open:function(e,t){var n=function(){t(),pw.hide(r)},o=Ug(Sw.sketch({text:e.text,level:M(["success","error","warning","info"],e.type)?e.type:undefined,progress:!0===e.progressBar,icon:P.from(e.icon),onAction:n,iconProvider:u.shared.providers.icons})),r=Ug(pw.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.backstage.shared.getSink,fireDismissalEventInstead:{}}));return a.add(r),e.timeout&&setTimeout(function(){n()},e.timeout),{close:n,moveTo:function(e,t){pw.showAt(r,{anchor:"makeshift",x:e,y:t},Wg(o))},moveRel:function(e,t){pw.showAt(r,i.backstage.shared.anchors.banner(),Wg(o))},text:function(e){Sw.updateText(o,e)},settings:e,getEl:function(){},progressBar:{value:function(e){Sw.updateProgress(o,e)}}}},close:function(e){e.close()},reposition:function(e){A(e,function(e){e.moveTo(0,0)}),function(n){if(0<n.length){var e=n.slice(0,1)[0],t=(o=r).inline?o.getElement():o.getContentAreaContainer();e.moveRel(t,"tc-tc"),A(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")})}var o}(e)},getArgs:function(e){return e.settings}}}var zw,Ow,Tw=/[\u00a0 \t\r\n]/,Mw=function(n,e,t,o,r){return(i=n).collapsed&&3===i.startContainer.nodeType?function(e,t,n,o){var r;for(r=t-1;0<=r;r--){if(Tw.test(e.charAt(r)))return P.none();if(e.charAt(r)===n)break}return-1===r||t-r<o?P.none():P.some(e.substring(r+1,t))}(t,o,e,r).map(function(e){var t=n.cloneRange();return t.setStart(n.startContainer,n.startOffset-e.length-1),t.setEnd(n.startContainer,n.startOffset),{text:e,rng:t}}):P.none();var i},Hw=function(n,e){e.on("keypress",n.onKeypressThrottle);var o=function(e,t){ao(e,Ge(),{raw:t})};e.on("keydown",function(t){var e=function(){return n.getView().bind(Ru.getHighlighted)};n.isActive()&&(8===t.which&&n.onKeypressThrottle(t),27===t.which?n.closeIfNecessary():32===t.which?n.closeIfNecessary():13===t.which?(e().each(uo),t.preventDefault()):40===t.which?(e().fold(function(){n.getView().each(Ru.highlightFirst)},function(e){o(e,t)}),t.preventDefault()):37!==t.which&&38!==t.which&&39!==t.which||e().each(function(e){o(e,t),t.preventDefault()}))})},Ew=tinymce.util.Tools.resolve("tinymce.util.Promise"),Vw=function(e,t){var n,o,r,i=t(),a=e.selection.getRng(),u=a.startContainer.nodeValue;return(n=a,o=u,r=i,Ae(r.triggerChars,function(t){return Mw(n,t,o,n.startOffset,0).map(function(e){return{range:e.rng,text:e.text,triggerChar:t}})})).map(function(e){var t=i.lookupByChar(e.triggerChar);return{lookupData:Ew.all(V(t,function(t){return t.fetch(e.text,t.maxResults).then(function(e){return{items:e,columns:t.columns,onAction:t.onAction}})})),triggerChar:e.triggerChar,range:e.range}})},Aw=Uo([Br("type",function(){return"autocompleteitem"}),Br("active",function(){return!1}),Br("disabled",function(){return!1}),Or("meta",{}),vr("value"),Sr("text"),Sr("icon")]),Bw=Uo([vr("type"),vr("ch"),Or("columns",1),Mr("maxResults",10),pr("fetch"),pr("onAction")]),Dw=function(e){var t,n,o=e.ui.registry.getAll().popups,r=se(o,function(e){return(t=e,nr("Autocompleter",Bw,t)).fold(function(e){throw new Error(ar(e))},function(e){return e});var t}),i=(t=fe(r,function(e){return e.ch}),n={},A(t,function(e){n[e]={}}),ae(n)),a=de(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return B(a,function(e){return e.ch===t})}}},Rw="tox-menu-nav__js",Fw="tox-collection__item",Iw="tox-swatch",_w={normal:Rw,color:Iw},Lw="tox-collection__item--enabled",Nw="tox-collection__item-icon",Pw="tox-collection__item-label",jw="tox-collection__item--active",Uw=function(e){return ze(_w,e).getOr(Rw)},Ww=tinymce.util.Tools.resolve("tinymce.Env"),Gw=function(e){return{dom:{tag:"span",classes:[Nw],innerHtml:e}}},Xw=function(e){return{dom:{tag:"span",classes:[Pw]},components:[Pg(e)]}},Yw=function(e){var r=Ww.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=e.split("+");return V(t,function(e){var t,n,o=e.toLowerCase();return t=r,n=o,ue.call(t,n)?r[o]:e}).join("+")},$w=function(e){return{dom:{tag:"span",classes:["tox-collection__item-accessory"],innerHtml:Yw(e)}}},qw=function(e){return{dom:{tag:"span",classes:[Nw,"tox-collection__item-checkmark"],innerHtml:xw("icon-checkmark",e)}}},Kw=function(e,t){var n,o,r,i,a,u,c=e.iconContent.map(function(e){return ww("icon-"+e,t.icons,U(e))});return"color"===e.presets?(i=e.value,{dom:(a=Iw,u=c.getOr(""),Vl("custom"===i?'<button class="'+a+' tox-swatches__picker-btn">'+u+"</button>":"remove"===i?'<div class="'+a+' tox-swatch--remove">'+u+"</div>":'<div class="'+a+'" style="background-color: '+i+'" data-mce-color="'+i+'"></div>')),optComponents:[]}):(o=c,r=(n=e).checkMark.orThunk(function(){return o.or(P.some("")).map(Gw)}),{dom:{tag:"div",classes:[Rw,Fw]},optComponents:[r,n.textContent.map(Xw),n.shortcutContent.map($w),n.caret]})},Jw=function(e){return eg.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},Qw=function(e){return eg.config({disabled:e})},Zw=function(e,t){var n=e.getApi(t);return function(e){e(n)}},ek=function(n,o){return ei(function(e){Zw(n,e)(function(e){var t=n.onSetup(e);null!==t&&t!==undefined&&o.set(t)})})},tk=function(t,n){return ti(function(e){return Zw(t,e)(n.get())})},nk={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},ok=function(e){return W(e,function(e){return e.toArray()})},rk=function(e,t,n){var o,r,i=Ee(N);return{type:"item",dom:t.dom,components:ok(t.optComponents),data:e.data,eventOrder:nk,itemBehaviours:wi([Om("item-events",[(o=e,r=n,oi(function(e,t){Zw(o,e)(o.onAction),o.triggersSubmenu||r!==zw.CLOSE_ON_EXECUTE||(io(e,Rt()),t.stop())})),ek(e,i),tk(e,i)]),Jw(e.disabled),fh.config({})].concat(e.itemBehaviours))}},ik=function(e){return{value:e.value,meta:ne({text:e.text.getOr("")},e.meta)}},ak=U(Ys("item-widget",Zg())),uk=oo("cell-over"),ck=oo("cell-execute"),sk=function(t,n,e){var o,r=function(e){return ao(e,ck,{row:t,col:n})};return Ug({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=e,o)},behaviours:wi([Om("insert-table-picker-cell",[Xr(je(),Ua.focus),Xr(Et(),r),Xr(qe(),r)]),Aa.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ua.config({onFocus:function(e){return ao(e,uk,{row:t,col:n})}})])})},lk={inserttable:function FB(o){var e,t=oo("size-label"),u=function(e,t,n){for(var o=[],r=0;r<t;r++){for(var i=[],a=0;a<n;a++)i.push(sk(r,a,e));o.push(i)}return o}(t,10,10),c=Jd({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[Pg("0x0")],behaviours:wi([fh.config({})])});return{type:"widget",data:{value:oo("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[ak().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:(e=u,W(e,function(e){return V(e,Wg)})).concat(c.asSpec()),behaviours:wi([Om("insert-table-picker",[Kr(uk,function(e,t,n){var o,r,i=n.event().row(),a=n.event().col();!function(e,t,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Aa.set(e[i][a],i<=t&&a<=n)}(u,i,a,10,10),fh.set(c.get(e),[(o=i,r=a,Pg(o+1+"x"+(r+1)))])}),Kr(ck,function(e,t,n){o.onAction({numRows:n.event().row()+1,numColumns:n.event().col()+1}),io(e,Rt())})]),ds.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}}},fk=function(e,a,t){return{dom:{tag:"div",classes:[Rw,Fw]},optComponents:[P.some(t),e.map(function(e){return t=a.tag,n=a.styleAttr,o="span",r=[Pw],i=[{dom:{tag:t,attributes:{style:n}},components:[Pg(e)]}],{dom:{tag:o,classes:r},components:i};var t,n,o,r,i})]}};(Ow=zw||(zw={}))[Ow.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Ow[Ow.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var dk,mk,gk,hk,vk=function(t,e,n,o,r,i,a){var u,c=Kw({presets:n,textContent:e?t.text:P.none(),iconContent:t.icon,shortcutContent:e?t.shortcut:P.none(),checkMark:(u=r,u?P.some(qw(a.icons)):P.none()),caret:P.none(),value:t.value},a);return rk({data:ik(t),disabled:t.disabled,getApi:function(){return 10},onAction:function(e){return o(t.value)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},c,i)},pk=function(t,e,n,o,r,i){var a=Kw({presets:n,textContent:e?t.text:P.none(),iconContent:t.icon,shortcutContent:P.none(),checkMark:P.none(),caret:P.none(),value:t.value},i);return rk({data:ik(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(e){return o(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},a,r)},bk=function(e){return{type:"separator",dom:{tag:"div",classes:["tox-collection__separator"],innerHtml:e.text.getOr("")},components:[]}},yk=function(e,t,n){var o="togglemenuitem"===e.type&&e.active?qw(n.icons):Gw(""),r=fk(e.text,e.meta,o);return te(rk({data:ik(e),disabled:e.disabled,getApi:function(){return 10},onAction:e.onAction,onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},r,t),"togglemenuitem"===e.type?{toggling:{toggleClass:Lw,toggleOnExecute:!1,selected:e.active}}:{})},xk=function(e,t,n){var o,r=e.hasSubmenu?P.some((o=n.icons,{dom:{tag:"span",classes:["tox-collection__item-caret"],innerHtml:xw("icon-chevron-right",o)}})):P.none(),i=Kw({presets:"normal",iconContent:e.icon,textContent:e.text,caret:r,checkMark:P.none(),shortcutContent:e.shortcut},n);return rk({data:ik(e),getApi:function(t){return{isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:e.hasSubmenu,itemBehaviours:[]},i,t)},wk=function(e,t,n){var o=Kw({iconContent:P.none(),textContent:e.text,checkMark:P.some(qw(n.icons)),caret:P.none(),shortcutContent:e.shortcut,presets:"normal"},n);return te(rk({data:ik(e),disabled:e.disabled,getApi:function(t){return{setActive:function(e){Aa.set(t,e)},isActive:function(){return Aa.isOn(t)},isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t),{toggling:{toggleClass:Lw,toggleOnExecute:!1,selected:e.active}})},kk=function(t){return(e=lk,n=t.fancytype,Object.prototype.hasOwnProperty.call(e,n)?P.some(e[n]):P.none()).map(function(e){return e(t)});var e,n},Sk=[Er("disabled",!1),Sr("text"),Sr("shortcut"),qo("value","value",Ho(function(){return oo("menuitem-value")}),cr()),Or("meta",{})],Ck=Uo([vr("type"),Br("hasSubmenu",function(e){return He(e,"getSubmenuItems")}),Vr("onSetup",function(){return N}),Vr("onAction",N),Sr("icon")].concat(Sk)),zk=function(e){return nr("menuitem",Ck,e)},Ok=Uo([vr("type"),Er("active",!1),Vr("onSetup",function(){return N}),pr("onAction")].concat(Sk)),Tk=function(e){return nr("togglemenuitem",Ok,e)},Mk=Uo([vr("type"),Er("active",!1),Sr("icon")].concat(Sk)),Hk=Uo([vr("type"),Sr("text")]),Ek=Uo([vr("type"),(dk="fancytype",mk=["inserttable"],qo(dk,dk,To(),Zo(function(e){return M(mk,e)?ie.value(e):ie.error('Value was: "'+e+'". Must be one of ['+V(mk,function(e){return'"'+e+'"'}).join(", ")+"]")}))),Vr("onAction",N)]),Vk=function(e,o,t){var r=uu(e.element(),"."+t);if(0<r.length){var n=I(r,function(e){var t=e.dom().getBoundingClientRect().top,n=r[0].dom().getBoundingClientRect().top;return Math.abs(t-n)>o}).getOr(r.length);return P.some({numColumns:n,numRows:Math.ceil(r.length/n)})}return P.none()},Ak=function(e,t){return wi([Om(e,t)])},Bk=function(e){return Ak(oo("unnamed-events"),e)},Dk=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:(t=e,"color"===t?"tox-swatches":"tox-menu"),tieredMenu:"tox-tiered-menu"};var t},Rk=function(e){var t=Dk(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Uw(e)}},Fk=[ih.parts().items({})],Ik=function(e,t,n){var o=Dk(n);return{dom:{tag:"div",classes:j([[o.tieredMenu]])},markers:Rk(n)}},_k=function(e,t){var n=Rk(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},Lk=function(n,o){return function(e){var t=E(e,o);return V(t,function(e){return{dom:n,components:e}})}},Nk=function(t,i){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[ih.parts().items({preprocess:function(e){return"auto"!==t&&1<t?Lk({tag:"div",classes:["tox-collection__group"]},t)(e):(n=function(e,t){return"separator"===i[t].type},o=[],r=[],A(e,function(e,t){n(e,t)?(0<r.length&&o.push(r),r=[]):r.push(e)}),0<r.length&&o.push(r),V(o,function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}}));var n,o,r}})]}};(hk=gk||(gk={}))[hk.ContentFocus=0]="ContentFocus",hk[hk.UiFocus=1]="UiFocus";var Pk,jk,Uk=function(e){return console.error(ar(e)),console.log(e),P.none()},Wk=function(e){return e.icon!==undefined},Gk=function(e){return H(e,Wk)},Xk=function(e,t,n){switch(e.type){case"menuitem":return zk(e).fold(Uk,function(e){return P.some(xk(e,t,n))});case"styleitem":return"menuitem"===e.item.type?zk(e.item).fold(Uk,function(e){return P.some(yk(e,t,n))}):"togglemenuitem"===e.item.type?Tk(e.item).fold(Uk,function(e){return P.some(yk(e,t,n))}):(console.error("Unsupported style item delegate",e.item),P.none());case"togglemenuitem":return Tk(e).fold(Uk,function(e){return P.some(wk(e,t,n))});case"separator":return(r=e,nr("separatormenuitem",Hk,r)).fold(Uk,function(e){return P.some(bk(e))});case"fancymenuitem":return(o=e,nr("fancymenuitem",Ek,o)).fold(Uk,function(e){return kk(e)});default:return console.error("Unknown item in general menu",e),P.none()}var o,r},Yk=function(e,t,n,o,r){var i,a,u,c,s,l,f;return"color"===r?{value:e,dom:(i=o,f={dom:{tag:"div",classes:["tox-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ih.parts().items({preprocess:"auto"!==i?Lk({tag:"div",classes:["tox-swatches__row"]},i):b})]}]}).dom,components:f.components,items:n}:"normal"===r&&"auto"===o?{value:e,dom:(f=Nk(o,n)).dom,components:f.components,items:n}:"normal"===r&&1===o?{value:e,dom:(f=Nk(1,n)).dom,components:f.components,items:n}:"normal"===r?{value:e,dom:(f=Nk(o,n)).dom,components:f.components,items:n}:"toolbar"!==r||"auto"===o?{value:e,dom:(u=t,c=o,s=r,l=Dk(s),{tag:"div",classes:j([[l.menu,"tox-menu-"+c+"-column"],u?[l.hasIcons]:[]])}),components:Fk,items:n}:{value:e,dom:(a=o,f={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ih.parts().items({preprocess:Lk({tag:"div",classes:["tox-collection__group"]},a)})]}).dom,components:f.components,items:n}},$k=function(e,n,o,r,i,a,u){return Ve(V(e,function(t){return"choiceitem"===t.type?(e=t,nr("choicemenuitem",Mk,e)).fold(Uk,function(e){return P.some(vk(e,1===o,r,n,a(t.value),i,u))}):P.none();var e}))},qk=function(e,n,o,r,i){return Ve(V(e,function(e){return(t=e,nr("Autocompleter.Item",Aw,t)).fold(Uk,function(e){return P.some(pk(e,1===o,"normal",n,r,i))});var t}))},Kk=function(e,t,n,o,r,i,a,u){var c=Gk(t),s=$k(t,n,o,"color"!==r?"normal":"color",i,a,u);return Yk(e,c,s,o,r)},Jk=function(e,t,n,o){var r=Gk(t),i=Ve(V(t,function(e){return Xk(e,n,o)}));return Yk(e,r,i,1,"normal")},Qk=function(e){return vh.singleData(e.value,e)},Zk=function(g,h){var v=Ug(pw.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],lazySink:h.getSink})),e=function(){return pw.isOpen(v)},p=function(){e()&&pw.hide(v)},t=Ze(function(){return Dw(g)}),n={onKeypressThrottle:gp(function(e){(" "===e.key?P.none():Vw(g,t)).fold(p,function(m){m.lookupData.then(function(e){var t,n,o,r,i,a,u,c,s,l,f=(t=m.triggerChar,o=Ae(n=e,function(e){return P.from(e.columns)}).getOr(1),W(n,function(i){var e=i.items;return qk(e,function(o,r){var e=g.selection.getRng();Mw(e,t,e.startContainer.data,e.startOffset,0).fold(function(){return console.error("Lost context. Cursor probably moved")},function(e){var t=e.rng,n={hide:p};i.onAction(n,t,o,r)})},o,zw.BUBBLE_TO_SANDBOX,h.providers)})),d=Ae(e,function(e){return P.from(e.columns)}).getOr(1);pw.showAt(v,{anchor:"selection",root:Yt.fromDom(g.getBody()),getSelection:function(){return P.some({start:function(){return Yt.fromDom(m.range.startContainer)},soffset:function(){return m.range.startOffset},finish:function(){return Yt.fromDom(m.range.endContainer)},foffset:function(){return m.range.endOffset}})}},ih.sketch((r=Yk("autocompleter-value",!0,f,d,"normal"),i=d,a=gk.ContentFocus,u="normal",c=a===gk.ContentFocus?_u():Iu(),s=_k(i,u),l=Rk(u),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===gk.ContentFocus,focusManager:c,menuBehaviours:Bk("auto"!==i?[]:[ei(function(o,e){Vk(o,4,l.item).each(function(e){var t=e.numColumns,n=e.numRows;ds.setGridSize(o,n,t)})})])}))),pw.getContent(v).each(Ru.highlightFirst)})})},50).throttle,closeIfNecessary:p,isActive:e,getView:function(){return pw.getContent(v)}};Hw(n,g)},eS=function(e){return P.from(e.settings.min_width).filter(O)},tS=function(e){return P.from(e.settings.min_height).filter(O)},nS=oo("form-component-change"),oS=oo("form-close"),rS=oo("form-cancel"),iS=oo("form-action"),aS=oo("form-submit"),uS=oo("form-block"),cS=oo("form-unblock"),sS=oo("form-tabchange"),lS=oo("form-resize"),fS=U([Or("prefix","form-field"),ms("fieldBehaviours",[Hm,af])]),dS=U([js({schema:[gr("dom")],name:"label"}),js({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[gr("text")],name:"aria-descriptor"}),Ns({factory:{sketch:function(e){var t=ke(e,["factory"]);return e.factory.sketch(t)}},schema:[gr("factory")],name:"field"})]),mS=Tl({name:"FormField",configFields:fS(),partFields:dS(),factory:function(r,e,t,n){var o=te(wi([Hm.config({find:function(e){return el(e,r,"field")}}),af.config({store:{mode:"manual",getValue:function(e){return Hm.getCurrent(e).bind(af.getValue)},setValue:function(e,t){Hm.getCurrent(e).each(function(e){af.setValue(e,t)})}}})]),gs(r.fieldBehaviours())),i=Ur([ei(function(e,t){var o=nl(e,r,["label","field","aria-descriptor"]);o.field().each(function(n){var t=oo(r.prefix());o.label().each(function(e){Un.set(e.element(),"for",t),Un.set(n.element(),"id",t)}),o["aria-descriptor"]().each(function(e){var t=oo(r.prefix());Un.set(e.element(),"id",t),Un.set(n.element(),"aria-labelledby",t)})})})]),a={getField:function(e){return el(e,r,"field")},getLabel:function(e){return el(e,r,"label")}};return{uid:r.uid(),dom:r.dom(),components:e,behaviours:o,events:i,apis:a}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),gS=Object.freeze({getCoupled:function(e,t,n,o){return n.getOrCreate(e,t,o)}}),hS=[hr("others",Go(ie.value,cr()))],vS=Object.freeze({init:function(e){var i={},t=U({});return xi({readState:t,getOrCreate:function(n,o,r){var e=ae(o.others());if(e)return ze(i,r).getOrThunk(function(){var e=ze(o.others(),r).getOrDie("No information found for coupled component: "+r)()(n),t=n.getSystem().build(e);return i[r]=t});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+Do(e,null,2))}})}}),pS=Si({fields:hS,name:"coupling",apis:gS,state:vS}),bS=Object.freeze({events:function(e,t){var n=e.stream().streams().setup(e,t);return Ur([Xr(e.event(),n),ti(function(){return t.cancel()})].concat(e.cancelEvent().map(function(e){return[Xr(e,function(){return t.cancel()})]}).getOr([])))}}),yS=function(e){var t=Ee(null);return xi({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})},xS=Object.freeze({throttle:yS,init:function(e){return e.stream().streams().state(e)}}),wS=[hr("stream",ur("mode",{throttle:[gr("delay"),Or("stopEvent",!0),va("streams",{setup:function(e,t){var n=e.stream(),o=gp(e.onStream(),n.delay());return t.setTimer(o),function(e,t){o.throttle(e,t),n.stopEvent()&&t.stop()}},state:yS})]})),Or("event","input"),wr("cancelEvent"),ga("onStream")],kS=Si({fields:wS,name:"streaming",active:bS,state:xS}),SS=U("sink"),CS=U(js({name:SS(),overrides:U({dom:{tag:"div"},behaviours:wi([tw.config({useFixed:!0})]),events:Ur([Jr(Ge()),Jr(_e()),Jr(qe())])})}));(jk=Pk||(Pk={}))[jk.HighlightFirst=0]="HighlightFirst",jk[jk.HighlightNone=1]="HighlightNone";var zS=function(e,t){var n=e.getHotspot()(t).getOr(t);return e.layouts().fold(function(){return{anchor:"hotspot",hotspot:n}},function(e){return{anchor:"hotspot",hotspot:n,layouts:e}})},OS=function(e,t,n,o,r,i,a){var u,c,s,l,f,d,m,g,h,v,p=zS(e,n);return(c=p,l=o,f=r,d=a,m=t,g=s=n,h=(u=e).fetch()(g).map(m),v=HS(s,u),h.map(function(e){return vh.sketch(te(f.menu(),{uid:xl(""),data:e,highlightImmediately:d===Pk.HighlightFirst,onOpenMenu:function(e,t){var n=v().getOrDie();tw.position(n,c,t),fw.decloak(l)},onOpenSubmenu:function(e,t,n){var o=v().getOrDie();tw.position(o,{anchor:"submenu",item:t},n),fw.decloak(l)},onEscape:function(){return Ua.focus(s),fw.close(l),P.some(!0)}}))})).map(function(e){return fw.cloak(o),fw.open(o,e),i(o),o})},TS=function(e,t,n,o,r,i,a){return fw.close(o),kb.pure(o)},MS=function(e,t,n,o,r,i){var a=pS.getCoupled(n,"sandbox");return(fw.isOpen(a)?TS:OS)(e,t,n,a,o,r,i)},HS=function(e,t){return e.getSystem().getByUid(t.uid()+"-"+SS()).map(function(e){return U(ie.value(e))}).getOrThunk(function(){return t.lazySink().fold(function(){return U(ie.error(new Error("No internal sink is specified, nor could an external sink be found")))},b)})},ES=function(c,s,l){var t,f=(t=oo("aria-owns"),{id:U(t),link:function(e){Un.set(e,"aria-owns",t)},unlink:function(e){Un.remove(e,"aria-owns")}}),e=HS(s,c);return{dom:{tag:"div",classes:c.sandboxClasses(),attributes:{id:f.id()}},behaviours:te(wi([af.config({store:{mode:"memory",initialValue:s}}),fw.config({onOpen:function(e,t){var n,o,r,i,a,u=zS(c,s);f.link(s.element()),c.matchWidth()&&(n=u.hotspot,o=t,r=c.useMinWidth(),i=Hm.getCurrent(o).getOr(o),a=yf(n.element()),r?Ka.set(i.element(),"min-width",a+"px"):bf(i.element(),a)),c.onOpen()(u,e,t),l!==undefined&&l.onOpen!==undefined&&l.onOpen(e,t)},onClose:function(e,t){f.unlink(s.element()),l!==undefined&&l.onClose!==undefined&&l.onClose(e,t)},isPartOf:function(e,t,n){return hy(t,n)||hy(s,n)},getAttachPoint:function(){return e().getOrDie()}}),Hm.config({find:function(e){return fw.getState(e).bind(function(e){return Hm.getCurrent(e)})}}),hw({isExtraPart:U(!1)})]),vs(c.sandboxBehaviours()))}},VS=function(e,t,n){var o=af.getValue(n);af.setValue(t,o),BS(t)},AS=function(e,t){var n=e.element(),o=Bm(n),r=n.dom();"number"!==Un.get(n,"type")&&t(r,o)},BS=function(e){AS(e,function(e,t){return e.setSelectionRange(t.length,t.length)})},DS=function(e,t,o){if(e.selectsOver()){var n=af.getValue(t),r=e.getDisplayText()(n),i=af.getValue(o);return 0===e.getDisplayText()(i).indexOf(r)?P.some(function(){var e,n;VS(0,t,o),e=t,n=r.length,AS(e,function(e,t){return e.setSelectionRange(n,t.length)})}):P.none()}return P.none()},RS=U("alloy.typeahead.itemexecute"),FS=function(){return[Or("sandboxClasses",[]),hs("sandboxBehaviours",[Hm,xa,fw,af])]},IS=U([wr("lazySink"),gr("fetch"),Or("minChars",5),Or("responseTime",1e3),da("onOpen"),Or("getHotspot",P.some),Or("layouts",P.none()),Or("eventOrder",{}),Ar("model",{},[Or("getDisplayText",function(e){return e.meta!==undefined&&e.meta.text!==undefined?e.meta.text:e.value}),Or("selectsOver",!0),Or("populateFromBrowse",!0)]),ma("onExecute"),da("onItemExecute"),Or("inputClasses",[]),Or("inputAttributes",{}),Or("inputStyles",{}),Or("matchWidth",!0),Or("useMinWidth",!1),Or("dismissOnBlur",!0),la(["openClass"]),wr("initialData"),ms("typeaheadBehaviours",[Ua,af,kS,ds,Aa,pS]),Br("previewing",function(){return Ee(!0)})].concat(Dm()).concat(FS())),_S=U([Ps({schema:[sa()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(t,n){o.previewing().get()?t.getSystem().getByUid(o.uid()).each(function(e){DS(o.model(),e,n).fold(function(){return Ru.dehighlight(t,n)},function(e){return e()})}):t.getSystem().getByUid(o.uid()).each(function(e){o.model().populateFromBrowse()&&VS(o.model(),e,n)}),o.previewing().set(!1)},onExecute:function(e,t){return e.getSystem().getByUid(o.uid()).toOption().map(function(e){return ao(e,RS(),{item:t}),!0})},onHover:function(e,t){o.previewing().set(!1),e.getSystem().getByUid(o.uid()).each(function(e){o.model().populateFromBrowse()&&VS(o.model(),e,t)})}}}})]),LS=Tl({name:"Typeahead",configFields:IS(),partFields:_S(),factory:function(r,e,t,i){var n=function(e,t,n){r.previewing().set(!1);var o=pS.getCoupled(e,"sandbox");fw.isOpen(o)?Hm.getCurrent(o).each(function(e){Ru.getHighlighted(e).fold(function(){n(e)},function(){lo(o,e.element(),"keydown",t)})}):OS(r,a(e),e,o,i,function(e){Hm.getCurrent(e).each(n)},Pk.HighlightFirst).get(N)},o=Rm(r),a=function(o){return function(e){var t=de(e.menus),n=W(t,function(e){return B(e.items,function(e){return"item"===e.type})});return af.getState(o).update(V(n,function(e){return e.data})),e}},u=wi([Ua.config({}),af.config({store:te({mode:"dataset",getDataKey:function(e){return Bm(e.element())},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(e,t){Am(e.element(),r.model().getDisplayText()(t))}},r.initialData().map(function(e){return Oe("initialValue",e)}).getOr({}))}),kS.config({stream:{mode:"throttle",delay:r.responseTime(),stopEvent:!1},onStream:function(e,t){var n=pS.getCoupled(e,"sandbox");if(Ua.isFocused(e)&&Bm(e.element()).length>=r.minChars()){var o=Hm.getCurrent(n).bind(function(e){return Ru.getHighlighted(e).map(af.getValue)});r.previewing().set(!0),OS(r,a(e),e,n,i,function(e){Hm.getCurrent(n).each(function(e){o.fold(function(){r.model().selectsOver()&&Ru.highlightFirst(e)},function(t){Ru.highlightBy(e,function(e){return af.getValue(e).value===t.value}),Ru.getHighlighted(e).orThunk(function(){return Ru.highlightFirst(e),P.none()})})})},Pk.HighlightFirst).get(N)}},cancelEvent:Ft()}),ds.config({mode:"special",onDown:function(e,t){return n(e,t,Ru.highlightFirst),P.some(!0)},onEscape:function(e){var t=pS.getCoupled(e,"sandbox");return fw.isOpen(t)?(fw.close(t),P.some(!0)):P.none()},onUp:function(e,t){return n(e,t,Ru.highlightLast),P.some(!0)},onEnter:function(t){var e=pS.getCoupled(t,"sandbox"),n=fw.isOpen(e);if(n&&!r.previewing().get())return Hm.getCurrent(e).bind(function(e){return Ru.getHighlighted(e)}).map(function(e){return ao(t,RS(),{item:e}),!0});var o=af.getValue(t);return io(t,Ft()),r.onExecute()(e,t,o),n&&fw.close(e),P.some(!0)}}),Aa.config({toggleClass:r.markers().openClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),pS.config({others:{sandbox:function(e){return ES(r,e,{onOpen:b,onClose:b})}}}),Om("typeaheadevents",[oi(function(e){var t=N;MS(r,a(e),e,i,t,Pk.HighlightFirst).get(N)}),Xr(RS(),function(e,t){var n=pS.getCoupled(e,"sandbox");VS(r.model(),e,t.event().item()),io(e,Ft()),r.onItemExecute()(e,n,t.event().item(),af.getValue(e)),fw.close(n),BS(e)})].concat(r.dismissOnBlur()?[Xr(Mt(),function(e){var t=pS.getCoupled(e,"sandbox");Zi(t.element()).isNone()&&fw.close(t)})]:[]))]);return{uid:r.uid(),dom:Fm(r),behaviours:te(o,u,gs(r.typeaheadBehaviours())),eventOrder:r.eventOrder()}}}),NS=function(e,t,n){var o=jS(e,t,n);return mS.sketch(o)},PS=function(e,t){return NS(e,t,[])},jS=function(e,t,n){return{dom:US(n),components:e.toArray().concat([t])}},US=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},WS=function(e){return mS.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e}})},GS=function(e){return He(e,"getSubmenuItems")?(n=(t=e).getSubmenuItems(),o=XS(n),{item:t,menus:te(o.menus,Oe(t.value,o.items)),expansions:te(o.expansions,Oe(t.value,t.value))}):{item:e,menus:{},expansions:{}};var t,n,o},XS=function(e){return D(e,function(e,t){var n=ze(t,"value").getOrThunk(function(){return oo("generated-menu-item")}),o=te({value:n},t),r=GS(o);return{menus:te(e.menus,r.menus),items:[r.item].concat(e.items),expansions:te(e.expansions,r.expansions)}},{menus:{},expansions:{},items:[]})},YS=function(e,n,o){var t=oo("primary-menu"),r=XS(e),i=Jk(t,r.items,n,o),a=se(r.menus,function(e,t){return Jk(t,e,n,o)}),u=te(a,Oe(t,i));return vh.tieredData(t,u,r.expansions)},$S=zt.detect().browser.isFirefox(),qS={position:"absolute",left:"-9999px"},KS=function(e,t,n){var o,r,i,a=function(e,t){var n=Yt.fromTag("span",e.dom());Un.set(n,"role","presentation");var o=Yt.fromText(t,e.dom());return Sn.append(n,o),n}(yn.owner(t),n);$S&&(o=t,r=a,i=oo("ephox-alloy-aria-voice"),Un.set(r,"id",i),Un.set(o,"aria-describedby",i)),Un.setAll(a,e(n)),Ka.setAll(a,qS),Sn.append(t,a),setTimeout(function(){Un.remove(a,"aria-live"),Tn.remove(a)},1e3)},JS=function(e){return{"aria-live":"assertive","aria-atomic":"true",role:"alert"}},QS=["input","textarea"],ZS=function(e){var t=_n.name(e);return M(QS,t)},eC=function(e,t){var n=t.getRoot()(e).getOr(e.element());Pi.remove(n,t.invalidClass()),t.notify().each(function(t){ZS(e.element())&&Un.remove(n,"title"),t.getContainer()(e).each(function(e){En(e,t.validHtml())}),t.onValid()(e)})},tC=function(n,e,t,o){var r=e.getRoot()(n).getOr(n.element());Pi.add(r,e.invalidClass()),e.notify().each(function(e){var t;ZS(n.element())&&Un.set(n.element(),"title",o),t=go.body(),KS(JS,t,o),e.getContainer()(n).each(function(e){En(e,o)}),e.onInvalid()(n,o)})},nC=function(t,e,n){return e.validator().fold(function(){return kb.pure(ie.value(!0))},function(e){return e.validate()(t)})},oC=function(t,n,e){return n.notify().each(function(e){e.onValidate()(t)}),nC(t,n).map(function(e){return t.getSystem().isConnected()?e.fold(function(e){return tC(t,n,0,e),ie.error(e)},function(e){return eC(t,n),ie.value(e)}):ie.error("No longer in system")})},rC=Object.freeze({markValid:eC,markInvalid:tC,query:nC,run:oC,isInvalid:function(e,t){var n=t.getRoot()(e).getOr(e.element());return Pi.has(n,t.invalidClass())}}),iC=Object.freeze({events:function(t,e){return t.validator().map(function(e){return Ur([Xr(e.onEvent(),function(e){oC(e,t).get(b)})].concat(e.validateOnLoad()?[ei(function(e){oC(e,t).get(N)})]:[]))}).getOr({})}}),aC=[gr("invalidClass"),Or("getRoot",P.none),Cr("notify",[Or("aria","alert"),Or("getContainer",P.none),Or("validHtml",""),da("onValid"),da("onInvalid"),da("onValidate")]),Cr("validator",[gr("validate"),Or("onEvent","input"),Or("validateOnLoad",!0)])],uC=Si({fields:aC,name:"invalidating",active:iC,apis:rC,extra:{validation:function(n){return function(e){var t=af.getValue(e);return kb.pure(n(t))}}}}),cC=U([gr("dom"),gr("fetch"),da("onOpen"),ma("onExecute"),Or("getHotspot",P.some),Or("layouts",P.none()),ms("dropdownBehaviours",[Aa,pS,ds,Ua]),gr("toggleClass"),Or("eventOrder",{}),wr("lazySink"),Or("matchWidth",!1),Or("useMinWidth",!1),wr("role")].concat(FS())),sC=U([Ps({schema:[sa()],name:"menu",defaults:function(e){return{onExecute:e.onExecute()}}}),CS()]),lC=Tl({name:"Dropdown",configFields:cC(),partFields:sC(),factory:function(t,e,n,o){var r=function(e){fw.getState(e).each(function(e){vh.highlightPrimary(e)})},i={expand:function(e){Aa.isOn(e)||MS(t,function(e){return e},e,o,N,Pk.HighlightNone).get(N)},open:function(e){Aa.isOn(e)||MS(t,function(e){return e},e,o,N,Pk.HighlightFirst).get(N)},isOpen:Aa.isOn,close:function(e){Aa.isOn(e)&&MS(t,function(e){return e},e,o,N,Pk.HighlightFirst).get(N)}},a=function(e,t){return uo(e),P.some(!0)};return te({events:_a(P.some(function(e){MS(t,function(e){return e},e,o,r,Pk.HighlightFirst).get(N)}))},{uid:t.uid(),dom:t.dom(),components:e,behaviours:te(wi([Aa.config({toggleClass:t.toggleClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),pS.config({others:{sandbox:function(e){return ES(t,e,{onOpen:function(){Aa.on(e)},onClose:function(){Aa.off(e)}})}}}),ds.config({mode:"special",onSpace:a,onEnter:a,onDown:function(e,t){if(lC.isOpen(e)){var n=pS.getCoupled(e,"sandbox");r(n)}else lC.open(e);return P.some(!0)},onEscape:function(e,t){return lC.isOpen(e)?(lC.close(e),P.some(!0)):P.none()}}),Ua.config({})]),gs(t.dropdownBehaviours())),eventOrder:te(t.eventOrder(),{"alloy.execute":["toggling","alloy.base.behaviour"]}),apis:i},{dom:{attributes:{role:t.role().getOr("button"),"aria-haspopup":"true"}}})},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)}}}),fC=function(e,t){return e.getParam("color_cols",t)},dC=function(e){return!1!==e.getParam("custom_colors")},mC=function(e){return e.getParam("color_map")},gC="choiceitem",hC=Ee([{type:gC,text:"Black",value:"#1abc9c"},{type:gC,text:"Black",value:"#2ecc71"},{type:gC,text:"Black",value:"#3498db"},{type:gC,text:"Black",value:"#9b59b6"},{type:gC,text:"Black",value:"#34495e"},{type:gC,text:"Black",value:"#16a085"},{type:gC,text:"Black",value:"#27ae60"},{type:gC,text:"Black",value:"#2980b9"},{type:gC,text:"Black",value:"#8e44ad"},{type:gC,text:"Black",value:"#2c3e50"},{type:gC,text:"Black",value:"#f1c40f"},{type:gC,text:"Black",value:"#e67e22"},{type:gC,text:"Black",value:"#e74c3c"},{type:gC,text:"Black",value:"#ecf0f1"},{type:gC,text:"Black",value:"#95a5a6"},{type:gC,text:"Black",value:"#f39c12"},{type:gC,text:"Black",value:"#d35400"},{type:gC,text:"Black",value:"#c0392b"},{type:gC,text:"Black",value:"#bdc3c7"},{type:gC,text:"Black",value:"#7f8c8d"},{type:gC,text:"Black",value:"#000000"},{type:gC,text:"Black",value:"#ffffff"}]),vC=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],value:"#"+e[t],type:"choiceitem"});return n},pC=function(e){return Math.ceil(Math.sqrt(e))},bC=function(e){var t=hC.get(),n=pC(t.length);return fC(e,n)},yC=function(e){return"remove"===e?'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M25 5L5 25" stroke-width="1.5" fill="none"></path></svg>':"custom"===e?"color-picker":'<div style="width: 24px; height: 24px; background-color: '+e+';"></div>'},xC=function(t,n,e,o,r){"custom"===o?CC(t)(function(e){kC(e),t.execCommand("mceApplyTextcolor",n,e),r(e)},"#000000"):"remove"===o?(r(""),t.execCommand("mceRemoveTextcolor",n)):(r(o),t.execCommand("mceApplyTextcolor",n,o))},wC=function(i){return function(e){var t,n,o,r;e(hC.get().concat((t=i,o={type:n="choiceitem",text:"Remove",icon:yC("remove"),value:"remove"},r={type:n,text:"Custom",icon:yC("custom"),value:"custom"},t?[o,r]:[o])))}},kC=function(e){hC.set(hC.get().concat([{type:"choiceitem",text:e,value:e}]))},SC=function(t,r,n,e){var i;t.ui.registry.addSplitButton(r,(i=Ee(null),{type:"splitbutton",tooltip:e,presets:"color",icon:"forecolor"===r?"text-color":"background-color",select:function(){return!1},columns:bC(t),fetch:wC(dC(t)),onAction:function(e){null!==i.get()&&xC(t,n,0,i.get(),function(){})},onItemAction:function(o,e){xC(t,n,0,e,function(e){var t,n;i.set(e),t="forecolor"===r?"color":"Rectangle",n=e,o.setIconFill(t,n),o.setIconStroke(t,n)})}}))},CC=function(r){return function(e,t){var n,o=(n=e,function(e){var t=e.getData();n(t.colorpicker),e.close()});r.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"submit",name:"ok",text:"Ok",primary:!0},{type:"cancel",name:"cancel",text:"Cancel"}],initialData:{colorpicker:t},onAction:function(e,t){"hex-valid"===t.name&&(t.value?e.enable("ok"):e.disable("ok"))},onSubmit:o,onClose:function(){r.focus()}})}},zC={register:function(e){var i,t=mC(e);t!==undefined&&hC.set(vC(t)),(i=e).addCommand("mceApplyTextcolor",function(e,t){var n,o,r;o=e,r=t,(n=i).undoManager.transact(function(){n.focus(),n.formatter.apply(o,{value:r}),n.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(e){var t,n;n=e,(t=i).undoManager.transact(function(){t.focus(),t.formatter.remove(n,{value:null},null,!0),t.nodeChanged()})}),SC(e,"forecolor","forecolor","Color"),SC(e,"backcolor","hilitecolor","Background Color")},addColor:kC,getFetch:wC,colorPickerDialog:CC,getCurrentColor:function(e,n){var o;return e.dom.getParents(e.selection.getStart(),function(e){var t;(t=e.style["forecolor"===n?"color":"background-color"])&&(o=o||t)}),o},mapColors:vC,getColorCols:bC,calcCols:pC},OC=oo("color-change"),TC=oo("hex-change"),MC=function(e,t,o){var n,r,i=mS.parts().field({factory:Im,inputClasses:["tox-textfield"],onSetValue:function(e){return uC.run(e).get(function(){})},inputBehaviours:wi([Nm.config({}),uC.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return yn.parent(e.element())},notify:{onValid:function(e){var t=af.getValue(e);ao(e,OC,{color:t})}},validator:{validateOnLoad:!1,validate:function(e){var t=af.getValue(e);if(0===t.length)return kb.pure(ie.value(!0));var n=Yt.fromTag("span");Ka.set(n,"background-color",t);var o=Ka.getRaw(n,"background-color").fold(function(){return ie.error("blah")},function(e){return ie.value(t)});return kb.pure(o)}}})])}),a=e.label.map(WS),u=function(e,t){ao(e,TC,{value:t})},c=Jd((n={dom:{tag:"span"},layouts:P.some({onRtl:function(){return[gx]},onLtr:function(){return[hx]}}),components:[],fetch:zC.getFetch(o.hasCustomColors()),onItemAction:function(n){t.getSink().each(function(e){c.getOpt(e).each(function(t){"custom"===n?o.colorPicker(function(e){u(t,e),zC.addColor(e)},"#ffffff"):u(t,"remove"===n?"":n)})})}},r=t,lC.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:wi([El.config({}),Nm.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(){return kb.nu(function(e){return n.fetch(e)}).map(function(e){return Qk(te(Kk(oo("menu-value"),e,function(e){n.onItemAction(e)},5,"color",zw.CLOSE_ON_EXECUTE,function(){return!1},r.providers),{movement:_k(5,"color")}))})},parts:{menu:Ik(0,0,"color")}})));return mS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[i,c.asSpec()]}]),fieldBehaviours:wi([Om("form-field-events",[Xr(OC,function(e,t){c.getOpt(e).each(function(e){Ka.set(e.element(),"background-color",t.event().color())})}),Xr(TC,function(t,n){mS.getField(t).each(function(e){af.setValue(e,n.event().value()),Hm.getCurrent(t).each(Ua.focus)})})])])})},HC=function(e){return{value:U(e)}},EC=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,VC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,AC=function(e){return EC.test(e)||VC.test(e)},BC=function(e){var t,n=(t=e.value().replace(EC,function(e,t,n,o){return t+t+n+n+o+o}),{value:U(t)});return VC.exec(n.value())},DC=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},RC=function(e){var t=DC(e.red())+DC(e.green())+DC(e.blue());return HC(t)},FC=Math.min,IC=Math.max,_C=Math.round,LC=function(e,t,n,o){return{red:U(e),green:U(t),blue:U(n),alpha:U(o)}},NC=function(e){var t=parseInt(e,10);return t.toString()===e&&0<=t&&t<=255},PC=function(e){var t,n,o,r,i,a,u,c,s,l;if(i=(e.hue()||0)%360,a=e.saturation()/100,u=e.value()/100,a=IC(0,FC(a,1)),u=IC(0,FC(u,1)),0===a)return c=s=l=_C(255*u),LC(c,s,l,1);switch(t=i/60,o=(n=u*a)*(1-Math.abs(t%2-1)),r=u-n,Math.floor(t)){case 0:c=n,s=o,l=0;break;case 1:c=o,s=n,l=0;break;case 2:c=0,s=n,l=o;break;case 3:c=0,s=o,l=n;break;case 4:c=o,s=0,l=n;break;case 5:c=n,s=0,l=o;break;default:c=s=l=0}return c=_C(255*(c+r)),s=_C(255*(s+r)),l=_C(255*(l+r)),LC(c,s,l,1)},jC=function(e){var t=BC(e),n=parseInt(t[1],16),o=parseInt(t[2],16),r=parseInt(t[3],16);return LC(n,o,r,1)},UC=function(e){return"rgba("+e.red()+","+e.green()+","+e.blue()+","+e.alpha()+")"},WC=U(LC(255,0,0,1)),GC=U(oo("rgb-hex-update")),XC=U(oo("slider-update")),YC=U(oo("palette-update")),$C=function(e,o){var r=Nd.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),i=Nd.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}}),a=function(e,t){var n=e.width,o=e.height,r=e.getContext("2d");r.fillStyle=t,r.fillRect(0,0,n,o);var i=r.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,n,o);var a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)};return Ol({factory:function(e){var t=U({x:U(0),y:U(0)}),n=wi([Hm.config({find:P.some}),Ua.config({})]);return Nd.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[r,i],onChange:function(e,t,n){ao(e,YC(),{value:n})},onInit:function(e,t,n,o){a(n.element().dom(),UC(WC()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(e,t,n){var o,r;o=n,r=t.components()[0].element().dom(),a(r,UC(o))}},extraApis:{}})},qC=function(e,t){var n=Nd.parts().spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=Nd.parts().thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:U({y:U(0)})},components:[n,o],sliderBehaviours:wi([Ua.config({})]),onChange:function(e,t,n){ao(e,XC(),{value:n})}})},KC=oo("valid-input"),JC=oo("invalid-input"),QC=oo("validating-input"),ZC="colorcustom.rgb.",ez=function(m,g,h,v){var p=function(e,t,n,o,r){var i,a,u=m(ZC+"range"),c=[mS.parts().label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":o}}}),mS.parts().field({data:r,factory:Im,inputAttributes:{type:"text"},inputClasses:[g("textfield")],inputBehaviours:wi([(i=t,a=e,uC.config({invalidClass:g("invalid"),notify:{onValidate:function(e){ao(e,QC,{type:i})},onValid:function(e){ao(e,KC,{type:i,value:af.getValue(e)})},onInvalid:function(e){ao(e,JC,{type:i,value:af.getValue(e)})}},validator:{validate:function(e){var t=af.getValue(e),n=a(t)?ie.value(!0):ie.error(m("aria.input.invalid"));return kb.pure(n)},validateOnLoad:!1}})),Nm.config({})]),onSetValue:function(e){uC.isInvalid(e)&&uC.run(e).get(N)}})],s="hex"!==t?[mS.parts()["aria-descriptor"]({text:u})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}},b=function(e,t){var n=t.red(),o=t.green(),r=t.blue();af.setValue(e,{red:n,green:o,blue:r})},y=Jd({dom:{tag:"div",classes:[g("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=function(e,t){y.getOpt(e).each(function(e){Ka.set(e.element(),"background-color","#"+t.value())})};return Ol({factory:function(e){var n={red:U(Ee(P.some(255))),green:U(Ee(P.some(255))),blue:U(Ee(P.some(255))),hex:U(Ee(P.some("ffffff")))},o=function(e){return n[e]().get()},i=function(e,t){n[e]().set(t)},r=function(e){var t=e.red(),n=e.green(),o=e.blue();i("red",P.some(t)),i("green",P.some(n)),i("blue",P.some(o))},t=function(e,t){var n=t.event();"hex"!==n.type()?i(n.type(),P.none()):v(e)},a=function(r,e,t){var n=parseInt(t,10);i(e,P.some(n)),o("red").bind(function(n){return o("green").bind(function(t){return o("blue").map(function(e){return LC(n,t,e,1)})})}).each(function(e){var t,n,o=(t=r,n=RC(e),rg.getField(t,"hex").each(function(e){Ua.isFocused(e)||af.setValue(t,{hex:n.value()})}),n);x(r,o)})},u=function(e,t){var n=t.event();"hex"===n.type()?function(e,t){h(e);var n=HC(t);i("hex",P.some(t));var o=jC(n);b(e,o),r(o),ao(e,GC(),{hex:n}),x(e,n)}(e,n.value()):a(e,n.type(),n.value())},c=function(e){return{label:m(ZC+e+".label"),description:m(ZC+e+".description")}},s=c("red"),l=c("green"),f=c("blue"),d=c("hex");return te(rg.sketch(function(e){return{dom:{tag:"form",classes:[g("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[e.field("red",mS.sketch(p(NC,"red",s.label,s.description,255))),e.field("green",mS.sketch(p(NC,"green",l.label,l.description,255))),e.field("blue",mS.sketch(p(NC,"blue",f.label,f.description,255))),e.field("hex",mS.sketch(p(AC,"hex",d.label,d.description,"ffffff"))),y.asSpec()],formBehaviours:wi([uC.config({invalidClass:g("form-invalid")}),Om("rgb-form-events",[Xr(KC,u),Xr(JC,t),Xr(QC,t)])])}}),{apis:{updateHex:function(e,t){var n,o;af.setValue(e,{hex:t.value()}),n=e,o=jC(t),b(n,o),r(o),x(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,t,n){e.updateHex(t,n)}},extraApis:{}})},tz=function(e,t,n){return{hue:U(e),saturation:U(t),value:U(n)}},nz=function(c,s){return Ol({name:"ColourPicker",configFields:[Or("onValidHex",N),Or("onInvalidHex",N),Sr("formChangeEvent")],factory:function(e){var u,p,n=ez(c,s,e.onValidHex(),e.onInvalidHex()),o=$C(c,s),b={paletteRgba:U(Ee(WC()))},t=Jd(o.sketch({})),r=Jd(n.sketch({})),i=function(e,n){t.getOpt(e).each(function(e){var t=jC(n);b.paletteRgba().set(t),o.setRgba(e,t)})},a=function(e,t){r.getOpt(e).each(function(e){n.updateHex(e,t)})},y=function(t,n,e){A(e,function(e){e(t,n)})};return{uid:e.uid(),dom:e.dom(),components:[t.asSpec(),qC(c,s),r.asSpec()],behaviours:wi([Om("colour-picker-events",[Xr(YC(),(p=[a],function(e,t){var n,o,r,i,a,u,c,s,l,f=t.event().value(),d=b.paletteRgba().get(),m=(c=a=0,o=(n=d).red()/255,r=n.green()/255,i=n.blue()/255,(s=Math.min(o,Math.min(r,i)))===(l=Math.max(o,Math.max(r,i)))?tz(0,0,100*(c=s)):(a=60*((a=o===s?3:i===s?1:5)-(o===s?r-i:i===s?o-r:i-o)/(l-s)),u=(l-s)/l,c=l,tz(Math.round(a),Math.round(100*u),Math.round(100*c)))),g=tz(m.hue(),f.x(),100-f.y()),h=PC(g),v=RC(h);y(e,v,p)})),Xr(XC(),(u=[i,a],function(e,t){var n,o,r,i=t.event().value(),a=(n=i.y(),o=tz(360*(100-n/100),100,100),r=PC(o),RC(r));y(e,a,u)}))]),Hm.config({find:function(e){return r.getOpt(e)}}),ds.config({mode:"acyclic"})])}}})},oz=function(){return Hm.config({find:P.some})},rz=function(e){return Hm.config({find:e.getOpt})},iz=function(e){return Hm.config({find:function(t){return yn.child(t.element(),e).bind(function(e){return t.getSystem().getByDom(e).toOption()})}})},az={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},uz=function(e){return az[e]},cz=Uo([Or("preprocess",b),Or("postprocess",b)]),sz=function(e,t,n){return af.config(te({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(e){return{store:{initialValue:e}}}).getOr({})))},lz=function(e,t,n){return sz(e,function(e){return t(e.element())},function(e,t){return n(e.element(),t)})},fz=function(r,e){var i=rr("RepresentingConfigs.memento processors",cz,e);return af.config({store:{mode:"manual",getValue:function(e){var t=r.get(e),n=af.getValue(t);return i.postprocess(n)},setValue:function(e,t){var n=i.preprocess(t),o=r.get(e);af.setValue(o,n)}}})},dz=sz,mz=function(e){return lz(e,Hn,En)},gz=function(e){return af.config({store:{mode:"memory",initialValue:e}})},hz=function(e,t,n){return du(e,t,n).isSome()},vz=oo("alloy-fake-before-tabstop"),pz=oo("alloy-fake-after-tabstop"),bz=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:wi([Nm.config({})])}},yz=function(e,t){ao(e,Ge(),{raw:{which:9,shiftKey:t}})},xz=function(e){return hz(e,["."+vz,"."+pz].join(","),U(!1))},wz=function(e,t){var n=t.element();Pi.has(n,vz)?yz(e,!0):Pi.has(n,pz)&&yz(e,!1)},kz=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[bz([vz]),e,bz([pz])],behaviours:wi([iz(1)])}},Sz=!zt.detect().browser.isIE(),Cz=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),zz=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Oz=tinymce.util.Tools.resolve("tinymce.util.Observable"),Tz=tinymce.util.Tools.resolve("tinymce.util.Tools"),Mz=tinymce.util.Tools.resolve("tinymce.util.VK");function Hz(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function Ez(e,r){var i,a,t,u,c,l,f,d=r.document||document;r=r||{};var m=d.getElementById(r.handle||e);t=function(e){var t,n,o=function s(e){var t,n,o,r,i,a,u,c=Math.max;return t=e.documentElement,n=e.body,o=c(t.scrollWidth,n.scrollWidth),r=c(t.clientWidth,n.clientWidth),i=c(t.offsetWidth,n.offsetWidth),a=c(t.scrollHeight,n.scrollHeight),u=c(t.clientHeight,n.clientHeight),{width:o<i?r:o,height:a<c(t.offsetHeight,n.offsetHeight)?u:a}}(d);Hz(e),e.preventDefault(),a=e.button,t=m,l=e.screenX,f=e.screenY,n=window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue("cursor"):t.runtimeStyle.cursor,i=Cz("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(d.body),Cz(d).on("mousemove touchmove",c).on("mouseup touchend",u),r.start(e)},c=function(e){if(Hz(e),e.button!==a)return u(e);e.deltaX=e.screenX-l,e.deltaY=e.screenY-f,e.preventDefault(),r.drag(e)},u=function(e){Hz(e),Cz(d).off("mousemove touchmove",c).off("mouseup touchend",u),i.remove(),r.stop&&r.stop(e)},this.destroy=function(){Cz(m).off()},Cz(m).on("mousedown touchstart",t)}var Vz=0,Az=function(t){var l=Jd({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=Ee(1),d=Ee(P.none()),m=Ee({x:0,y:0,w:1,h:1}),c=Ee({x:0,y:0,w:1,h:1}),s=function(e,s){g.getOpt(e).each(function(e){var n=f.get(),o=yf(e.element()),r=Za(e.element()),i=s.dom().naturalWidth*n,a=s.dom().naturalHeight*n,u=Math.max(0,o/2-i/2),c=Math.max(0,r/2-a/2),t={left:u.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:a.toString()+"px",position:"absolute"};Ka.setAll(s,t),l.getOpt(e).each(function(e){Ka.setAll(e.element(),t)}),d.get().each(function(e){var t=m.get();e.setRect({x:t.x*n+u,y:t.y*n+c,w:t.w*n,h:t.h*n}),e.setClampRect({x:u,y:c,w:i,h:a}),e.setViewPortRect({x:0,y:0,w:o,h:r})})})},n=function(e,t){var n,u=Yt.fromTag("img");return Un.set(u,"src",t),(n=u.dom(),new Ew(function(e){var t=function(){n.removeEventListener("load",t),e(n)};n.complete?e(n):n.addEventListener("load",t)})).then(function(){return g.getOpt(e).map(function(e){var t=jg({element:u});fh.replaceAt(e,1,P.some(t));var n=c.get(),o={x:0,y:0,w:u.dom().naturalWidth,h:u.dom().naturalHeight};c.set(o);var r,a,i=zz.inflate(o,-20,-20);return m.set(i),n.w===o.w&&n.h===o.h||(r=e,a=u,g.getOpt(r).each(function(e){var t=yf(e.element()),n=Za(e.element()),o=a.dom().naturalWidth,r=a.dom().naturalHeight,i=Math.min(t/o,n/r);1<=i?f.set(1):f.set(i)})),s(e,u),u})})},e=Em.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:wi([Om("image-panel-crop-events",[ei(function(e){g.getOpt(e).each(function(e){var t=function k(s,n,l,o,r){var f,a,t,i,u="tox-",c="tox-crid-"+Vz++;function d(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(e,t,n,o){var r,i,a,u,c;r=t.x,i=t.y,a=t.w,u=t.h,r+=n*e.deltaX,i+=o*e.deltaY,(a+=n*e.deltaW)<20&&(a=20),(u+=o*e.deltaH)<20&&(u=20),c=s=zz.clamp({x:r,y:i,w:a,h:u},l,"move"===e.name),c=d(l,c),f.fire("updateRect",{rect:c}),v(c)}function g(t){function e(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),Cz("#"+c+"-"+e,o).css({left:t.x,top:t.y,width:t.w,height:t.h})}Tz.each(a,function(e){Cz("#"+c+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})}),e("top",{x:n.x,y:n.y,w:n.w,h:t.y-n.y}),e("right",{x:t.x+t.w,y:t.y,w:n.w-t.x-t.w+n.x,h:t.h}),e("bottom",{x:n.x,y:t.y+t.h,w:n.w,h:n.h-t.y-t.h+n.y}),e("left",{x:n.x,y:t.y,w:t.x-n.x,h:t.h}),e("move",t)}function h(e){g(s=e)}function v(e){h(function n(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}(l,e))}return a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],function p(){Cz('<div id="'+c+'" class="'+u+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),Tz.each(i,function(e){Cz("#"+c,o).append('<div id="'+c+"-"+e+'"class="'+u+'croprect-block" style="display: none" data-mce-bogus="all">')}),Tz.each(a,function(e){Cz("#"+c,o).append('<div id="'+c+"-"+e.name+'" class="'+u+"croprect-handle "+u+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),t=Tz.map(a,function e(t){var n;return new Ez(c,{document:o.ownerDocument,handle:c+"-"+t.name,start:function(){n=s},drag:function(e){m(t,n,e.deltaX,e.deltaY)}})}),g(s),Cz(o).on("focusin focusout",function(e){Cz(e.target).attr("aria-grabbed","focus"===e.type)}),Cz(o).on("keydown",function(t){var i;function e(e,t,n,o,r){e.stopPropagation(),e.preventDefault(),m(i,n,o,r)}switch(Tz.each(a,function(e){if(t.target.id===c+"-"+e.name)return i=e,!1}),t.keyCode){case Mz.LEFT:e(t,0,s,-10,0);break;case Mz.RIGHT:e(t,0,s,10,0);break;case Mz.UP:e(t,0,s,0,-10);break;case Mz.DOWN:e(t,0,s,0,10);break;case Mz.ENTER:case Mz.SPACEBAR:t.preventDefault(),r()}})}(),f=Tz.extend({toggleVisibility:function b(e){var t;t=Tz.map(a,function(e){return"#"+c+"-"+e.name}).concat(Tz.map(i,function(e){return"#"+c+"-"+e})).join(","),e?Cz(t,o).show():Cz(t,o).hide()},setClampRect:function y(e){l=e,g(s)},setRect:h,getInnerRect:function e(){return d(l,s)},setInnerRect:v,setViewPortRect:function x(e){n=e,g(s)},destroy:function w(){Tz.each(t,function(e){e.destroy()}),t=[]}},Oz)}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e.element().dom(),function(){});t.toggleVisibility(!1),t.on("updateRect",function(e){var t=e.rect,n=f.get(),o={x:Math.round(t.x/n),y:Math.round(t.y/n),w:Math.round(t.w/n),h:Math.round(t.h/n)};m.set(o)}),d.set(P.some(t))})})])])}],containerBehaviours:wi([fh.config({}),Om("image-panel-events",[ei(function(e){n(e,t)})])])}),g=Jd(e);return{memContainer:g,updateSrc:n,zoom:function(e,t){var n=f.get(),o=0<t?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(o),g.getOpt(e).each(function(e){var t=e.components()[1].element();s(e,t)})},showCrop:function(){d.get().each(function(e){e.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(e){e.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var e=c.get();return{width:e.w,height:e.h}}}},Bz={undo:U(oo("undo")),redo:U(oo("redo")),zoom:U(oo("zoom")),back:U(oo("back")),apply:U(oo("apply")),swap:U(oo("swap")),transform:U(oo("transform")),tempTransform:U(oo("temp-transform")),transformApply:U(oo("transform-apply"))},Dz=U("save-state"),Rz=U("disable"),Fz=U("enable"),Iz={formActionEvent:iS,saveState:Dz,disable:Rz,enable:Fz},_z=function(e,t){return{dom:{tag:"span",innerHtml:ww("icon-"+e,t,U(e)),classes:["tox-tbtn__icon-wrap"]}}},Lz=function(e,t){return{dom:{tag:"span",innerHtml:e,classes:[t+"__select-label"]},behaviours:wi([fh.config({})])}},Nz=function(e,t,n,o,r){void 0===n&&(n=[]);var i={buttonBehaviours:wi([Qw(e.disabled),Nm.config({}),Om("button press",[Gr("click"),Gr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},action:t},a=te(i,{dom:o}),u=te(a,{components:r});return Ml.sketch(u)},Pz=function(e,t,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(function(e){return{"aria-label":e,title:e}}).getOr({})},i=e.icon.map(function(e){return _z(e,n)}),a=ok([i]);return Nz(e,t,o,r,a)},jz=function(e,t,n){void 0===n&&(n=[]);var o={tag:"button",classes:e.primary?["tox-button"]:["tox-button","tox-button--secondary"],innerHtml:e.text};return Nz(e,t,n,o,[])},Uz=function(t,n){return function(e){"custom"===n?ao(e,iS,{name:t,value:{}}):"submit"===n?io(e,aS):"cancel"===n?io(e,rS):console.error("Unknown button type: ",n)}},Wz=function(e,t){var n=Uz(e.name,t);return jz(e,n,[])},Gz=function(e,t,n,o){return Pz({name:e,icon:P.some(e),disabled:t,tooltip:P.some(e)},n,o)},Xz=function(e,t){t?eg.enable(e):eg.disable(e)};function Yz(e,t,n){var o=t.type;function r(t,n){return e.then(function(e){return mm.canvasToDataURL(e,t,n)})}return{getType:U(o),toBlob:function i(){return om.resolve(t)},toDataURL:function a(){return n},toBase64:function u(){return n.split(",")[1]},toAdjustedBlob:function c(t,n){return e.then(function(e){return mm.canvasToBlob(e,t,n)})},toAdjustedDataURL:r,toAdjustedBase64:function s(e,t){return r(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function l(){return e.then(tm.clone)}}}function $z(t){return mm.blobToDataUri(t).then(function(e){return Yz(mm.blobToCanvas(t),t,e)})}var qz={fromBlob:$z,fromCanvas:function IB(t,e){return mm.canvasToBlob(t,e).then(function(e){return Yz(om.resolve(t),e,t.toDataURL())})},fromImage:function _B(e){return mm.imageToBlob(e).then(function(e){return $z(e)})},fromBlobAndUrlSync:function(e,t){return Yz(mm.blobToCanvas(e),e,t)}};function Kz(e,t,n){return n<(e=parseFloat(e))?e=n:e<t&&(e=t),e}var Jz=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function Qz(e,t){var n,o,r,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(o=0;o<5;o++)a[o]=t[o+5*n];for(o=0;o<5;o++){for(r=i=0;r<5;r++)i+=e[o+5*r]*a[r];u[o+5*n]=i}}return u}function Zz(e,n){return n=Kz(n,0,1),e.map(function(e,t){return t%6==0?e=1-(1-e)*n:e*=n,Kz(e,0,1)})}var eO={identity:function LB(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:Zz,multiply:Qz,adjustContrast:function NB(e,t){var n;return t=Kz(t,-1,1),Qz(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?Jz[t]:Jz[Math.floor(t)]*(1-n)+Jz[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function PB(e,t){return Qz(e,[1,0,0,0,t=Kz(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function jB(e,t){var n;return Qz(e,[.3086*(1-(n=1+(0<(t=Kz(t,-1,1))?3*t:t)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function UB(e,t){var n,o;return t=Kz(t,-180,180)/180*Math.PI,Qz(e,[.213+.787*(n=Math.cos(t))+-.213*(o=Math.sin(t)),.715+-.715*n+-.715*o,.072+-.072*n+.928*o,0,0,.213+-.213*n+.143*o,.715+n*(1-.715)+.14*o,.072+-.072*n+-.283*o,0,0,.213+-.213*n+-.787*o,.715+-.715*n+.715*o,.072+.928*n+.072*o,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function WB(e,t,n,o){return Qz(e,[t=Kz(t,0,2),0,0,0,0,0,n=Kz(n,0,2),0,0,0,0,0,o=Kz(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function GB(e,t){return Qz(e,Zz([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=Kz(t,0,1)))},adjustGrayscale:function XB(e,t){return Qz(e,Zz([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=Kz(t,0,1)))}};function tO(t,n){return t.toCanvas().then(function(e){return function i(e,t,n){var o,r=tm.get2dContext(e);return o=function M(e,t){var n,o,r,i,a,u=e.data,c=t[0],s=t[1],l=t[2],f=t[3],d=t[4],m=t[5],g=t[6],h=t[7],v=t[8],p=t[9],b=t[10],y=t[11],x=t[12],w=t[13],k=t[14],S=t[15],C=t[16],z=t[17],O=t[18],T=t[19];for(a=0;a<u.length;a+=4)n=u[a],o=u[a+1],r=u[a+2],i=u[a+3],u[a]=n*c+o*s+r*l+i*f+d,u[a+1]=n*m+o*g+r*h+i*v+p,u[a+2]=n*b+o*y+r*x+i*w+k,u[a+3]=n*S+o*C+r*z+i*O+T;return e}(r.getImageData(0,0,e.width,e.height),n),r.putImageData(o,0,0),qz.fromCanvas(e,t)}(e,t.getType(),n)})}function nO(t,n){return t.toCanvas().then(function(e){return function a(e,t,n){var o,r,i=tm.get2dContext(e);return o=i.getImageData(0,0,e.width,e.height),r=i.getImageData(0,0,e.width,e.height),r=function w(e,t,n){var o,r,i,a,u,c,s,l,f,d,m,g,h,v,p,b,y;function x(e,t,n){return n<e?e=n:e<t&&(e=t),e}for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=e.data,r=t.data,b=e.width,y=e.height,c=0;c<y;c++)for(u=0;u<b;u++){for(s=l=f=0,m=0;m<i;m++)for(d=0;d<i;d++)g=x(u+d-a,0,b-1),h=x(c+m-a,0,y-1),v=4*(h*b+g),p=n[m*i+d],s+=o[v]*p,l+=o[v+1]*p,f+=o[v+2]*p;r[v=4*(c*b+u)]=x(s,0,255),r[v+1]=x(l,0,255),r[v+2]=x(f,0,255)}return t}(o,r,n),i.putImageData(r,0,0),qz.fromCanvas(e,t)}(e,t.getType(),n)})}function oO(c){return function(t,n){return t.toCanvas().then(function(e){return function(e,t,n){var o,r,i=tm.get2dContext(e),a=new Array(256);for(r=0;r<a.length;r++)a[r]=c(r,n);return o=function u(e,t){var n,o=e.data;for(n=0;n<o.length;n+=4)o[n]=t[o[n]],o[n+1]=t[o[n+1]],o[n+2]=t[o[n+2]];return e}(i.getImageData(0,0,e.width,e.height),a),i.putImageData(o,0,0),qz.fromCanvas(e,t)}(e,t.getType(),n)})}}function rO(n){return function(e,t){return tO(e,n(eO.identity(),t))}}function iO(t){return function(e){return nO(e,t)}}var aO,uO,cO,sO={invert:function YB(t){return function(e){return tO(e,t)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:rO(eO.adjustBrightness),hue:rO(eO.adjustHue),saturate:rO(eO.adjustSaturation),contrast:rO(eO.adjustContrast),grayscale:rO(eO.adjustGrayscale),sepia:rO(eO.adjustSepia),colorize:function(e,t,n,o){return tO(e,eO.adjustColors(eO.identity(),t,n,o))},sharpen:iO([0,-1,0,-1,5,-1,0,-1,0]),emboss:iO([-2,-1,0,-1,1,1,0,1,2]),gamma:oO(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:oO(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:tO,convoluteFilter:nO},lO={scale:function $B(e,t,n){var o=nm.getWidth(e),r=nm.getHeight(e),i=t/o,a=n/r,u=!1;(i<.5||2<i)&&(i=i<.5?.5:2,u=!0),(a<.5||2<a)&&(a=a<.5?.5:2,u=!0);var c=function l(u,c,s){return new om(function(e){var t=nm.getWidth(u),n=nm.getHeight(u),o=Math.floor(t*c),r=Math.floor(n*s),i=tm.create(o,r),a=tm.get2dContext(i);a.drawImage(u,0,0,t,n,0,0,o,r),e(i)})}(e,i,a);return u?c.then(function(e){return $B(e,t,n)}):c}},fO={rotate:function qB(t,n){return t.toCanvas().then(function(e){return function u(e,t,n){var o=tm.create(e.width,e.height),r=tm.get2dContext(o),i=0,a=0;return 90!=(n=n<0?360+n:n)&&270!=n||tm.resize(o,o.height,o.width),90!=n&&180!=n||(i=o.width),270!=n&&180!=n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(e,0,0),qz.fromCanvas(o,t)}(e,t.getType(),n)})},flip:function KB(t,n){return t.toCanvas().then(function(e){return function i(e,t,n){var o=tm.create(e.width,e.height),r=tm.get2dContext(o);return"v"==n?(r.scale(1,-1),r.drawImage(e,0,-o.height)):(r.scale(-1,1),r.drawImage(e,-o.width,0)),qz.fromCanvas(o,t)}(e,t.getType(),n)})},crop:function JB(t,n,o,r,i){return t.toCanvas().then(function(e){return function u(e,t,n,o,r,i){var a=tm.create(r,i);return tm.get2dContext(a).drawImage(e,-n,-o),qz.fromCanvas(a,t)}(e,t.getType(),n,o,r,i)})},resize:function QB(t,n,o){return t.toCanvas().then(function(e){return lO.scale(e,n,o).then(function(e){return qz.fromCanvas(e,t.getType())})})}},dO=(function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),o=0,r=0;o<t;o++)r|=this.readByteAt(e+o)<<Math.abs(n+8*o);return r},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return 2147483647<t?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var o=[],r=0;r<n;r++)o[r]=this[e](t+r);return o},e.prototype.length=function(){return this._dv?this._dv.byteLength:0}}(),function(e,t){return fO.rotate(e,t)}),mO=function(e){return sO.invert(e)},gO=function(e){return sO.sharpen(e)},hO=function(e,t){return sO.brightness(e,t)},vO=function(e,t){return sO.contrast(e,t)},pO=function(e,t,n,o){return sO.colorize(e,t,n,o)},bO=function(e,t){return sO.gamma(e,t)},yO=function(e,t){return fO.flip(e,t)},xO=function(e,t,n,o,r){return fO.crop(e,t,n,o,r)},wO=function(e,t,n){return fO.resize(e,t,n)},kO=dO,SO=U([Or("field1Name","field1"),Or("field2Name","field2"),ga("onLockedChange"),la(["lockClass"]),Or("locked",!1),hs("coupledFieldBehaviours",[Hm,af])]),CO=function(e,i){return Ns({factory:mS,name:e,overrides:function(r){return{fieldBehaviours:wi([Om("coupled-input-behaviour",[Xr(Ye(),function(n){var e,t,o;(e=n,t=r,o=i,el(e,t,o).bind(Hm.getCurrent)).each(function(t){el(n,r,"lock").each(function(e){Aa.isOn(e)&&r.onLockedChange()(n,t,e)})})})])])}}})},zO=U([CO("field1","field2"),CO("field2","field1"),Ns({factory:Ml,schema:[gr("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:wi([Aa.config({selected:e.locked(),toggleClass:e.markers().lockClass(),aria:{mode:"pressed"}})])}}})]),OO=Tl({name:"FormCoupledInputs",configFields:SO(),partFields:zO(),factory:function(o,e,t,n){return{uid:o.uid(),dom:o.dom(),components:e,behaviours:te(wi([Hm.config({find:P.some}),af.config({store:{mode:"manual",getValue:function(e){var t,n=il(e,o,["field1","field2"]);return(t={})[o.field1Name()]=af.getValue(n.field1()),t[o.field2Name()]=af.getValue(n.field2()),t},setValue:function(e,t){var n=il(e,o,["field1","field2"]);He(t,o.field1Name())&&af.setValue(n.field1(),t[o.field1Name()]),He(t,o.field2Name())&&af.setValue(n.field2(),t[o.field2Name()])}}})]),vs(o.coupledFieldBehaviours())),apis:{getField1:function(e){return el(e,o,"field1")},getField2:function(e){return el(e,o,"field2")},getLock:function(e){return el(e,o,"lock")}}}},apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),TO=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null===t)return ie.error(e);var n=parseFloat(t[1]),o=t[2];return ie.value({value:n,unit:o})},MO=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1},o=function(e){return Object.prototype.hasOwnProperty.call(n,e)};return e.unit===t?P.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?P.some(e.value):P.some(e.value/n[e.unit]*n[t]):P.none()},HO=function(e){return P.none()},EO=function(e,t){return function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o];if(!r.isSome())return P.none();n.push(r.getOrDie())}return P.some(t.apply(null,n))}([TO(e).toOption(),TO(t).toOption()],function(e,o){return MO(e,o.unit).map(function(e){return o.value/e}).map(function(e){return t=e,n=o.unit,function(e){return MO(e,n).map(function(e){return{value:e*t,unit:n}})};var t,n}).getOr(HO)}).getOr(HO)},VO=function(o,e){var u=HO,r=oo("ratio-event"),t=function(n){var e=mS.parts().field({factory:Im,inputClasses:["tox-textfield"],inputBehaviours:wi([Nm.config({}),Om("size-input-events",[Xr(Ue(),function(e,t){ao(e,r,{isField1:n.isField1})}),Xr($e(),function(e,t){ao(e,nS,{name:o.name})})])])}),t=mS.parts()["aria-descriptor"]({text:n.label});return{dom:{tag:"div"},components:[t,e]}},n=OO.parts().field1(t({label:"Width",isField1:!0})),i=OO.parts().field2(t({label:"Height",isField1:!1})),a=OO.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:xw("icon-lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:xw("icon-unlock",e.icons)}}],buttonBehaviours:wi([Nm.config({})])});return OO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"],innerHtml:"Dimensions"}},{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[n,{dom:{tag:"span",innerHtml:"\xd7"}},i,a]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,i,t){TO(af.getValue(e)).each(function(e){u(e).each(function(e){var t,n,o,r;af.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(t=e).value.toFixed((n=t.unit)in o?o[n]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+t.unit))})})},coupledFieldBehaviours:wi([Om("size-input-events2",[Xr(r,function(e,t){var n=t.event().isField1(),o=n?OO.getField1(e):OO.getField2(e),r=n?OO.getField2(e):OO.getField1(e),i=o.map(af.getValue).getOr(""),a=r.map(af.getValue).getOr("");u=EO(i,a)})])])})},AO=function(r,i){var e=function(e,t,n,o){return jz({name:e,text:e,disabled:n,primary:o},t)},t=function(e,t,n,o){return Pz({name:e,icon:P.some(e),tooltip:P.some(t),disabled:o},n,i.icons)},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},n=P.none(),o=N,a=function(e,t,n){ao(e,t,n)},f=function(e,t){a(e,Bz.transform(),{transform:t})},u=function(e,t){a(e,Bz.tempTransform(),{transform:t})},s=function(e){return function(){L.getOpt(e).each(function(e){fh.set(e,[I])})}},l=function(e,t){a(e,Bz.transformApply(),{transform:t,swap:s(e)})},d=function(){return e("Back",function(e){return a(e,Bz.back(),{swap:s(e)})},!1,!1)},m=function(){return e("Apply",function(e){return a(e,Bz.apply(),{swap:s(e)})},!0,!0)},g=Em.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},e("Apply",function(e){l(e,function(e){var t=r.getRect();return xO(e,t.x,t.y,t.w,t.h)}),r.hideCrop()},!1,!0)]}),h=Jd(VO({name:"size",label:n,colspan:n,type:"sizeinput",constrain:!0},i)),v=Em.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},h.asSpec(),{dom:{tag:"div",classes:["tox-spacer"]}},e("Apply",function(u){h.getOpt(u).each(function(e){var t,n,o=af.getValue(e),r=parseInt(o.width,10),i=parseInt(o.height,10),a=(t=r,n=i,function(e){return wO(e,t,n)});l(u,a)})},!1,!0)]}),p=function(t,n){return function(e){return t(e,n)}},b=p(yO,"h"),y=p(yO,"v"),x=p(kO,-90),w=p(kO,90),k=Em.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},t("flip-horizontally","Flip horizontally",function(e){u(e,b)},!1),t("flip-vertically","Flip vertically",function(e){u(e,y)},!1),t("rotate-left","Rotate counterclockwise",function(e){u(e,x)},!1),t("rotate-right","Rotate clockwise",function(e){u(e,w)},!1),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),S=function(e,t,n,o){var r=Nd.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),i=Nd.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t,maxX:o,getInitialValue:U({x:U(n)})},components:[r,i],sliderBehaviours:wi([Ua.config({})]),onChoose:e})},C=function(e,t,n,o){return Em.sketch({dom:c,components:[d(),(r=e,i=t,a=n,u=o,S(function(e,t,n){var o=p(r,n.x()/100);f(e,o)},i,a,u)),m()]});var r,i,a,u},z=Em.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),O=C(hO,-100,0,100),T=C(vO,-100,0,100),M=C(bO,-100,0,100),H=function(){return S(function(l,e,t){var n=E.getOpt(l),o=A.getOpt(l),r=V.getOpt(l);n.each(function(s){o.each(function(c){r.each(function(e){var t,n,o,r=af.getValue(s).x()/100,i=af.getValue(e).x()/100,a=af.getValue(c).x()/100,u=(t=r,n=i,o=a,function(e){return pO(e,t,n,o)});f(l,u)})})})},0,100,200)},E=Jd(H()),V=Jd(H()),A=Jd(H()),B=Em.sketch({dom:c,components:[d(),E.asSpec(),V.asSpec(),A.asSpec(),m()]}),D=function(t,n,o){return function(e){a(e,Bz.swap(),{transform:n,swap:function(){L.getOpt(e).each(function(e){fh.set(e,[t]),o(e)})}})}},R=P.some(gO),F=P.some(mO),I=Em.sketch({dom:c,components:[t("crop","Crop",D(g,n,function(e){r.showCrop()}),!1),t("resize","Resize",D(v,n,function(e){h.getOpt(e).each(function(e){var t=r.getMeasurements(),n=t.width,o=t.height;af.setValue(e,{width:n,height:o})})}),!1),t("orientation","Orientation",D(k,n,o),!1),t("brightness","Brightness",D(O,n,o),!1),t("sharpen","Sharpen",D(z,R,o),!1),t("contrast","Contrast",D(T,n,o),!1),t("color-levels","Color levels",D(B,n,o),!1),t("gamma","Gamma",D(M,n,o),!1),t("invert","Invert",D(z,F,o),!1)]}),_=Em.sketch({dom:{tag:"div"},components:[I],containerBehaviours:wi([fh.config({})])}),L=Jd(_);return{memContainer:L,getApplyButton:function(e){return L.getOpt(e).map(function(e){var t=e.components()[0];return t.components()[t.components().length-1]})}}},BO=function(){return rn.getOrDie("URL")},DO=function(e){return BO().createObjectURL(e)},RO=function(e){BO().revokeObjectURL(e)},FO=function(e){var t=Ee(e),n=Ee(P.none()),r=function s(){var n=[],o=-1;function e(){return 0<o}function t(){return-1!==o&&o<n.length-1}return{data:n,add:function r(e){var t;return t=n.splice(++o),n.push(e),{state:e,removed:t}},undo:function i(){if(e())return n[--o]},redo:function a(){if(t())return n[++o]},canUndo:e,canRedo:t}}();r.add(e);var i=function(e){t.set(e)},a=function(e){return{blob:e,url:DO(e)}},u=function(e){RO(e.url)},o=function(){n.get().each(u),n.set(P.none())},c=function(e){var t=a(e);i(t);var n,o=r.add(t).removed;return n=o,Tz.each(n,u),t.url};return{getBlobState:function(){return t.get()},setBlobState:i,addBlobState:c,getTempState:function(){return n.get().fold(function(){return t.get()},function(e){return e})},updateTempState:function(e){var t=a(e);return o(),n.set(P.some(t)),t.url},addTempState:function(e){var t=a(e);return n.set(P.some(t)),t.url},applyTempState:function(t){return n.get().fold(function(){},function(e){c(e.blob),t()})},destroyTempState:o,undo:function(){var e=r.undo();return i(e),e.url},redo:function(){var e=r.redo();return i(e),e.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},IO=function(e){return qz.fromBlob(e)},_O=function(e,t){var n,o,r,a=FO(e.currentState),i=function(e){var t=a.getHistoryStates();h.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),ao(e,Iz.formActionEvent,{name:Iz.saveState(),value:t.undoEnabled})},u=function(e){return e.toBlob()},c=function(e){ao(e,Iz.formActionEvent,{name:Iz.disable(),value:{}})},s=function(e){v.getApplyButton(e).each(function(e){eg.enable(e)}),ao(e,Iz.formActionEvent,{name:Iz.enable(),value:{}})},l=function(e,t){return c(e),g.updateSrc(e,t)},f=function(t,e,n,o,r){return c(t),IO(e).then(n).then(u).then(o).then(function(e){return l(t,e).then(function(e){return i(t),r(),s(t),e})})["catch"](function(e){console.log(e),s(t)})},d=function(e,t,n){var o=a.getBlobState().blob;f(e,o,t,function(e){return a.updateTempState(e)},n)},m=function(e){var t=a.getBlobState().url;return a.destroyTempState(),i(e),t},g=Az(e.currentState.url),h=(o=Jd(Gz("undo",!0,function(e){ao(e,Bz.undo(),{direction:1})},(n=t).icons)),r=Jd(Gz("redo",!0,function(e){ao(e,Bz.redo(),{direction:1})},n.icons)),{container:Em.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),Gz("zoom-in",!1,function(e){ao(e,Bz.zoom(),{direction:1})},n.icons),Gz("zoom-out",!1,function(e){ao(e,Bz.zoom(),{direction:-1})},n.icons)]}),updateButtonUndoStates:function(e,t,n){o.getOpt(e).each(function(e){Xz(e,t)}),r.getOpt(e).each(function(e){Xz(e,n)})}}),v=AO(g,t);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),g.memContainer.asSpec(),h.container],behaviours:wi([af.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),Om("image-tools-events",[Xr(Bz.undo(),function(t,e){var n=a.undo();l(t,n).then(function(e){s(t),i(t)})}),Xr(Bz.redo(),function(t,e){var n=a.redo();l(t,n).then(function(e){s(t),i(t)})}),Xr(Bz.zoom(),function(e,t){var n=t.event().direction();g.zoom(e,n)}),Xr(Bz.back(),function(e,t){var n,o;o=m(n=e),l(n,o).then(function(e){s(n)}),t.event().swap()(),g.hideCrop()}),Xr(Bz.apply(),function(e,t){a.applyTempState(function(){m(e),t.event().swap()()})}),Xr(Bz.transform(),function(e,t){return d(e,t.event().transform(),N)}),Xr(Bz.tempTransform(),function(e,t){return n=e,o=t.event().transform(),r=a.getTempState().blob,void f(n,r,o,function(e){return a.addTempState(e)},N);var n,o,r}),Xr(Bz.transformApply(),function(e,t){return n=e,o=t.event().transform(),r=t.event().swap(),i=a.getBlobState().blob,void f(n,i,o,function(e){var t=a.addBlobState(e);return m(n),t},r);var n,o,r,i}),Xr(Bz.swap(),function(t,e){var n;n=t,h.updateButtonUndoStates(n,!1,!1);var o=e.event().transform(),r=e.event().swap();o.fold(function(){r()},function(e){d(t,e,r)})})]),oz()])}},LO=Ol({name:"HtmlSelect",configFields:[gr("options"),ms("selectBehaviours",[Ua,af]),Or("selectClasses",[]),Or("selectAttributes",{}),wr("data")],factory:function(n,e){var t=V(n.options(),function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}}),o=n.data().map(function(e){return Oe("initialValue",e)}).getOr({});return te({uid:n.uid(),dom:{tag:"select",classes:n.selectClasses(),attributes:n.selectAttributes()},components:t,behaviours:te(wi([Ua.config({}),af.config({store:te({mode:"manual",getValue:function(e){return Bm(e.element())},setValue:function(e,t){F(n.options(),function(e){return e.value===t}).isSome()&&Am(e.element(),t)}},o)})]),gs(n.selectBehaviours()))})}}),NO=function(n){var e=n.label.map(WS),t=[ds.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(e){return io(e,aS),P.some(!0)}}),Om("textfield-change",[Xr(Ye(),function(e,t){ao(e,nS,{name:n.name})}),Xr(Qe(),function(e,t){ao(e,nS,{name:n.name})})]),Nm.config({})],o=n.validation.map(function(o){return uC.config({getRoot:function(e){return yn.parent(e.element())},invalidClass:"tox-invalid",validator:{validate:function(e){var t=af.getValue(e),n=o.validator(t);return kb.pure(!0===n?ie.value(t):ie.error(n))},validateOnLoad:o.validateOnLoad}})}).toArray(),r=mS.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:{},inputClasses:[n.classname],inputBehaviours:wi(j([t,o])),factory:Im}),i=n.flex?["tox-form__group--stretched"]:[];return NS(e,r,i)},PO=undefined&&undefined.__assign||function(){return(PO=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},jO=function(i){return PO({},i,{toCached:function(){return jO(i.toCached())},bindFuture:function(t){return jO(i.bind(function(e){return e.fold(function(e){return kb.pure(ie.error(e))},function(e){return t(e)})}))},bindResult:function(t){return jO(i.map(function(e){return e.bind(t)}))},mapResult:function(t){return jO(i.map(function(e){return e.map(t)}))},foldResult:function(t,n){return i.map(function(e){return e.fold(t,n)})},withTimeout:function(e,r){return jO(kb.nu(function(t){var n=!1,o=window.setTimeout(function(){n=!0,t(ie.error(r()))},e);i.get(function(e){n||(window.clearTimeout(o),t(e))})}))}})},UO=function(e){return jO(kb.nu(e))},WO=UO,GO={type:"separator"},XO=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:function(){}}},YO=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:N},onAction:function(){}}},$O=function(e,t){return o=e,n=B(t,function(e){return e.type===o}),V(n,XO);var n,o},qO=function(e,t){var n=e.toLowerCase();return B(t,function(e){return-1!==(e.meta!==undefined&&e.meta.text!==undefined?e.meta.text:e.value).toLowerCase().indexOf(n)})},KO=function(c,e,s){var t=af.getValue(e),l=t.meta.text!==undefined?t.meta.text:t.value;return s.getLinkInformation().fold(function(){return[]},function(e){var t,n,o,r,i,a,u=qO(l,(t=s.getHistory(c),V(t,function(e){return YO(e,e)})));return"file"===c?(n=[u,qO(l,(a=e,$O("header",a.targets))),j([(i=e,i.anchorTop.map(function(e){return YO("<top>",e)}).toArray()),qO(l,(r=e,$O("anchor",r.targets))),(o=e,o.anchorBottom.map(function(e){return YO("<bottom>",e)}).toArray())])],R(n,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(GO,t)},[])):u})},JO=function(r,i,o){var e,a=function(e){var t=af.getValue(e);o.addToHistory(t.value,r.filetype)},t=mS.parts().field({factory:LS,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],minChars:0,responseTime:0,fetch:function(e){var t=KO(r.filetype,e,o),n=YS(t,zw.BUBBLE_TO_SANDBOX,i.providers);return kb.pure(n)},getHotspot:function(e){return f.getOpt(e)},typeaheadBehaviours:wi(j([o.getValidationHandler().map(function(o){return uC.config({getRoot:function(e){return yn.parent(e.element())},invalidClass:"tox-status-invalid",notify:{},validator:{validate:function(t){var n=af.getValue(t);return WO(function(e){o({type:r.filetype,url:n.value},function(n){f.getOpt(t).each(function(e){var t=function(e,t,n){(n?Pi.add:Pi.remove)(e.element(),t)};t(e,"tox-status-valid","valid"===n.status),t(e,"tox-status-unknown","unknown"===n.status)}),e(("invalid"===n.status?ie.error:ie.value)(n.message))})})}}})}).toArray(),[Nm.config({}),Om("urlinput-events",j(["file"===r.filetype?[Xr(Ye(),function(e){ao(e,nS,{name:r.name})})]:[],[Xr($e(),function(e){ao(e,nS,{name:r.name}),a(e)})]]))]])),eventOrder:(e={},e[Ye()]=["streaming","urlinput-events","invalidating"],e),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:Ik(0,0,"normal")},onExecute:function(e,t,n){ao(t,aS,{})},onItemExecute:function(e,t,n,o){a(e),ao(e,nS,{name:r.name})}}),n=r.label.map(WS),u=function(e,t){return void 0===t&&(t=e),{dom:{tag:"span",classes:["tox-icon","tox-status-icon__"+e],innerHtml:xw("icon-"+t,i.providers.icons)}}},c=Jd({dom:{tag:"span",classes:["tox-status"]},components:[u("checkmark"),u("warning"),u("error","warning")]}),s=o.getUrlPicker(r.filetype),l=oo("browser.url.event"),f=Jd({dom:{tag:"div",classes:["tox-input-wrap"]},components:[t,c.asSpec()]});return mS.sketch({dom:US([]),components:n.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:j([[f.asSpec()],s.map(function(){return t=l,e="tox-browse-url",n="icon-browse",o=i.providers,Ml.sketch({dom:{tag:"button",classes:["tox-tbtn",e],innerHtml:xw(n,o.icons)},action:function(e){io(e,t)}});var t,e,n,o}).toArray()])}]),fieldBehaviours:wi([Om("url-input-events",[Xr(l,function(o){Hm.getCurrent(o).each(function(t){var n=af.getValue(t);s.each(function(e){e(n).get(function(e){af.setValue(t,e),ao(o,nS,{name:r.name})})})})})])])})},QO=function(r){return function(t,n,o){return ze(n,"name").fold(function(){return r(n,o)},function(e){return t.field(e,r(n,o))})}},ZO={collection:QO(function(a){var e,t,n=a.label.map(WS),o=function(n){return function(t,e){du(e.event().target(),"[data-collection-item-value]").each(function(e){n(t,e,Un.get(e,"data-collection-item-value"))})}},r=[Xr(je(),o(function(e,t){Ki(t)})),Xr(qe(),o(function(e,t,n){ao(e,iS,{name:a.name,value:n})})),Xr(Ue(),o(function(e,t,n){fu(e.element(),"."+jw).each(function(e){Pi.remove(e,jw)}),Pi.add(t,jw)})),Xr(We(),o(function(e,t,n){fu(e.element(),"."+jw).each(function(e){Pi.remove(e,jw)})})),oi(o(function(e,t,n){ao(e,iS,{name:a.name,value:n})}))],i=mS.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:b},behaviours:wi([fh.config({}),af.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,e){var t,n,r,i;t=o,n=V(e,function(e){var t,n=1===a.columns?e.text.map(function(e){return'<span class="tox-collection__item-label">'+e+"</span>"}).getOr(""):"",o=e.icon.map(function(e){return'<span class="tox-collection__item-icon">'+e+"</span>"}).getOr("");return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(t=e.value)?"&quot;":t)+'">'+o+n+"</div>"}),r=1<a.columns&&"auto"!==a.columns?E(n,a.columns):[n],i=V(r,function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"}),En(t.element(),i.join("")),"auto"===a.columns&&Vk(o,5,"tox-collection__item").each(function(e){var t=e.numRows,n=e.numColumns;ds.setGridSize(o,t,n)}),io(o,lS)}}),Nm.config({}),ds.config((e=a.columns,t="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:"color"===t?"."+Iw:"."+Fw}})),Om("collection-events",r)])});return NS(n,i,["tox-form__group--collection"])}),alloy:QO(b),alertbanner:QO(function(e,t){return n=e,o=t.shared.providers,Em.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:xw("icon-"+n.icon,o.icons)}},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:n.text}},Ml.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],innerHtml:xw("icon-close",o.icons)},action:function(e){ao(e,iS,{name:"alert-banner",value:n.url})}})]});var n,o}),input:QO(function(e){return NO({name:e.name,multiline:!1,label:e.label,flex:!1,classname:"tox-textfield",validation:P.none()})}),textarea:QO(function(e){return NO({name:e.name,multiline:!0,label:e.label,flex:e.flex,classname:"tox-textarea",validation:P.none()})}),listbox:QO(function(e){var t=WS(e.label),n=mS.parts().field({factory:LO,dom:{classes:["mce-select-field"]},selectBehaviours:wi([Nm.config({})]),options:e.values,data:e.initialValue.getOr(undefined)});return PS(P.some(t),n)}),label:QO(function(e){return{dom:{tag:"label",innerHtml:e.html},behaviours:wi([oz(),fh.config({}),mz(P.some(e.html))])}}),iframe:(aO=function(e){var o,r,t=Sz&&e.sandboxed,n=t?{sandbox:"allow-scripts"}:{},i=(o=t,r=Ee(""),{getValue:function(e){return r.get()},setValue:function(e,t){if(o)Un.set(e.element(),"src","data:text/html;charset=utf-8,"+encodeURIComponent(t));else{Un.set(e.element(),"src","javascript:''");var n=e.element().dom().contentWindow.document;n.open(),n.write(t),n.close()}r.set(t)}}),a=e.label.map(WS),u=mS.parts().field({factory:{sketch:function(e){return kz({uid:e.uid,dom:{tag:"iframe",attributes:te(n)},behaviours:wi([Nm.config({}),Ua.config({}),dz(P.none(),i.getValue,i.setValue)])})}}}),c=e.flex?["tox-form__group--stretched"]:[];return NS(a,u,c)},function(e,t,n){var o=te(t,{source:"dynamic"});return QO(aO)(e,o,n)}),autocomplete:QO(function(e,t){return r=e,i=t.shared,n=WS(r.label.getOr("?")),o=mS.parts().field({factory:LS,dismissOnBlur:!1,inputClasses:["tox-textfield"],minChars:1,fetch:function(e){var t=af.getValue(e),n=r.getItems(t),o=YS(n,zw.BUBBLE_TO_SANDBOX,i.providers);return kb.pure(o)},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:Ik(0,0,"normal")}}),PS(P.some(n),o);var r,i,n,o}),button:QO(function(e){var t=Uz(e.name,"custom");return jz(e,t,[gz(""),oz()])}),checkbox:QO(function(e,t){return n=e,o=t.shared.providers,r=af.config({store:{mode:"manual",getValue:function(e){var t=e.element().dom();return t.indeterminate?"indeterminate":t.checked?"checked":"unchecked"},setValue:function(e,t){var n=e.element().dom();switch(t){case"indeterminate":n.indeterminate=!0;break;case"checked":n.checked=!0,n.indeterminate=!1;break;default:n.checked=!1,n.indeterminate=!1}}}}),i=function(e){return e.element().dom().click(),P.some(!0)},a=mS.parts().field({factory:{sketch:b},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:wi([oz(),Nm.config({}),Ua.config({}),r,ds.config({mode:"special",onEnter:i,onSpace:i}),Om("checkbox-events",[Xr($e(),function(e,t){ao(e,nS,{name:n.name})})])])}),u=mS.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:n.label},behaviours:wi([El.config({})])}),s=Jd({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(c=function(e){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e],innerHtml:xw("icon-"+("checked"===e?"selected":"unchecked"===e?"unselected":"indeterminate"),o.icons)}}})("checked"),c("unchecked"),c("indeterminate")]}),mS.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,s.asSpec(),u]});var n,o,r,i,a,u,c,s}),colorinput:QO(function(e,t){return MC(e,t.shared,t.colorinput)}),colorpicker:QO(function(e){var t=function(e){return"tox-"+e},n=nz(uz,t),r=Jd(n.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(e){ao(e,iS,{name:"hex-valid",value:!0})},onInvalidHex:function(e){ao(e,iS,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:wi([af.config({store:{mode:"manual",getValue:function(e){var t=r.get(e);return Hm.getCurrent(t).bind(function(e){return af.getValue(e).hex}).map(function(e){return"#"+e}).getOr("")},setValue:function(e,t){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),o=r.get(e);Hm.getCurrent(o).fold(function(){console.log("Can not find form")},function(e){af.setValue(e,{hex:P.from(n[1]).getOr("")}),rg.getField(e,"hex").each(function(e){io(e,Ye())})})}}}),oz()])}}),dropzone:QO(function(r){var t=function(e,t){t.stop()},n=function(e){return function(t,n){A(e,function(e){e(t,n)})}},o=function(e,t){if(!eg.isDisabled(e)){var n=t.event().raw();a(e,n.dataTransfer.files)}},i=function(e,t){var n=t.event().raw().target.files;a(e,n)},a=function(e,t){var n,o;af.setValue(e,(n=t,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),B(Q(n),function(e){return o.test(e.name)}))),ao(e,nS,{name:r.name})},u=Jd({dom:{tag:"input",attributes:{type:"file",multiple:"multiple"},styles:{display:"none"}},behaviours:wi([Om("input-file-events",[Jr(qe())])])}),e=r.label.map(WS),c=mS.parts().field({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:wi([gz([]),oz(),eg.config({}),Aa.config({toggleClass:"dragenter",toggleOnExecute:!1}),Om("dropzone-events",[Xr("dragenter",n([t,Aa.toggle])),Xr("dragleave",n([t,Aa.toggle])),Xr("dragover",t),Xr("drop",n([t,o])),Xr($e(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:"Drop Image Here"}},Ml.sketch({dom:{tag:"button",innerHtml:"Browse",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(e){u.get(e).element().dom().click()},buttonBehaviours:wi([Nm.config({})])})]}]}}}}),s=r.flex?["tox-form__group--stretched"]:[];return NS(e,c,s)}),grid:QO(function(e,t){return n=e,o=t.shared,{dom:{tag:"div",classes:["tox-form","tox-form--"+n.columns+"col"]},components:V(n.items,o.interpreter)};var n,o}),selectbox:QO(function(e,t){return n=e,o=t.shared.providers,r=n.label.map(WS),i=mS.parts().field({dom:{},selectAttributes:{size:n.size},options:n.items,factory:LO,selectBehaviours:wi([Nm.config({}),Om("selectbox-change",[Xr($e(),function(e,t){ao(e,nS,{name:n.name})})])])}),a=1<n.size?P.none():P.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:xw("icon-chevron-down",o.icons)}}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:j([[i],a.toArray()])},mS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:j([r.toArray(),[u]])});var n,o,r,i,a,u}),sizeinput:QO(function(e,t){return VO(e,t.shared.providers)}),urlinput:QO(function(e,t){return JO(e,t.shared,t.urlinput)}),customeditor:QO(function(t){var n=Ee(P.none()),o=Jd({dom:{tag:t.tag}}),r=Ee(P.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:wi([Om("editor-foo-events",[ei(function(e){o.getOpt(e).each(function(e){t.init(e.element().dom()).then(function(t){r.get().each(function(e){t.setValue(e)}),r.set(P.none()),n.set(P.some(t))})})})]),af.config({store:{mode:"manual",getValue:function(){return n.get().fold(function(){return r.get().getOr("")},function(e){return e.getValue()})},setValue:function(e,t){n.get().fold(function(){r.set(P.some(t))},function(e){return e.setValue(t)})}}}),oz()]),components:[o.asSpec()]}}),htmlpanel:QO(function(e){return Em.sketch({dom:{tag:"div",innerHtml:e.html}})}),imagetools:QO(function(e,t){return _O(e,t.shared.providers)})},eT={field:function(e,t){return t}},tT=function(t,e,n){var o=te(n,{shared:{interpreter:function(e){return nT(t,e,o)}}});return nT(t,e,o)},nT=function(t,n,o){return ze(ZO,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(e){return e(t,n,o)})},oT=cl,rT=Gs,iT=oo("toolbar.button.execute"),aT={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},uT=oo("update-menu-text"),cT=function(e,t,n){var o=e.text.map(function(e){return Jd(Lz(e,t))}),r=function(e,t){var n=af.getValue(e);return Ua.focus(n),ao(n,"keydown",{raw:t.event().raw()}),P.some(!0)};return Jd(lC.sketch({role:e.role,dom:{tag:"button",classes:[t,t+"--select"].concat(V(e.classes,function(e){return t+"--"+e}))},components:ok([e.icon.map(function(e){return _z(e,n.providers.icons)}),o.map(function(e){return e.asSpec()}),P.some({dom:{tag:"div",classes:[t+"__select-chevron"],innerHtml:xw("icon-chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:wi([El.config({}),fh.config({}),Om("menubutton-update-display-text",[ei(e.onAttach),ti(e.onDetach),Xr(uT,function(t,n){o.bind(function(e){return e.getOpt(t)}).each(function(e){fh.set(e,[Pg(n.event().text())])})})])]),eventOrder:te(aT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:wi([ds.config({mode:"special",onLeft:r,onRight:r})]),lazySink:n.getSink,toggleClass:t+"--active",parts:{menu:Ik(0,e.columns,e.presets)},fetch:function(){return kb.nu(e.fetch)}})).asSpec()},sT=function(e,t,n){var o={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return te(e,o)},lT=function(s,e,l,f){var d=function(e){return V(e,function(e){var t,n,o,r,i,a,u=ae(e);if(He(e,"items")){var c=d(e.items);return te((i=e,a={type:"submenu",isSelected:U(!1),getStylePreview:function(){return P.none()}},te(i,a)),{getStyleItems:function(){return c}})}return He(e,"format")?sT(e,l,f):1===u.length&&M(u,"title")?te(e,{type:"separator"}):(n=oo((t=e).title),o={type:"formatter",format:n,isSelected:l(n),getStylePreview:f(n)},r=te(t,o),s.formatter.register(n,r),r)})};return d(e)},fT=function(e,t,n,o){var r,i,a,u,c,s="basic"===n.type?function(){return V(n.data,function(e){return sT(e,o.isSelectedFor,o.getPreviewFor)})}:n.getData;return{items:(r=e,i=o,a=function(t,n,e){return"separator"===t.type?{type:"separator",text:t.title}:"submenu"===t.type?{type:"menuitem",text:t.title,disabled:e,getSubmenuItems:function(){return W(t.getStyleItems(),function(e){return u(e,n)})}}:t.getStylePreview().fold(function(){return{type:"togglemenuitem",text:t.title,active:t.isSelected(),disabled:!1,onAction:i.onAction(t)}},function(e){return{type:"styleitem",item:{type:"togglemenuitem",text:t.title,disabled:!1,active:t.isSelected(),onAction:i.onAction(t),meta:e}}})},u=function(e,t){var n="formatter"===e.type&&!r.formatter.canApply(e.format);return 0===t?n?[]:[a(e,t,!1)]:[a(e,t,n)]},c=function(e){return W(e,function(e){return u(e,1)})},{validateItems:c,getFetch:function(o,r){return function(e){var t=r(),n=c(t);e(YS(n,zw.CLOSE_ON_EXECUTE,o.shared.providers))}}}),getStyleItems:s}},dT=function(n,e,t,o){var r=fT(n,0,t,o),i=r.items,a=r.getStyleItems;return cT({text:P.some(""),icon:P.none(),role:"button",fetch:i.getFetch(e,a),onAttach:o.nodeChangeHandler.map(function(t){return function(e){return n.on("nodeChange",t(e))}}).getOr(function(){}),onDetach:o.nodeChangeHandler.map(function(t){return function(e){return n.off("nodeChange",t(e))}}).getOr(function(){}),columns:1,presets:"normal",classes:["bespoke"]},"tox-tbtn",e.shared)},mT=function(n,e,t){var o=t.parents,r=e();return Ae(o,function(t){return F(r,function(e){return n.formatter.matchNode(t,e.format)})}).orThunk(function(){return n.formatter.match("p")?P.some({title:"Paragraph",format:"p"}):P.none()})};(cO=uO||(uO={}))[cO.SemiColon=0]="SemiColon",cO[cO.Space=1]="Space";var gT,hT,vT,pT,bT,yT,xT=function(e,t,n,o){var r,i,a=ze(e.settings,t).getOr(n);return{type:"basic",data:(i=a,r=o===uO.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),V(r,function(e){var t=e,n=e,o=e.split("=");return 1<o.length&&(t=o[0],n=o[1]),{title:t,format:n}}))}},wT=function(n){var e=P.some(function(t){return function(e){mT(n,function(){return o.data},e).map(function(e){return e.title}).each(function(e){ao(t,uT,{text:e})})}}),o=xT(n,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",uO.SemiColon);return{isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getPreviewFor:function(t){return function(){var e=n.formatter.get(t);return P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:n.formatter.getCssText(t)})}},onAction:function(e){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(e.format)?n.formatter.remove(e.format):n.formatter.apply(e.format)})}},nodeChangeHandler:e,dataset:o}},kT=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],ST=function(e){return V(e,function(e){return n=e,Object.prototype.hasOwnProperty.call(n,"items")?{title:e.title,items:ST(e.items)}:(t=e,Object.prototype.hasOwnProperty.call(t,"block")?{title:e.title,format:e.block}:e);var t,n})},CT=function(e){return(t=e,ze(t.settings,"style_formats")).map(ST).getOr(kT);var t},zT=function(r){return{isSelectedFor:function(e){return function(){return r.formatter.match(e)}},getPreviewFor:function(t){return function(){var e=r.formatter.get(t);return e!==undefined?P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:r.formatter.getCssText(t)}):P.none()}},onAction:function(e){return function(){r.undoManager.transact(function(){r.focus(),r.formatter.match(e.format)?r.formatter.remove(e.format):r.formatter.apply(e.format)})}},nodeChangeHandler:P.some(function(t){var n=function(e){var t=e.items;return t!==undefined&&0<t.length?W(t,n):[{title:e.title,format:e.format}]},o=W(CT(r),n);return function(e){mT(r,function(){return o},e).map(function(e){return e.title}).each(function(e){ao(t,uT,{text:e})})}})}},OT=function(r){var o=function(){var n=function(e){return e?e.split(",")[0]:""},e=r.queryCommandValue("FontName"),t=i.data,o=e?e.toLowerCase():"";return F(t,function(e){var t=e.format;return t.toLowerCase()===o||n(t).toLowerCase()===n(o).toLowerCase()})},e=P.some(function(n){return function(){var e=r.queryCommandValue("FontName"),t=o().fold(function(){return e},function(e){return e.title});ao(n,uT,{text:t})}}),i=xT(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",uO.SemiColon);return{isSelectedFor:function(t){return function(){return o().exists(function(e){return e.format===t})}},getPreviewFor:function(e){return function(){return P.some({tag:"div",styleAttr:-1===e.indexOf("dings")?"font-family:"+e:""})}},onAction:function(e){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,e.format)})}},nodeChangeHandler:e,dataset:i}},TT=function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,o=t||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):e;var n,o,r},MT=function(i){var a=function(){var n=P.none(),o=u.data,r=i.queryCommandValue("FontSize");if(r)for(var e=function(e){var t=TT(r,e);n=F(o,function(e){return e.format===r||e.format===t})},t=3;n.isNone()&&0<=t;t--)e(t);return{matchOpt:n,px:r}},e=P.some(function(r){return function(){var e=a(),t=e.matchOpt,n=e.px,o=t.fold(function(){return n},function(e){return e.title});ao(r,uT,{text:o})}}),u=xT(i,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",uO.Space);return{isSelectedFor:function(t){return function(){return a().matchOpt.exists(function(e){return e.format===t})}},getPreviewFor:function(){return function(){return P.none()}},onAction:function(e){return function(){i.undoManager.transact(function(){i.focus(),i.execCommand("FontSize",!1,e.format)})}},nodeChangeHandler:e,dataset:u}},HT={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table",items:"inserttable tableprops deletetable row column cell"},help:{title:"Help",items:"help"}},ET=function(e,t,n,o){return cT({text:e.text,icon:e.icon,role:o,fetch:function(t){e.fetch(function(e){t(YS(e,zw.CLOSE_ON_EXECUTE,n.providers))})},onAttach:function(){},onDetach:function(){},columns:1,presets:"normal",classes:[]},t,n)},VT={formats:function(e,t){var n=t.styleselect,o=fT(e,0,n,zT(e));return{type:"menuitem",text:"Formats",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},blockformats:function(e,t){var n=wT(e),o=fT(e,0,n.dataset,n);return{type:"menuitem",text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},fontformats:function(e,t){var n=OT(e),o=fT(e,0,n.dataset,n);return{type:"menuitem",text:"Fonts",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},fontsizes:function(e,t){var n=MT(e),o=fT(e,0,n.dataset,n);return{type:"menuitem",text:"Font Sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}}},AT=function(e){return"string"==typeof e?e.split(" "):e},BT=function(a,u,c){var s=ne(HT,u.menus),t=0<ae(u.menus).length,e=u.menubar===undefined||!0===u.menubar?AT("file edit view insert format tools table"):AT(!1===u.menubar?"":u.menubar),n=B(e,function(e){return t&&u.menus.hasOwnProperty(e)&&u.menus[e].hasOwnProperty("items")||HT.hasOwnProperty(e)}),o=V(n,function(e){var t,n,o,r,i=s[e];return t={title:i.title,items:AT(i.items)},n=u,o=a,r=c,{text:t.title,getItems:function(){return W(t.items,function(e){return 0===e.trim().length?[]:"separator"===e||"|"===e?[{type:"separator"}]:n.menuItems[e]?[n.menuItems[e]]:VT[e]?[VT[e](o,r)]:[]})}}});return B(o,function(e){return 0<e.getItems().length})},DT=Ol({factory:function(o,e){var t={focus:ds.focusIn,setMenus:function(e,t){var n=V(t,function(t){var e={text:P.some(t.text),icon:P.none(),fetch:function(e){e(t.getItems())}};return ET(e,"tox-mbtn",{getSink:o.getSink(),providers:o.providers()},"menuitem")});fh.set(e,n)}};return{uid:o.uid(),dom:o.dom(),components:[],behaviours:wi([fh.config({}),Om("menubar-events",[ei(function(e){o.onSetup()(e)}),Xr(je(),function(n,e){fu(n.element(),".tox-mbtn--active").each(function(t){du(e.event().target(),".tox-mbtn").each(function(e){dn(t,e)||n.getSystem().getByDom(t).each(function(t){n.getSystem().getByDom(e).each(function(e){lC.expand(e),lC.close(t),Ua.focus(e)})})})})}),Xr(jt(),function(n,e){e.event().prevFocus().bind(function(e){return n.getSystem().getByDom(e).toOption()}).each(function(t){e.event().newFocus().bind(function(e){return n.getSystem().getByDom(e).toOption()}).each(function(e){lC.isOpen(t)&&(lC.expand(e),lC.close(t))})})})]),ds.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return o.onEscape()(e),P.some(!0)}})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[gr("dom"),gr("uid"),gr("onEscape"),gr("getSink"),gr("providers"),Or("onSetup",N)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),RT=function(n,t){return yn.offsetParent(n).orThunk(function(){var e=Yt.fromTag("span");Sn.before(n,e);var t=yn.offsetParent(e);return Tn.remove(e),t}).map(function(e){return wy.absolute(e).translate(-t.left(),-t.top())}).getOrThunk(function(){return cf(0,0)})},FT=me([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),IT=function(t){return function(e){return e.translate(-t.left(),-t.top())}},_T=function(t){return function(e){return e.translate(t.left(),t.top())}},LT=function(n){return function(e,t){return R(n,function(e,t){return t(e)},cf(e,t))}},NT=function(e,t,n){return e.fold(LT([_T(n),IT(t)]),LT([IT(t)]),LT([]))},PT=function(e,t,n){return e.fold(LT([_T(n)]),LT([]),LT([_T(t)]))},jT=function(e,t,n){return e.fold(LT([]),LT([IT(n)]),LT([_T(t),IT(n)]))},UT=function(e,t,n){return e.fold(function(e,t){return{position:"absolute",left:e+"px",top:t+"px"}},function(e,t){return{position:"absolute",left:e-n.left()+"px",top:t-n.top()+"px"}},function(e,t){return{position:"fixed",left:e+"px",top:t+"px"}})},WT=FT.offset,GT=FT.absolute,XT=FT.fixed,YT=function(e,t){Pi.add(e.element(),t.transitionClass()),Pi.remove(e.element(),t.fadeOutClass()),Pi.add(e.element(),t.fadeInClass())},$T=function(e,t){Pi.add(e.element(),t.transitionClass()),Pi.remove(e.element(),t.fadeInClass()),Pi.add(e.element(),t.fadeOutClass())},qT=function(e,t){return e.y()>=t.y()&&e.bottom()<=t.bottom()},KT=function(e,t){return Un.has(e,t)?P.some(parseInt(Un.get(e,t),10)):P.none()},JT=function(o,r,i){return(a=o,e=r,t=a.element(),KT(t,e.leftAttr()).bind(function(o){return KT(t,e.topAttr()).map(function(e){var t=yf(a.element()),n=Za(a.element());return Iy(o,e,t,n)})})).bind(function(e){return qT(e,i)?(t=r,n=o.element(),Un.remove(n,t.leftAttr()),Un.remove(n,t.topAttr()),P.some(GT(e.x(),e.y()))):P.none();var t,n});var a,e,t},QT=function(e,t,n,o,r){var i=wy.absolute(e.element()),a=Iy(i.left(),i.top(),yf(e.element()),Za(e.element()));if(qT(a,n))return P.none();u=e,c=t,s=i.left(),l=i.top(),f=u.element(),Un.set(f,c.leftAttr(),s),Un.set(f,c.topAttr(),l);var u,c,s,l,f,d=GT(i.left(),i.top()),m=NT(d,o,r),g=GT(n.x(),n.y()),h=NT(g,o,r),v=a.y()<=n.y()?h.top():h.top()+n.height()-a.height();return P.some(XT(m.left(),v))},ZT=function(s,e,t){var l=e.lazyViewport()(s);e.contextual().each(function(c){c.lazyContext()(s).each(function(e){var t,n,o,r,i,a,u=(t=e,n=wy.absolute(t),o=xf(t),r=eu(t),Iy(n.left(),n.top(),o,r));a=l,((i=u).y()<a.bottom()&&i.bottom()>a.y()?YT:$T)(s,c)})});var n,o,r,i,a,u=yn.owner(s.element()),c=Sy(u),f=RT(s.element(),c);(n=s,o=e,r=l,i=c,a=f,Ka.getRaw(n.element(),"position").is("fixed")?JT(n,o,r):QT(n,o,r,i,a)).each(function(e){var t=UT(e,0,f);Ka.setAll(s.element(),t)})},eM=Object.freeze({refresh:ZT}),tM=Object.freeze({events:function(o,e){return Ur([Xr(Ke(),function(t,n){o.contextual().each(function(e){dn(t.element(),n.event().target())&&(Pi.remove(t.element(),e.transitionClass()),n.stop())})}),Xr(_t(),function(e,t){ZT(e,o)})])}}),nM=[Cr("contextual",[gr("fadeInClass"),gr("fadeOutClass"),gr("transitionClass"),gr("lazyContext")]),Or("lazyViewport",function(e){var t=Sy();return Iy(t.left(),t.top(),window.innerWidth,window.innerHeight)}),gr("leftAttr"),gr("topAttr")],oM=Si({fields:nM,name:"docking",active:tM,apis:eM}),rM="data-initial-z-index",iM=function(e,t){var n;e.getSystem().addToGui(t),n=t,yn.parent(n.element()).each(function(t){Ka.getRaw(t,"z-index").each(function(e){Un.set(t,rM,e)}),Ka.set(t,"z-index",Ka.get(n.element(),"z-index"))})},aM=function(e){var t;t=e,yn.parent(t.element()).each(function(e){var t=Un.get(e,rM);Un.has(e,rM)?Ka.set(e,"z-index",t):Ka.remove(e,"z-index"),Un.remove(e,rM)}),e.getSystem().removeFromGui(e)},uM=function(e,t,n,o){return(r=e,i=t,a=r.element(),u=parseInt(Un.get(a,i.leftAttr()),10),c=parseInt(Un.get(a,i.topAttr()),10),isNaN(u)||isNaN(c)?P.none():P.some(cf(u,c))).fold(function(){return n},function(e){return XT(e.left()+o.left(),e.top()+o.top())});var r,i,a,u,c},cM=function(e,t,n,o,r,i){var a,u,c,s=uM(e,t,n,o),l=lM(e,t,s,r,i),f=NT(s,r,i);return a=t,u=f,c=e.element(),Un.set(c,a.leftAttr(),u.left()+"px"),Un.set(c,a.topAttr(),u.top()+"px"),l.fold(function(){return{coord:XT(f.left(),f.top()),extra:P.none()}},function(e){return{coord:e.output(),extra:e.extra()}})},sM=function(e,t){var n,o;n=t,o=e.element(),Un.remove(o,n.leftAttr()),Un.remove(o,n.topAttr())},lM=function(e,t,h,v,p){var n=t.getSnapPoints()(e);return Ae(n,function(e){var t,n,o,r,i,a,u,c,s,l,f,d,m,g=e.sensor();return t=h,n=g,o=e.range().left(),r=e.range().top(),u=PT(t,i=v,a=p),c=PT(n,i,a),Math.abs(u.left()-c.left())<=o&&Math.abs(u.top()-c.top())<=r?P.some({output:U((s=e.output(),l=h,f=v,d=p,m=function(o,r){return function(e,t){var n=o(l,f,d);return r(e.getOr(n.left()),t.getOr(n.top()))}},s.fold(m(jT,FT.offset),m(PT,FT.absolute),m(NT,FT.fixed)))),extra:e.extra}):P.none()})},fM=function(n,e,i,a,u,c){return e.fold(function(){var e,n,o,t=(e=i,n=c.left(),o=c.top(),e.fold(function(e,t){return FT.offset(e+n,t+o)},function(e,t){return FT.absolute(e+n,t+o)},function(e,t){return FT.fixed(e+n,t+o)})),r=NT(t,a,u);return XT(r.left(),r.top())},function(t){var e=cM(n,t,i,c,a,u);return e.extra.each(function(e){t.onSensor()(n,e)}),e.coord})},dM=function(e,t,n){var o,r=t.getTarget()(e.element());if(t.repositionTarget()){var i=yn.owner(e.element()),a=Sy(i),u=RT(r,a),c=(o=r,Ka.getRaw(o,"left").bind(function(n){return Ka.getRaw(o,"top").bind(function(t){return Ka.getRaw(o,"position").map(function(e){return("fixed"===e?XT:WT)(parseInt(n,10),parseInt(t,10))})})}).getOrThunk(function(){var e=wy.absolute(o);return GT(e.left(),e.top())})),s=fM(e,t.snaps(),c,a,u,n),l=UT(s,0,u);Ka.setAll(r,l)}t.onDrag()(e,r,n)},mM=Cr("snaps",[gr("getSnapPoints"),da("onSensor"),gr("leftAttr"),gr("topAttr"),Or("lazyViewport",function(){var e=Sy();return{x:e.left,y:e.top,width:U(window.innerWidth),height:U(window.innerHeight),bottom:U(e.top()+window.innerHeight),right:U(e.left()+window.innerWidth)}})]),gM=Object.freeze({getData:function(e){return P.from(cf(e.x(),e.y()))},getDelta:function(e,t){return cf(t.left()-e.left(),t.top()-e.top())}}),hM=[Or("useFixed",!1),gr("blockerClass"),Or("getTarget",b),Or("onDrag",N),Or("repositionTarget",!0),da("onDrop"),mM,va("dragger",{handlers:function(u,c){return Ur([Xr(_e(),function(t,e){if(0===e.event().raw().button){e.stop();var n,o={drop:function(){i()},delayDrop:function(){a.schedule()},forceDrop:function(){i()},move:function(e){a.cancel(),c.update(gM,e).each(function(e){dM(t,u,e)})}},r=t.getSystem().build(Em.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[u.blockerClass()]},events:(n=o,Ur([Xr(_e(),n.forceDrop),Xr(Pe(),n.drop),Xr(Le(),function(e,t){n.move(t.event())}),Xr(Ne(),n.delayDrop)]))})),i=function(){aM(r),u.snaps().each(function(e){sM(t,e)});var e=u.getTarget()(t.element());u.onDrop()(t,e)},a=tv(i,200);c.reset(),iM(t,r)}})])}})],vM=Object.freeze({getData:function(e){var t,n=e.raw().touches;return 1===n.length?(t=n[0],P.some(cf(t.clientX,t.clientY))):P.none()},getDelta:function(e,t){return cf(t.left()-e.left(),t.top()-e.top())}}),pM=hM,bM=[Or("useFixed",!1),Or("getTarget",b),Or("onDrag",N),Or("repositionTarget",!0),Or("onDrop",N),mM,va("dragger",{handlers:function(o,r){return Ur([Qr(De()),Xr(Re(),function(t,e){e.stop(),r.update(vM,e.event()).each(function(e){dM(t,o,e)})}),Xr(Fe(),function(t,e){o.snaps().each(function(e){sM(t,e)});var n=o.getTarget()(t.element());r.reset(),o.onDrop()(t,n)})])}})],yM=Object.freeze({mouse:pM,touch:bM}),xM=Object.freeze({init:function(){var i=P.none(),e=U({});return xi({readState:e,reset:function(){i=P.none()},update:function(r,e){return r.getData(e).bind(function(e){return t=r,n=e,o=i.map(function(e){return t.getDelta(e,n)}),i=P.some(n),o;var t,n,o})}})}}),wM=zi({branchKey:"mode",branches:yM,name:"dragging",active:{events:function(e,t){return e.dragger().handlers(e,t)}},extra:{snap:en(["sensor","range","output"],["extra"])},state:xM}),kM={getData:function(e){var t=e.raw().touches;if(t.length<2)return P.none();var n=Math.abs(t[0].clientX-t[1].clientX),o=Math.abs(t[0].clientY-t[1].clientY),r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));return P.some({deltaX:U(n),deltaY:U(o),deltaDistance:U(r)})},getDelta:function(e,t){var n=t.deltaX()-e.deltaX(),o=t.deltaY()-e.deltaY(),r=t.deltaDistance()-e.deltaDistance();return{deltaX:U(n),deltaY:U(o),deltaDistance:U(r)}}},SM=Object.freeze({events:function(i,t){return Ur([Gr(Ie()),Xr(Re(),function(r,e){e.stop(),t.update(kM,e.event()).each(function(e){var t=0<e.deltaDistance()?1:-1,n=t*Math.abs(e.deltaX()),o=t*Math.abs(e.deltaY());(1===t?i.onPunch():i.onPinch())(r.element(),n,o)})}),Xr(Fe(),t.reset)])}}),CM=[gr("onPinch"),gr("onPunch")],zM=(Si({fields:CM,name:"pinching",active:SM,state:xM}),Object.freeze({getState:function(e,t,n){return n}})),OM=Object.freeze({events:function(r,i){var o=function(n,o){r.updateState().each(function(e){var t=e(n,o);i.set(t)}),r.renderComponents().each(function(e){var t=e(o,i.get());wo(n),A(t,function(e){po(n,n.getSystem().build(e))})})};return Ur([Xr(Ht(),function(e,t){var n=r.channel();M(t.channels(),n)&&o(e,t.data())}),ei(function(t,e){r.initialData().each(function(e){o(t,e)})})])}}),TM=Object.freeze({init:function(e){var t=Ee(P.none());return{readState:function(){return t.get().getOr("none")},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(P.none())}}}}),MM=[gr("channel"),wr("renderComponents"),wr("updateState"),wr("initialData")],HM=Si({fields:MM,name:"reflecting",active:OM,apis:zM,state:TM}),EM=[gr("lazySink"),gr("tooltipDom"),Or("exclusive",!0),Or("tooltipComponents",[]),Or("delay",300)],VM=Object.freeze({init:function(){var n=Ee(P.none()),t=Ee(P.none()),o=function(){n.get().each(function(e){clearTimeout(e)})},e=U("not-implemented");return xi({getTooltip:function(){return t.get()},isShowing:function(){return t.get().isSome()},setTooltip:function(e){t.set(P.some(e))},clearTooltip:function(){t.set(P.none())},clearTimer:o,resetTimer:function(e,t){o(),n.set(P.some(setTimeout(function(){e()},t)))},readState:e})}}),AM=oo("tooltip.exclusive"),BM=oo("tooltip.show"),DM=oo("tooltip.hide"),RM=function(e,t,n){e.getSystem().broadcastOn([AM],{})},FM=Object.freeze({hideAllExclusive:RM}),IM=Object.freeze({events:function(o,r){var n=function(){r.getTooltip().each(function(e){xo(e),r.clearTooltip()}),r.clearTimer()};return Ur([Xr(Ht(),function(e,t){M(t.channels(),AM)&&n()}),Xr(Ue(),function(e){io(e,BM)}),Xr(Mt(),function(e){io(e,DM)}),Xr(BM,function(e){r.resetTimer(function(){!function(t){if(!r.isShowing()){RM(t);var e=o.lazySink()(t).getOrDie(),n=t.getSystem().build({dom:o.tooltipDom(),components:o.tooltipComponents(),events:Ur([Xr(je(),function(e){io(t,BM)}),Xr(Ne(),function(e){io(t,DM)})])});r.setTooltip(n),po(e,n),tw.position(e,{anchor:"hotspot",hotspot:t,layouts:{onLtr:U([yx,bx,gx,vx,hx,px]),onRtl:U([yx,bx,gx,vx,hx,px])}},n)}}(e)},o.delay())}),Xr(DM,function(e){r.resetTimer(function(){n()},o.delay())}),Xr(je(),function(e){io(e,BM)}),Xr(Ne(),function(e){io(e,DM)}),ti(function(e){n()})])}}),_M=(Si({fields:EM,name:"tooltipping",active:IM,state:VM,apis:FM}),oo("dom-data"),jo([gr("root"),yr("dispatchers",[gr("getTarget"),gr("alloyConfig")]),Or("insertion",function(e,t){Sn.append(e,t.element())})]),U([la(["closedClass","openClass","shrinkingClass","growingClass","expandedClass","collapsedClass"]),da("onShrunk"),da("onGrown"),ms("expandableBehaviours",[af])])),LM=U([Ns({schema:[gr("dom")],name:"minimal"}),Ns({schema:[gr("dom")],name:"extra",overrides:function(o){return{behaviours:wi([qp.config({dimension:{property:"height"},closedClass:o.markers().closedClass(),openClass:o.markers().openClass(),shrinkingClass:o.markers().shrinkingClass(),growingClass:o.markers().growingClass(),expanded:!0,onStartShrink:function(n){Zi(n.element()).each(function(e){var t=n.getSystem().getByUid(o.uid()).getOrDie();ds.focusIn(t)}),n.getSystem().getByUid(o.uid()).each(function(e){Pi.remove(e.element(),o.markers().expandedClass()),Pi.add(e.element(),o.markers().collapsedClass())})},onStartGrow:function(e){e.getSystem().getByUid(o.uid()).each(function(e){Pi.add(e.element(),o.markers().expandedClass()),Pi.remove(e.element(),o.markers().collapsedClass())})},onShrunk:function(e){o.onShrunk()(e)},onGrown:function(e){o.onGrown()(e)},getAnimationRoot:function(e){return e.getSystem().getByUid(o.uid()).getOrDie().element()}})])}}}),Ns({factory:Ml,schema:[gr("dom")],name:"expander",overrides:function(e){return{action:(t=e,n=qp.toggleGrow,function(e){el(e,t,"extra").each(n)})};var t,n}}),Ns({schema:[gr("dom")],name:"controls"})]),NM=function(t,n){return function(e){el(e,t,"extra").each(n)}},PM=(Tl({name:"ExpandableForm",configFields:_M(),partFields:LM(),factory:function(n,e,t,o){var r=function(e){return il(e,n,["minimal","extra"])};return{uid:n.uid(),dom:n.dom(),components:e,behaviours:te(wi([af.config({store:{mode:"manual",getValue:function(e){var t=r(e),n=af.getValue(t.minimal()),o=af.getValue(t.extra());return te(n,o)},setValue:function(e,t){var n=r(e);af.setValue(n.minimal(),t),af.setValue(n.extra(),t)}}})]),gs(n.expandableBehaviours())),apis:{toggleForm:NM(n,qp.toggleGrow),collapseForm:NM(n,qp.shrink),collapseFormImmediately:NM(n,qp.immediateShrink),expandForm:NM(n,qp.grow),getField:function(e,t){return el(e,n,"minimal").bind(function(e){return rg.getField(e,t)}).orThunk(function(){return el(e,n,"extra").bind(function(e){return rg.getField(e,t)})})}}}},apis:{getField:function(e,t,n){return e.getField(t,n)},toggleForm:function(e,t){e.toggleForm(t)},collapseForm:function(e,t){e.collapseForm(t)},collapseFormImmediately:function(e,t){e.collapseFormImmediately(t)},expandForm:function(e,t){e.expandForm(t)}}}),U([gr("choices"),ms("chooserBehaviours",[ds,Ru,Hm,af]),la(["choiceClass","selectedClass"])])),jM=U([Ns({name:"legend",defaults:function(e){return{dom:{tag:"legend"}}}}),Us({factory:{sketch:function(e){return ke(e,["value"])}},name:"choices",unit:"choice",overrides:function(e,t){return{dom:{attributes:{role:"radio"}},behaviours:wi([af.config({store:{mode:"memory",initialValue:t.value}}),Ua.config({})]),domModification:{classes:[e.markers().choiceClass()]},events:_a(P.none())}}})]),UM=(Tl({name:"FormChooser",configFields:PM(),partFields:jM(),factory:function(a,e,t,n){return{uid:a.uid(),dom:a.dom(),components:e,behaviours:te(wi([ds.config({mode:"flow",selector:"."+a.markers().choiceClass(),executeOnMove:!0,getInitial:function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})},execute:function(t,e,n){return t.getSystem().getByDom(n).map(function(e){return Ru.highlight(t,e),!0}).toOption().map(function(e){return!0})}}),Ru.config({itemClass:a.markers().choiceClass(),highlightClass:a.markers().selectedClass(),onHighlight:function(e,t){Un.set(t.element(),"aria-checked","true")},onDehighlight:function(e,t){Un.set(t.element(),"aria-checked","false")}}),Hm.config({find:P.some}),af.config({store:{mode:"manual",setValue:function(t,e){var n,o,r,i;(n=t,o=e,r=uu(n.element(),"."+a.markers().choiceClass()),i=V(r,function(e){return n.getSystem().getByDom(e).getOrDie()}),F(i,function(e){return af.getValue(e)===o})).each(function(e){Ru.highlight(t,e)})},getValue:function(e){return Ru.getHighlighted(e).map(af.getValue)}}})]),gs(a.chooserBehaviours())),events:Ur([Kr(Et(),Ru.highlight),ei(Ru.highlightFirst)])}}}),function(e,t){var n=P.from(Un.get(e,"id")).fold(function(){var e=oo("dialog-label");return Un.set(t,"id",e),e},b);Un.set(e,"aria-labelledby",n)}),WM=U([gr("lazySink"),wr("dragBlockClass"),Or("useTabstopAt",U(!0)),Or("eventOrder",{}),ms("modalBehaviours",[ds]),ma("onExecute"),ha("onEscape")]),GM={sketch:b},XM=U([js({name:"draghandle",overrides:function(e,t){return{behaviours:wi([wM.config({mode:"mouse",getTarget:function(e){return lu(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass().getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+Do(t,null,2)).message)})])}}}),Ns({schema:[gr("dom")],name:"title"}),Ns({factory:GM,schema:[gr("dom")],name:"close"}),Ns({factory:GM,schema:[gr("dom")],name:"body"}),Ns({factory:GM,schema:[gr("dom")],name:"footer"}),Ps({factory:{sketch:function(e,t){return ne(e,{dom:t.dom(),components:t.components()})}},schema:[Or("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Or("components",[])],name:"blocker"})]),YM=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},$M=Tl({name:"ModalDialog",configFields:WM(),partFields:XM(),factory:function(o,e,t,r){var u=oo("alloy.dialog.busy"),c=oo("alloy.dialog.idle"),s=wi([ds.config({mode:"special",focusIn:P.some,onTab:function(){return P.some(!0)},onShiftTab:function(){return P.some(!0)}}),Ua.config({})]),n=oo("modal-events"),i=YM({},o.eventOrder(),{"alloy.system.attached":[n].concat(o.eventOrder()["alloy.system.attached"]||[])});return{uid:o.uid(),dom:te({attributes:{role:"dialog"}},o.dom()),components:e,apis:{show:function(i){var e=o.lazySink()().getOrDie(),a=Ee(P.none()),t=r.blocker(),n=e.getSystem().build(te(t,{components:t.components.concat([Wg(i)]),behaviours:wi([Om("dialog-blocker-events",[Xr(c,function(e,t){Un.has(i.element(),"aria-busy")&&(Un.remove(i.element(),"aria-busy"),a.get().each(function(e){return fh.remove(i,e)}))}),Xr(u,function(e,t){Un.set(i.element(),"aria-busy","true");var n=t.event().getBusySpec();a.get().each(function(e){fh.remove(i,e)});var o=n(i,s),r=e.getSystem().build(o);a.set(P.some(r)),fh.append(i,Wg(r)),r.hasConfigured(ds)&&ds.focusIn(r)})])])}));po(e,n),ds.focusIn(i)},hide:function(t){yn.parent(t.element()).each(function(e){t.getSystem().getByDom(e).each(function(e){xo(e)})})},getBody:function(e){return tl(e,o,"body")},getFooter:function(e){return tl(e,o,"footer")},setIdle:function(e){io(e,c)},setBusy:function(e,t){ao(e,u,{getBusySpec:t})}},eventOrder:i,behaviours:te(wi([fh.config({}),ds.config({mode:"cyclic",onEnter:o.onExecute(),onEscape:o.onEscape(),useTabstopAt:o.useTabstopAt()}),Om(n,[ei(function(e){UM(e.element(),tl(e,o,"title").element())})])]),gs(o.modalBehaviours()))}},apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),qM=U([gr("toggleClass"),gr("fetch"),ga("onExecute"),Or("getHotspot",P.some),Or("layouts",P.none()),ga("onItemExecute"),wr("lazySink"),gr("dom"),da("onOpen"),ms("splitDropdownBehaviours",[pS,ds,Ua]),Or("matchWidth",!1),Or("useMinWidth",!1)].concat(FS())),KM=Ns({factory:Ml,schema:[gr("dom")],name:"arrow",defaults:function(e){return{dom:{attributes:{role:"button","aria-haspopup":!0}},buttonBehaviours:wi([Ua.revoke()])}},overrides:function(t){return{action:function(e){e.getSystem().getByUid(t.uid()).each(uo)},buttonBehaviours:wi([Aa.config({toggleOnExecute:!1,toggleClass:t.toggleClass(),aria:{mode:"pressed"}})])}}}),JM=Ns({factory:Ml,schema:[gr("dom")],name:"button",defaults:function(e){return{dom:{attributes:{role:"button"}},buttonBehaviours:wi([Ua.revoke()])}},overrides:function(n){return{action:function(t){t.getSystem().getByUid(n.uid()).each(function(e){n.onExecute()(e,t)})}}}}),QM=U([KM,JM,Ps({schema:[sa()],name:"menu",defaults:function(o){return{onExecute:function(t,n){t.getSystem().getByUid(o.uid()).each(function(e){o.onItemExecute()(e,t,n)})}}}}),CS()]),ZM=Tl({name:"SplitDropdown",configFields:qM(),partFields:QM(),factory:function(n,e,t,o){var r=function(e){Hm.getCurrent(e).each(function(e){Ru.highlightFirst(e),ds.focusIn(e)})},i=function(e){MS(n,function(e){return e},e,o,r,Pk.HighlightFirst).get(N)},a=function(e){var t=tl(e,n,"button");return uo(t),P.some(!0)},u=_a(P.some(i));return te({uid:n.uid(),dom:n.dom(),components:e,eventOrder:{"alloy.execute":["toggling","alloy.base.behaviour"]},events:u,behaviours:te(wi([pS.config({others:{sandbox:function(e){var t=tl(e,n,"arrow");return ES(n,e,{onOpen:function(){Aa.on(t)},onClose:function(){Aa.off(t)}})}}}),ds.config({mode:"special",onSpace:a,onEnter:a,onDown:function(e){return i(e),P.some(!0)}}),Ua.config({})]),gs(n.splitDropdownBehaviours()))},{dom:{attributes:{role:"presentation"}}})}}),eH=$t("within","extra","withinWidth"),tH=function(e,t,o){var n,r=(n=function(e,t){var n=o(e);return P.some({element:U(e),start:U(t),finish:U(t+n),width:U(n)})},R(e,function(t,e){return n(e,t.len).fold(U(t),function(e){return{len:e.finish(),list:t.list.concat([e])}})},{len:0,list:[]}).list),i=B(r,function(e){return e.finish()<=t}),a=D(i,function(e,t){return e+t.width()},0),u=r.slice(i.length);return{within:U(i),extra:U(u),withinWidth:U(a)}},nH=function(e){return V(e,function(e){return e.element()})},oH=function(e,t,n,o){var r,i,a,u,c,s,l,f,d,m,g,h,v=(r=e,i=t,a=n,u=tH(i,r,a),0===u.extra().length?P.some(u):P.none()).getOrThunk(function(){return tH(t,e-n(o),n)}),p=v.within(),b=v.extra(),y=v.withinWidth();return 1===b.length&&b[0].width()<=n(o)?(m=b,g=y,h=nH(p.concat(m)),eH(h,[],g)):1<=b.length?(s=b,l=o,f=y,d=nH(p).concat([l]),eH(d,nH(s),f)):(c=y,eH(nH(p),[],c))},rH=U([la(["closedClass","openClass","shrinkingClass","growingClass"]),ms("splitToolbarBehaviours",[]),Br("builtGroups",function(){return Ee([])})]),iH=[gr("dom")],aH=U([Ns({factory:xp,schema:iH,name:"primary"}),Ns({factory:xp,schema:iH,name:"overflow",overrides:function(e){return{toolbarBehaviours:wi([qp.config({dimension:{property:"height"},closedClass:e.markers().closedClass(),openClass:e.markers().openClass(),shrinkingClass:e.markers().shrinkingClass(),growingClass:e.markers().growingClass()})])}}}),Ps({name:"overflow-button"}),Ps({name:"overflow-group"})]),uH=function(e,t){var n=V(t,function(e){return Wg(e)});xp.setGroups(e,n)},cH=function(e,t,n){var o=il(e,t,["primary","overflow"]),r=o.primary(),i=o.overflow();Ka.set(r.element(),"visibility","hidden"),xp.setGroups(i,[]);var a=t.builtGroups().get(),u=Sp.sketch(te(n["overflow-group"](),{items:[Ml.sketch(te(n["overflow-button"](),{action:function(e){qp.toggleGrow(o.overflow())}}))]})),c=e.getSystem().build(u);uH(r,a.concat([c]));var s=yf(r.element()),l=oH(s,a,function(e){return yf(e.element())},c);0===l.extra().length?(fh.remove(r,c),xp.setGroups(i,[])):(uH(r,l.within()),uH(i,l.extra())),Ka.remove(r.element(),"visibility"),Ka.reflow(r.element())},sH=(Tl({name:"SplitToolbar",configFields:rH(),partFields:aH(),factory:function(o,e,t,r){return te({dom:{attributes:{role:"group"}}},{uid:o.uid(),dom:o.dom(),components:e,behaviours:gs(o.splitToolbarBehaviours()),apis:{setGroups:function(e,t){var n;n=V(t,e.getSystem().build),o.builtGroups().set(n),cH(e,o,r)},refresh:function(e){cH(e,o,r)}}})},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)}}}),Ol({name:"TabButton",configFields:[Or("uid",undefined),gr("value"),qo("dom","dom",Eo(function(e){return{attributes:{role:"tab",id:oo("aria"),"aria-selected":"false"}}}),cr()),wr("action"),Or("domModification",{}),ms("tabButtonBehaviours",[Ua,ds,af]),gr("view")],factory:function(e,t){return{uid:e.uid(),dom:e.dom(),components:e.components(),events:_a(e.action()),behaviours:te(wi([Ua.config({}),ds.config({mode:"execution",useSpace:!0,useEnter:!0}),af.config({store:{mode:"memory",initialValue:e.value()}})]),gs(e.tabButtonBehaviours())),domModification:e.domModification()}}})),lH=U([gr("tabs"),gr("dom"),Or("clickToDismiss",!1),ms("tabbarBehaviours",[Ru,ds]),la(["tabClass","selectedClass"])]),fH=Us({factory:sH,name:"tabs",unit:"tab",overrides:function(o,e){var r=function(e,t){Ru.dehighlight(e,t),ao(e,Gt(),{tabbar:e,button:t})},i=function(e,t){Ru.highlight(e,t),ao(e,Wt(),{tabbar:e,button:t})};return{action:function(e){var t=e.getSystem().getByUid(o.uid()).getOrDie(),n=Ru.isHighlighted(t,e);(n&&o.clickToDismiss()?r:n?N:i)(t,e)},domModification:{classes:[o.markers().tabClass()]}}}}),dH=U([fH]),mH=Tl({name:"Tabbar",configFields:lH(),partFields:dH(),factory:function(e,t,n,o){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"tablist"}},e.dom()),components:t,"debug.sketcher":"Tabbar",behaviours:te(wi([Ru.config({highlightClass:e.markers().selectedClass(),itemClass:e.markers().tabClass(),onHighlight:function(e,t){Un.set(t.element(),"aria-selected","true")},onDehighlight:function(e,t){Un.set(t.element(),"aria-selected","false")}}),ds.config({mode:"flow",getInitial:function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})},selector:"."+e.markers().tabClass(),executeOnMove:!0})]),gs(e.tabbarBehaviours()))}}}),gH=Ol({name:"Tabview",configFields:[ms("tabviewBehaviours",[fh])],factory:function(e,t){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"tabpanel"}},e.dom()),behaviours:te(wi([fh.config({})]),gs(e.tabviewBehaviours()))}}}),hH=U([Or("selectFirst",!0),da("onChangeTab"),da("onDismissTab"),Or("tabs",[]),ms("tabSectionBehaviours",[])]),vH=Ns({factory:mH,schema:[gr("dom"),br("markers",[gr("tabClass"),gr("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs()}}}),pH=Ns({factory:gH,name:"tabview"}),bH=U([vH,pH]),yH=Tl({name:"TabSection",configFields:hH(),partFields:bH(),factory:function(i,e,t,n){var o=function(e,t){el(e,i,"tabbar").each(function(e){t(e).each(uo)})};return{uid:i.uid(),dom:i.dom(),components:e,behaviours:gs(i.tabSectionBehaviours()),events:Ur(j([i.selectFirst()?[ei(function(e,t){o(e,Ru.getFirst)})]:[],[Xr(Wt(),function(e,t){var o,r,n=t.event().button();o=n,r=af.getValue(o),el(o,i,"tabview").each(function(n){F(i.tabs(),function(e){return e.value===r}).each(function(e){var t=e.view();Un.set(n.element(),"aria-labelledby",Un.get(o.element(),"id")),fh.set(n,t),i.onChangeTab()(n,o,t)})})}),Xr(Gt(),function(e,t){var n=t.event().button();i.onDismissTab()(e,n)})]])),apis:{getViewItems:function(e){return el(e,i,"tabview").map(function(e){return fh.contents(e)}).getOr([])},showTab:function(e,n){o(e,function(t){var e=Ru.getCandidates(t);return F(e,function(e){return af.getValue(e)===n}).filter(function(e){return!Ru.isHighlighted(t,e)})})}}}},apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),xH=function(t,n,o){var e,r,i,a=yn.owner(t.element());return(e=a,r=n,i=o,P.from(e.dom().elementFromPoint(r,i)).map(Yt.fromDom)).filter(function(e){return t.element().dom().contains(e.dom())}).filter(function(e){return(_n.isText(e)?yn.parent(e):P.some(e)).exists(function(e){var t=e.dom().getBoundingClientRect();return n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom})})},wH=U([gr("dom"),gr("fetch"),da("onOpen"),ma("onExecute"),da("onTap"),da("onHoverOn"),da("onHoverOff"),da("onMiss"),ms("touchmenuBehaviours",[Aa,El,pS]),gr("toggleClass"),wr("lazySink"),wr("role"),Or("eventOrder",{}),Or("matchWidth",!0),Or("useMinWidth",!1),da("onClosed"),wr("menuTransition"),Or("getAnchor",function(e){var t=wy.absolute(e.element()),n=yf(e.element()),o=Za(e.element());return{anchor:"makeshift",x:t.left()+n/2,y:t.top()+o/2,layouts:{onLtr:function(){return[yx,bx]},onRtl:function(){return[yx,bx]}}}})].concat(FS())),kH=U([Ps({schema:[ca()],name:"menu"}),Ps({schema:[gr("dom")],name:"view"}),CS()]),SH=(Tl({name:"TouchMenu",configFields:wH(),partFields:kH(),factory:function(i,e,t,a){var r=function(e){var t=pS.getCoupled(e,"sandbox");return fw.getState(t)},n=Ee(!1),u=function(e){!1===n.get()&&c(e)},c=function(e){i.onHoverOn()(e),n.set(!0)},s=function(e){!0===n.get()&&(i.onHoverOff()(e),n.set(!1))};return te({uid:i.uid(),dom:i.dom(),components:e,behaviours:te(wi([Aa.config({toggleClass:i.toggleClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),El.config({}),pS.config({others:{sandbox:function(o){return pw.sketch(te(a.view(),{lazySink:HS(o,i),inlineBehaviours:wi([Om("execute-for-menu",[oi(function(t,e){var n=e.event().target();t.getSystem().getByDom(n).each(function(e){i.onExecute()(o,t,e,af.getValue(e))})})]),zh.config({initialState:"closed",destinationAttr:"data-longpress-destination",stateAttr:"data-longpress-state",routes:zh.createBistate("open","closed",i.menuTransition().map(function(e){return Oe("transition",e)}).getOr({})),onFinish:function(e,t){"closed"===t&&(pw.hide(e),i.onClosed()(o,e))}})]),onShow:function(e){zh.progressTo(e,"open")}}))}}})]),gs(i.touchmenuBehaviours())),events:Ur([Wr(Be(),U(!0)),Xr(De(),function(e,t){Aa.on(e)}),Xr(At(),function(e,t){i.onTap()(e)}),Xr(Dt(),function(r,e){i.fetch()(r).get(function(e){c(r);var t=ih.sketch(te(a.menu(),{items:e})),n=pS.getCoupled(r,"sandbox"),o=i.getAnchor()(r);pw.showAt(n,o,t)})}),Xr(Re(),function(t,n){var o=n.event().raw().touches[0];r(t).each(function(e){xH(e,o.clientX,o.clientY).fold(function(){Ru.dehighlightAll(e),Qi().each(Ji),xH(t,o.clientX,o.clientY).fold(U(s),U(u))(t)},function(e){so(t,e,je(),{x:o.clientX,y:o.clientY}),s(t)}),n.stop()})}),Xr(Fe(),function(e,t){r(e).each(function(e){Ru.getHighlighted(e).each(uo)});var n=pS.getCoupled(e,"sandbox");zh.progressTo(n,"closed"),Aa.off(e)}),ti(function(e,t){var n=pS.getCoupled(e,"sandbox");pw.hide(n)})]),eventOrder:te(i.eventOrder(),{"alloy.execute":["toggling","alloy.base.behaviour"]})},{dom:{attributes:{role:i.role().getOr("button")}}})}}),"container"),CH=[ms("slotBehaviours",[])],zH=function(e){return"<alloy.field."+e+">"},OH=function(r,e,t){var n,o=function(e){return rl(r)},i=function(n,o){return void 0===o&&(o=undefined),function(e,t){return el(e,r,t).map(function(e){return n(e,t)}).getOr(o)}},a=function(e,t){return"true"!==Un.get(e.element(),"aria-hidden")},u=i(a,!1),c=i(function(e,t){if(a(e)){var n=e.element();Ka.set(n,"display","none"),Un.set(n,"aria-hidden","true"),ao(e,Ut(),{name:t,visible:!1})}}),s=(n=c,function(t,e){A(e,function(e){return n(t,e)})}),l=i(function(e,t){if(!a(e)){var n=e.element();Ka.remove(n,"display"),Un.remove(n,"aria-hidden"),ao(e,Ut(),{name:t,visible:!0})}}),f={getSlotNames:o,getSlot:function(e,t){return el(e,r,t)},isShowing:u,hideSlot:c,hideAllSlots:function(e){return s(e,o())},showSlot:l};return{"debug.sketcher":{SlotContainer:t},uid:r.uid(),dom:r.dom(),components:e,behaviours:gs(r.slotBehaviours()),apis:f}},TH=se({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},dl),MH=te(TH,{sketch:function(e){var n,t=(n=[],{slot:function(e,t){return n.push(e),qs(SH,zH(e),t)},record:function(){return n}}),o=e(t),r=t.record(),i=V(r,function(e){return Ns({name:e,pname:zH(e)})});return kl(SH,CH,i,OH,o)}}),HH=function(e){return{element:function(){return e.element().dom()}}},EH=function(t){return MH.sketch(function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(o=e,i=t,V(i,function(e){var t=e.name,n=e.settings;return o.slot(t,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Bk([ei(function(e){n.onrender&&n.onrender(HH(e))}),Xr(Ut(),function(o,e){var r=e.event();F(i,function(e){return e.name===r.name()}).each(function(e){var t=e.settings,n=r.visible()?t.onshow:t.onhide;n&&n(HH(o))})})])})})),slotBehaviours:Bk([ei(function(e){return MH.hideAllSlots(e)})])};var o,i})},VH=oo("FixSizeEvent"),AH=oo("AutoSizeEvent"),BH={setSidebar:function(e,t){Hm.getCurrent(e).each(function(e){return fh.set(e,[EH(t)])})},toggleSidebar:function(e,n){Hm.getCurrent(e).each(function(t){Hm.getCurrent(t).each(function(e){qp.hasGrown(t)?MH.isShowing(e,n)?qp.shrink(t):(MH.hideAllSlots(e),MH.showSlot(e,n)):(MH.hideAllSlots(e),MH.showSlot(e,n),qp.grow(t))})})},whichSidebar:function(e){return Hm.getCurrent(e).bind(function(e){return qp.isGrowing(e)||qp.hasGrown(e)?Hm.getCurrent(e).bind(function(t){return F(MH.getSlotNames(t),function(e){return MH.isShowing(t,e)})}):P.none()})},renderSidebar:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"]},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:wi([qp.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){Hm.getCurrent(e).each(MH.hideAllSlots),io(e,AH)},onGrown:function(e){io(e,AH)},onStartGrow:function(e){ao(e,VH,{width:Ka.getRaw(e.element(),"width").getOr("")})},onStartShrink:function(e){ao(e,VH,{width:yf(e.element())+"px"})}}),fh.config({}),Hm.config({find:function(e){var t=fh.contents(e);return K(t)}})])}],behaviours:wi([iz(0),Om("sidebar-sliding-events",[Xr(VH,function(e,t){Ka.set(e.element(),"width",t.event().width())}),Xr(AH,function(e,t){Ka.remove(e.element(),"width")})])])}}},DH=function(e){return Sp.sketch({dom:{tag:"div",classes:["tox-toolbar__group"]},components:[Sp.parts().items({})],items:e.items,markers:{itemSelector:".tox-tbtn, .tox-split-button, .tox-toolbar-nav-js"},tgroupBehaviours:wi([Nm.config({})])})},RH=function(n){return xp.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"]},components:[xp.parts().groups({})],toolbarBehaviours:wi([ds.config({mode:"cyclic",onEscape:n.onEscape}),Om("toolbar-events",[ei(function(e){var t=V(n.initGroups,DH);xp.setGroups(e,t)})])])})},FH=rT.optional({factory:DT,name:"menubar",schema:[gr("dom"),gr("getSink")]}),IH=rT.optional({factory:{sketch:function(e){return RH({uid:e.uid,onEscape:function(){return e.onEscape(),P.some(!0)},initGroups:[]})}},name:"toolbar",schema:[gr("dom"),gr("onEscape")]}),_H=rT.optional({name:"socket",schema:[gr("dom")]}),LH=rT.optional({factory:{sketch:BH.renderSidebar},name:"sidebar",schema:[gr("dom")]}),NH=Tl({name:"OuterContainer",factory:function(n,e,t){var o={getSocket:function(e){return oT.getPart(e,n,"socket")},setSidebar:function(e,t){oT.getPart(e,n,"sidebar").each(function(e){return BH.setSidebar(e,t)})},toggleSidebar:function(e,t){oT.getPart(e,n,"sidebar").each(function(e){return BH.toggleSidebar(e,t)})},whichSidebar:function(e){return oT.getPart(e,n,"sidebar").bind(BH.whichSidebar).getOrNull()},getToolbar:function(e){return oT.getPart(e,n,"toolbar")},setToolbar:function(e,t){oT.getPart(e,n,"toolbar").each(function(e){xp.setGroups(e,t)})},focusToolbar:function(e){oT.getPart(e,n,"toolbar").each(function(e){ds.focusIn(e)})},setMenubar:function(e,t){oT.getPart(e,n,"menubar").each(function(e){DT.setMenus(e,t)})},focusMenubar:function(e){oT.getPart(e,n,"menubar").each(function(e){DT.focus(e)})}};return{uid:n.uid(),dom:n.dom(),components:e,apis:o,behaviours:n.behaviours()}},configFields:[gr("dom"),gr("behaviours")],partFields:[FH,IH,_H,LH],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var o=V(n,function(e){return DH({items:e})});e.setToolbar(t,o)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),PH=navigator,jH=PH.userAgent,UH=function(e){return"matchMedia"in window&&matchMedia(e).matches};/Android/.test(jH),hT=(hT=!(gT=/WebKit/.test(jH))&&/MSIE/gi.test(jH)&&/Explorer/gi.test(PH.appName))&&/MSIE (\w+)\./.exec(jH)[1],vT=-1!==jH.indexOf("Trident/")&&(-1!==jH.indexOf("rv:")||-1!==PH.appName.indexOf("Netscape"))&&11,pT=-1!==jH.indexOf("Edge/")&&!hT&&!vT&&12,hT=hT||vT||pT,!gT&&!vT&&/Gecko/.test(jH),jH.indexOf("Mac"),bT=/(iPad|iPhone)/.test(jH),yT="FormData"in window&&"FileReader"in window&&"URL"in window&&!!DO,UH("only screen and (max-device-width: 480px)"),UH("only screen and (min-width: 800px)"),jH.indexOf("Windows Phone"),pT&&(gT=!1),!bT||yT||parseInt(jH.match(/AppleWebKit\/(\d*)/)[1],10),window.getSelection&&window,hT&&!pT&&document.documentMode;var WH,GH,XH,YH=Array.isArray,$H=function(e,t,n){var o,r;if(!e)return 0;if(n=n||e,e.length!==undefined){for(o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return 0}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return 0;return 1},qH=function(e,t,n){var o,r;for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},KH={isArray:YH,toArray:function(e){var t,n,o=e;if(!YH(e))for(o=[],t=0,n=e.length;t<n;t++)o[t]=e[t];return o},each:$H,map:function(n,o){var r=[];return $H(n,function(e,t){r.push(o(e,t,n))}),r},filter:function(n,o){var r=[];return $H(n,function(e,t){o&&!o(e,t,n)||r.push(e)}),r},indexOf:function(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,o){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(o,n,e[r],r);return n},findIndex:qH,find:function(e,t,n){var o=qH(e,t,n);return-1!==o?e[o]:undefined},last:function(e){return e[e.length-1]}},JH=function(e,t){return t?!("array"!==t||!KH.isArray(e))||typeof e===t:e!==undefined},QH=(KH.isArray,JH),ZH=(KH.toArray,function(e,t,n){var o;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n}),eE=(KH.each,KH.map,KH.filter,KH.indexOf,function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),tE=function(e,t){for(var n,o,r,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u,c=arguments;for(n=1,o=c.length;n<o;n++)for(r in t=c[n])t.hasOwnProperty(r)&&(u=t[r])!==undefined&&(e[r]=u);return e},nE=Tz.trim,oE=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},rE=oE("true"),iE=oE("false"),aE=function(e,t,n,o,r){return{type:e,title:t,url:n,level:o,attach:r}},uE=function(e){return e.innerText||e.textContent},cE=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)!==undefined&&lE(e);var t},sE=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},lE=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return rE(e)}return!1}(e)&&!iE(e)},fE=function(e){return sE(e)&&lE(e)},dE=function(e){var t,n,o=(t=e).id?t.id:oo("h");return aE("header",uE(e),"#"+o,sE(n=e)?parseInt(n.nodeName.substr(1),10):0,function(){e.id=o})},mE=function(e){var t=e.id||e.name,n=uE(e);return aE("anchor",n||"#"+t,"#"+t,0,N)},gE=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,V(uu(Yt.fromDom(n),t),function(e){return e.dom()})},hE=function(e){return 0<nE(e.title).length},vE=function(e){var t,n=gE(e);return B((t=n,V(B(t,fE),dE)).concat(V(B(n,cE),mE)),hE)},pE="tinymce-url-history",bE=function(e){return x(e)&&/^https?/.test(e)},yE=function(e){return w(e)&&function(e,t){for(var n=ae(e),o=0,r=n.length;o<r;o++){var i=n[o],a=e[i];if(t(a,i,e))return P.some(a)}return P.none()}(e,function(e){return!(S(t=e)&&t.length<=5&&G(t,bE));var t}).isNone()},xE=function(){var e,t=localStorage.getItem(pE);if(null===t)return{};try{e=JSON.parse(t)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+pE+" was not valid JSON",n),{};throw n}return yE(e)?e:(console.log("Local storage "+pE+" was not valid format",e),{})},wE=function(e){var t=xE();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:[]},kE=function(t,e){if(bE(t)){var n=xE(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=B(o,function(e){return e!==t});n[e]=[t].concat(r).slice(0,5),function(e){if(!yE(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));localStorage.setItem(pE,JSON.stringify(e))}(n)}},SE=Object.prototype.hasOwnProperty,CE=function(e){return!!e},zE=function(e){return se(ZH(e,/[, ]/),CE)},OE=function(e,t){return SE.call(e,t)?P.some(e[t]):P.none()},TE=function(e,t,n){var o=OE(e,t).getOr(n);return x(o)?P.some(o):P.none()},ME=function(u){return function(r){return(e=u.settings,t=r,n=P.some(e.file_picker_types).filter(CE),o=P.some(e.file_browser_callback_types).filter(CE),i=n.or(o).map(zE).fold(function(){return!0},function(e){return OE(e,t).getOr(!1)}),a=P.some(e.file_picker_callback).filter(z),i?a:P.none()).map(function(o){return function(t){return kb.nu(function(n){var e=tE({filetype:r},P.from(t.meta).getOr({}));o.call(u,function(e,t){if(!x(e))throw new Error("Expected value to be string");if(t!==undefined&&!w(t))throw new Error("Expected meta to be a object");n({value:e,meta:t})},t.value,e)})}});var e,t,n,o,i,a}},HE=function(e){return{getHistory:wE,addToHistory:kE,getLinkInformation:(n=e,function(){return!1===n.settings.typeahead_urls?P.none():P.some({targets:vE(n.getBody()),anchorTop:TE(n.settings,"anchor_top","#top"),anchorBottom:TE(n.settings,"anchor_bottom","#bottom")})}),getValidationHandler:(t=e,function(){var e=t.settings.filepicker_validator_handler;return z(e)?P.some(e):P.none()}),getUrlPicker:ME(e)};var t,n},EE=function(e){return{colorPicker:(n=e,function(e,t){zC.colorPickerDialog(n)(e,t)}),hasCustomColors:(t=e,function(){return dC(t)})};var t,n},VE=function(e,t,n){var o,r,i,a,u,c,s,l,f,d={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons}},interpreter:function(e){return nT(eT,e,d)},anchors:{toolbar:function(){return{anchor:"hotspot",hotspot:NH.getToolbar(e).getOrDie("Could not find a toolbar element"),layouts:{onRtl:function(){return[gx]},onLtr:function(){return[hx]}}}},banner:function(){return{anchor:"hotspot",hotspot:NH.getToolbar(e).getOrDie("Could not find a toolbar element"),layouts:{onRtl:function(){return[yx]},onLtr:function(){return[yx]}}}},cursor:function(){return{anchor:"selection",root:Yt.fromDom(n.getBody()),getSelection:function(){var e=n.selection.getRng();return P.some(pv.range(Yt.fromDom(e.startContainer),e.startOffset,Yt.fromDom(e.endContainer),e.endOffset))}}},node:function(e){return{anchor:"selection",root:Yt.fromDom(n.getBody()),getSelection:function(){return P.some(pv.range(e,0,e,0))}}}},getSink:function(){return ie.value(t)}},urlinput:HE(n),styleselect:(o=n,r=function(e){return function(){return o.formatter.match(e)}},i=function(t){return function(){var e=o.formatter.get(t);return e!==undefined?P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:o.formatter.getCssText(t)}):P.none()}},a=function(e){var t=e.items;return t!==undefined&&0<t.length?W(t,a):[e.format]},u=Ee([]),c=Ee([]),s=Ee([]),l=Ee([]),f=Ee(!1),o.on("init",function(){var e=CT(o),t=lT(o,e,r,i);u.set(t),c.set(W(t,a))}),o.on("addStyleModifications",function(e){var t=lT(o,e.items,r,i);s.set(t),f.set(e.replace),l.set(W(t,a))}),{getData:function(){var e=f.get()?[]:u.get(),t=s.get();return e.concat(t)},getFlattenedKeys:function(){var e=f.get()?[]:c.get(),t=l.get();return e.concat(t)}}),colorinput:EE(n)};return d},AE=tinymce.util.Tools.resolve("tinymce.util.Delay"),BE=[Er("disabled",!1),Sr("tooltip"),Sr("icon"),Sr("text"),Vr("onSetup",function(){return N})],DE=Uo([vr("type"),pr("onAction")].concat(BE)),RE=function(e){return nr("toolbarbutton",DE,e)},FE=Uo([vr("type"),Sr("tooltip"),Sr("icon"),Sr("text"),pr("fetch"),Vr("onSetup",function(){return N})]),IE=Uo([vr("type"),Sr("tooltip"),Sr("icon"),Sr("text"),(WH="select",kr(WH,mr)),pr("fetch"),Vr("onSetup",function(){return N}),Hr("presets","normal"),Or("columns",1),pr("onAction"),pr("onItemAction")]),_E=[Er("active",!1)].concat(BE),LE=Uo(_E.concat([vr("type"),pr("onAction")])),NE=function(e){return nr("ToggleButton",LE,e)},PE=[Vr("predicate",function(){return!1}),Or("scope","node"),Or("position","selection")],jE=BE.concat([Or("type","contextformbutton"),Or("primary",!1),pr("onAction"),Br("original",b)]),UE=_E.concat([Or("type","contextformbutton"),Or("primary",!1),pr("onAction"),Br("original",b)]),WE=BE.concat([Or("type","contextformbutton")]),GE=_E.concat([Or("type","contextformtogglebutton")]),XE=ur("type",{contextformbutton:jE,contextformtogglebutton:UE}),YE=Uo([Or("type","contextform"),Vr("initValue",function(){return""}),Sr("label"),xr("commands",XE),kr("launch",ur("type",{contextformbutton:WE,contextformtogglebutton:GE}))].concat(PE)),$E=Uo([Or("type","contexttoolbar"),xr("items",fr)].concat(PE)),qE=function(t){return{isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},KE=function(t){return{setActive:function(e){Aa.set(t,e)},isActive:function(){return Aa.isOn(t)},isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},JE=oo("focus-button"),QE=function(t,n,e,o,r){var i,a=e.map(function(e){return{"aria-label":e,title:e}}).getOr({});return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:a},components:ok([t.map(function(e){return _z(e,r.icons)}),n.map(function(e){return Lz(e,"tox-tbtn")})]),eventOrder:(i={},i[_e()]=["focusing","alloy.base.behaviour","common-button-display-events"],i),buttonBehaviours:wi([Om("common-button-display-events",[Xr(_e(),function(e,t){t.event().prevent(),io(e,JE)})])].concat(o.map(function(e){return HM.config({channel:e,initialData:{icon:t,text:n},renderComponents:function(e,t){return ok([e.icon.map(function(e){return _z(e,r.icons)}),e.text.map(function(e){return Lz(e,"tox-tbtn")})])}})}).toArray()))}},ZE=function(e,t,n){var o,r=Ee(N),i=QE(e.icon,e.text,e.tooltip,P.none(),n);return Ml.sketch({dom:i.dom,components:i.components,eventOrder:aT,buttonBehaviours:wi([Om("toolbar-button-events",[(o={onAction:e.onAction,getApi:t.getApi},oi(function(t,e){Zw(o,t)(function(e){ao(t,iT,{buttonApi:e}),o.onAction(e)})})),ek(t,r),tk(t,r)]),Qw(e.disabled)].concat(t.toolbarButtonBehaviours))})},eV=function(e,t,n){return ZE(e,{toolbarButtonBehaviours:[].concat(0<n.length?[Om("toolbarButtonWith",n)]:[]),getApi:qE,onSetup:e.onSetup},t.backstage.shared.providers)},tV=function(e,t,n){return te(ZE(e,{toolbarButtonBehaviours:[fh.config({}),Aa.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[Om("toolbarToggleButtonWith",n)]:[]),getApi:KE,onSetup:e.onSetup},t.backstage.shared.providers))},nV=function(t,e){var n,r,o,i=oo("channel-update-split-dropdown-display"),a=function(n){return{isDisabled:function(){return!0},setDisabled:function(){},setIconFill:function(e,t){fu(n.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){Un.set(e,"fill",t)})},setIconStroke:function(e,t){fu(n.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){Un.set(e,"stroke",t)})},setActive:function(e){Aa.set(n,e)},isActive:function(){return Aa.isOn(n)}}},u=Ee(N),c={getApi:a,onSetup:t.onSetup};return ZM.sketch({dom:{tag:"div",classes:["tox-split-button"]},onExecute:function(e){t.onAction(a(e))},onItemExecute:function(e,t,n){},splitDropdownBehaviours:wi([Aa.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Om("split-dropdown-events",[Xr(JE,Ua.focus),ek(c,u),tk(c,u)])]),toggleClass:"mce-active",lazySink:e.getSink,fetch:(n=a,r=t,o=e.providers,function(t){return kb.nu(function(e){return r.fetch(e)}).map(function(e){return Qk(te(Kk(oo("menu-value"),e,function(e){r.onItemAction(n(t),e)},r.columns,r.presets,zw.CLOSE_ON_EXECUTE,r.select.getOr(function(){return!1}),o),{movement:_k(r.columns,r.presets),menuBehaviours:Bk("auto"!==r.columns?[]:[ei(function(o,e){Vk(o,4,Uw(r.presets)).each(function(e){var t=e.numRows,n=e.numColumns;ds.setGridSize(o,t,n)})})])}))})}),parts:{menu:Ik(0,t.columns,t.presets)},components:[ZM.parts().button(QE(t.icon,t.text,t.tooltip,P.some(i),e.providers)),ZM.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ww("icon-chevron-down",e.providers.icons,U(""))}})]})},oV=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rV=undefined&&undefined.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},iV=function(i,a){return Xr(iT,function(e,t){var n,o=i.get(e),r=(n=o,{hide:function(){return io(n,Rt())},getValue:function(){return af.getValue(n)}});a.onAction(r,t.event().buttonApi())})},aV=function(e,t,n){var o,r,i,a,u,c,s,l,f,d,m,g,h={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?(s=e,f=h,(d=(l=t).original).primary,m=rV(d,["primary"]),g=or(NE(oV({},m,{type:"togglebutton",onAction:function(){}}))),tV(g,f,[iV(s,l)])):(o=e,i=h,(a=(r=t).original).primary,u=rV(a,["primary"]),c=or(RE(oV({},u,{type:"button",onAction:function(){}}))),eV(c,i,[iV(o,r)]))},uV=function(e,t){var n,o,r,i,a=oo("context-form-field"),u=e.label.map(function(e){return{dom:{tag:"label",classes:["tox-toolbar-label"],attributes:{"for":a},innerHtml:e}}}),c=e.label.fold(function(){return{}},function(e){return{id:a}}),s=Jd(Im.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:wi([ds.config({mode:"special",onEnter:function(e){return l.findPrimary(e).map(function(e){return uo(e),!0})},onLeft:function(e,t){return t.cut(),P.none()},onRight:function(e,t){return t.cut(),P.none()}})])})),l=(n=s,o=e.commands,r=t,i=V(o,function(e){return Jd(aV(n,e,r))}),{asSpecs:function(){return V(i,function(e){return e.asSpec()})},findPrimary:function(n){return Ae(o,function(e,t){return e.primary?P.from(i[t]).bind(function(e){return e.getOpt(n)}).filter(k(eg.isDisabled)):P.none()})}});return RH({uid:oo("context-toolbar"),initGroups:[{items:u.toArray().concat([s.asSpec()])},{items:l.asSpecs()}],onEscape:P.none})},cV=oo("forward-slide"),sV=oo("backward-slide"),lV=oo("change-slide-event"),fV="tox-pop--resizing",dV=function(e,t,n){for(var o=e.dom(),r=z(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Yt.fromDom(o),a=t(i);if(a.isSome())return a;if(r(i))break}return P.none()},mV=dV,gV=function(t,e){return Ae(e,function(e){return e.predicate(t.dom())?P.some({toolbarApi:e,elem:t}):P.none()})},hV=function(t,n){var e=function(e){return e.dom()===n.getBody()},o=Yt.fromDom(n.selection.getNode());return gV(o,t.inNodeScope).orThunk(function(){return gV(o,t.inEditorScope).orThunk(function(){return mV(o,function(e){return gV(e,t.inNodeScope)},e)})})},vV=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},pV=function(n,r){var e={},i=[],a=[],u={},c={},o=function(t,n){var o=or(nr("ContextForm",YE,n));(e[t]=o).launch.map(function(e){u["form:"+t]=vV({},n.launch,{type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):i.push(o),c[t]=o},s=function(e,t){var n,o=(n=t,nr("ContextToolbar",$E,n)).getOrDie();"editor"===t.scope?a.push(o):i.push(o),c[e]=o},t=ae(n);return A(t,function(e){var t=n[e];"contextform"===t.type?o(e,t):"contexttoolbar"===t.type&&s(e,t)}),{forms:e,inNodeScope:i,inEditorScope:a,lookupTable:c,formNavigators:u}},bV=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],yV=function(n,e){var t=P.some(function(t){return function(){var e=F(bV,function(e){return n.formatter.match(e.format)}).fold(function(){return"Align"},function(e){return e.title});ao(t,uT,{text:e})}}),o={type:"basic",data:bV};return dT(n,e,o,{isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getPreviewFor:function(e){return function(){return P.none()}},onAction:function(e){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(e.format)?n.formatter.remove(e.format):n.formatter.apply(e.format)})}},nodeChangeHandler:t})},xV=function(o,r){return function(e,t){var n=o(e).fold(h(ie.error,ar),ie.value).getOrDie();return r(n,t)}},wV={button:xV(RE,function(e,t){return eV(e,t,[])}),togglebutton:xV(NE,function(e,t){return tV(e,t,[])}),menubutton:xV(function(e){return nr("menubutton",FE,e)},function(e,t){return ET(e,"tox-tbtn",t.backstage.shared,"button")}),splitbutton:xV(function(e){return nr("SplitButton",IE,e)},function(e,t){return nV(e,t.backstage.shared)}),styleSelectButton:function(e,t){return n=e,o=t.backstage,r=o.styleselect,dT(n,o,r,zT(n));var n,o,r},fontsizeSelectButton:function(e,t){return n=e,o=t.backstage,r=MT(n),dT(n,o,r.dataset,r);var n,o,r},fontSelectButton:function(e,t){return n=e,o=t.backstage,r=OT(n),dT(n,o,r.dataset,r);var n,o,r},formatButton:function(e,t){return n=e,o=t.backstage,r=wT(n),dT(n,o,r.dataset,r);var n,o,r},alignMenuButton:function(e,t){return yV(e,t.backstage)}},kV={styleselect:wV.styleSelectButton,fontsizeselect:wV.fontsizeSelectButton,fontselect:wV.fontSelectButton,formatselect:wV.formatButton,align:wV.alignMenuButton},SV=function(t,n,o){var e=(!1===n.toolbar?"":n.toolbar===undefined||!0===n.toolbar?"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image":n.toolbar).split("|"),r=V(e,function(e){return e.trim().split(" ")});return V(r,function(e){return W(e,function(e){return 0===e.trim().length?[]:ze(n.buttons,e.toLowerCase()).fold(function(){return ze(kV,e.toLowerCase()).map(function(e){return e(t,o)}).orThunk(function(){return console.error("No representation for toolbarItem: "+e),P.none()})},function(e){return n=o,ze(wV,(t=e).type).fold(function(){return console.error("skipping button defined by",t),P.none()},function(e){return P.some(e(t,n))});var t,n}).toArray()})})},CV=function(u,e,i,c){var n,o,s=Ug((n={sink:i,onEscape:function(){return u.focus(),P.some(!0)}},o=Ee([]),pw.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){o.set([]),pw.getContent(e).each(function(e){Ka.remove(e.element(),"visibility")}),Pi.remove(e.element(),fV),Ka.remove(e.element(),"width")},inlineBehaviours:wi([Om("context-toolbar-events",[Zr(Ke(),function(e,t){pw.getContent(e).each(function(e){}),Pi.remove(e.element(),fV),Ka.remove(e.element(),"width")}),Xr(lV,function(t,n){Ka.remove(t.element(),"width");var e=yf(t.element());pw.setContent(t,n.event().contents()),Pi.add(t.element(),fV);var o=yf(t.element());Ka.set(t.element(),"width",e+"px"),pw.getContent(t).each(function(e){n.event().focus().bind(function(e){return Ki(e),Zi(t.element())}).orThunk(function(){return ds.focusIn(e),Qi()})}),setTimeout(function(){Ka.set(t.element(),"width",o+"px")},0)}),Xr(cV,function(e,t){pw.getContent(e).each(function(e){o.set(o.get().concat([{bar:e,focus:Qi()}]))}),ao(e,lV,{contents:t.event().forwardContents(),focus:P.none()})}),Xr(sV,function(t,e){J(o.get()).each(function(e){o.set(o.get().slice(0,o.get().length-1)),ao(t,lV,{contents:Wg(e.bar),focus:e.focus})})})]),ds.config({mode:"special",onEscape:function(t){return J(o.get()).fold(function(){return n.onEscape()},function(e){return io(t,sV),P.some(!0)})}})]),lazySink:function(){return ie.value(n.sink)}})));u.on("init",function(){var e=u.getBody().ownerDocument.defaultView;qh(Yt.fromDom(e),"scroll",function(){l.get().each(function(e){var t=f.get().getOr(u.selection.getNode()).getBoundingClientRect(),n=u.contentAreaContainer.getBoundingClientRect(),o=t.bottom<0,r=t.top>n.height;o||r?Ka.set(s.element(),"display","none"):(Ka.remove(s.element(),"display"),tw.position(i,e,s))})})});var l=Ee(P.none()),f=Ee(P.none()),r=Ee(null),d=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:wi([ds.config({mode:"acyclic"}),Om("pop-dialog-wrap-events",[ei(function(e){u.shortcuts.add("ctrl+F9","focus statusbar",function(){return ds.focusIn(e)})}),ti(function(e){u.shortcuts.remove("ctrl+F9")})])])}},a=Ze(function(){return pV(e,function(e){var t=m(e);ao(s,cV,{forwardContents:d(t)})})}),m=function(e){var t,n,o=u.ui.registry.getAll().buttons,r=a();return"contexttoolbar"===e.type?(t=ne(o,r.formNavigators),n=SV(u,{buttons:t,toolbar:e.items.join(" ")},c),RH({uid:oo("context-toolbar"),initGroups:V(n,function(e){return{items:e}}),onEscape:P.none})):uV(e,c.backstage.shared.providers)};u.on("contexttoolbar-show",function(t){var e=a();ze(e.lookupTable,t.toolbarKey).each(function(e){g(e,t.target===u?P.none():P.some(t)),pw.getContent(s).each(ds.focusIn)})});var g=function(e,t){v();var n,o,r=m(e),i=u.selection.getNode(),a=(n=e.position,o=Yt.fromDom(i),te(c.backstage.shared.anchors.node(o),{bubble:ix(10,12,{valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]}),layouts:{onLtr:function(){return"line"===n?[xx]:[bx,yx,vx,gx,px,hx]},onRtl:function(){return"line"===n?[wx]:[bx,yx]}},overrides:{maxHeightFunction:ex()}}));l.set(P.some(a)),f.set(t),pw.showAt(s,a,d(r)),Ka.remove(s.element(),"display")},h=function(){var e=a();hV(e,u).fold(function(){l.set(P.none()),pw.hide(s)},function(e){g(e.toolbarApi,P.some(e.elem.dom()))})},v=function(){var e=r.get();null!==e&&(clearTimeout(e),r.set(null))};u.on("click keyup setContent ObjectResized nodeChange",function(e){var t;t=AE.setEditorTimeout(u,h,0),v(),r.set(t)})},zV=function(e,n,o){var t=qh(Yt.fromDom(document),"mousedown",function(t){A([n,o],function(e){e.broadcastOn([dw()],{target:t.target()})})}),r=qh(Yt.fromDom(document),"touchstart",function(t){A([n,o],function(e){e.broadcastOn([dw()],{target:t.target()})})}),i=qh(Yt.fromDom(document),"mouseup",function(t){0===t.raw().button&&A([n,o],function(e){e.broadcastOn([mw()],{target:t.target()})})}),a=function(t){A([n,o],function(e){e.broadcastOn([dw()],{target:Yt.fromDom(t.target)})})};e.on("mousedown",a),e.on("touchstart",a);var u=function(t){0===t.button&&A([n,o],function(e){e.broadcastOn([mw()],{target:Yt.fromDom(t.target)})})};e.on("mouseup",u),e.on("remove",function(){e.off("mousedown",a),e.off("touchstart",a),e.off("mouseup",u),Co(n),Co(o),n.destroy(),o.destroy(),t.unbind(),r.unbind(),i.unbind()})},OV=function(e){return e.fire("SkinLoaded")},TV=function(e){var t=function(){e._skinLoaded=!0,OV(e)};return function(){e.initialized?t():e.on("init",t)}},MV=function(e,t){var n,o=function(e){var t=e.settings,n=t.skin,o=t.skin_url;if(!1!==n){var r=n||"oxide";o=o?e.documentBaseURI.toAbsolute(o):ay.baseURL+"/skins/"+r}return o}(t);o&&(n=o+"/skin.min.css",t.contentCSS.push(o+(e?"/content.inline":"/content")+".min.css")),0==(!1===t.settings.skin)&&n?ea.DOM.styleSheetLoader.load(n,TV(t)):TV(t)()},HV=f(MV,!1),EV=f(MV,!0),VV={render:function(n,o,e,t,r){var i,a;HV(n),i=Yt.fromDom(r),a=o.mothership,So(i,a,Sn.after),ko(go.body(),o.uiMothership),n.on("init",function(){NH.setToolbar(o.outerContainer,SV(n,e,{backstage:t})),NH.setMenubar(o.outerContainer,BT(n,e,t)),NH.setSidebar(o.outerContainer,n.sidebars||[])});var u=NH.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");return n.addCommand("ToggleSidebar",function(e,t){NH.toggleSidebar(o.outerContainer,t),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return NH.whichSidebar(o.outerContainer)}),{iframeContainer:u.element().dom(),editorContainer:o.outerContainer.element().dom()}},getBehaviours:function(e){return[]}},AV={render:function(e,t,n,o,r){EV(e);var i=t.outerContainer,a=ea.DOM;ko(go.body(),t.mothership),ko(go.body(),t.uiMothership);var u=function(){Ka.setAll(i.element(),{position:"absolute",top:wy.absolute(Yt.fromDom(e.getBody())).top()-Za(i.element())+"px",left:wy.absolute(Yt.fromDom(e.getBody())).left()+"px"})};return e.on("init",function(){NH.setToolbar(t.outerContainer,SV(e,n,{backstage:o})),NH.setMenubar(t.outerContainer,BT(e,n,o)),u()}),e.on("ResizeWindow",u),e.on("activate focus",function(){Ka.set(t.outerContainer.element(),"display","flex"),a.addClass(e.getBody(),"mce-edit-focus"),u(),oM.refresh(i)}),e.on("deactivate blur hide",function(){t.outerContainer&&(Ka.set(t.outerContainer.element(),"display","none"),a.removeClass(e.getBody(),"mce-edit-focus"))}),{}},getBehaviours:function(t){return[oM.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",contextual:{lazyContext:function(e){return P.from(t).map(function(e){return Yt.fromDom(e.getBody())})},fadeInClass:"tox-toolbar-dock-fadein",fadeOutClass:"tox-toolbar-dock-fadeout",transitionClass:"tox-toolbar-dock-transition"}})]}},BV=function(e,t){return{anchor:"makeshift",x:e,y:t}},DV=function(e,t){var n,o,r,i=ea.DOM.getPos(e);return n=t,o=i.x,r=i.y,BV(n.x+o,n.y+r)},RV=function(e,t){return"contextmenu"===t.type?e.inline?BV((o=t).pageX,o.pageY):DV(e.getContentAreaContainer(),BV((n=t).clientX,n.clientY)):FV(e);var n,o},FV=function(e){return{anchor:"selection",root:Yt.fromDom(e.selection.getNode())}},IV=function(e){return e.settings.contextmenu_never_use_native||!1},_V=function(e){var t,n=e.getParam("contextmenu","link image imagetools table spellchecker");return"string"==typeof(t=n)?t.split(/[ ,]/):t},LV={type:"separator"},NV=function(e){switch(e.type){case"separator":return LV;case"submenu":return{type:"menuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){return V(e.getSubmenuItems(),NV)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n()})}}var n},PV=function(c,e,s){var l=Ug(pw.sketch({dom:{tag:"div"},lazySink:e}));c.on("contextmenu",function(e){if(t=c,!e.ctrlKey||IV(t)){var t,n=RV(c,e),o=c.ui.registry.getAll(),r=_V(c),i=c.selection.getStart(!0),a=function u(r,n,e,i){var t=W(e,function(e){if(r.hasOwnProperty(e)){var t=r[e].update(i);if(0<t.length){var n=V(t,function(e){return x(e)?e:NV(e)}),o=["|"];return o.concat(n).concat(o)}return[]}return[e]}),o=R(t,function(e,t){return x(t)?n.hasOwnProperty(t)?e.concat([n[t]]):"|"===t&&0<e.length&&"separator"!==e[e.length-1].type?e.concat([LV]):e:e.concat([t])},[]);return 0<o.length&&"separator"===o[o.length-1].type&&o.pop(),o}(o.contextMenus,o.menuItems,r,i);0<a.length&&(e.preventDefault(),pw.showMenuAt(l,n,{menu:{markers:Rk("normal")},data:YS(a,zw.CLOSE_ON_EXECUTE,s.providers)}))}})},jV={},UV="en",WV=function(e){var t=jV[UV]||{},n=function(e){return QH(e,"function")?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||QH(e,"undefined")},r=function(e){return e=n(e),eE(t,e)?n(t[e]):e};if(o(e))return"";if(QH(e,"object")&&eE(e,"raw"))return n(e.raw);if(QH(e,"array")){var i=e.slice(1);e=r(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return eE(i,t)?n(i[t]):e})}return r(e).replace(/{context:\w+}$/,"")},GV=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},XV=function(i,a){return a.delimiter||(a.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"]},behaviours:wi([ds.config({mode:"flow",selector:"div[role=button]"}),Nm.config({}),fh.config({}),Om("elementPathEvents",[ei(function(r,e){i.on("nodeChange",function(e){var t,o,n=function(e){for(var t=[],n=e.length;0<n--;){var o=e[n];if(1===o.nodeType&&!GV(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||t.push({name:r.name,element:o}),r.isPropagationStopped())break}}return t}(e.parents);0<n.length&&fh.set(r,(t=V(n||[],function(t,e){return Ml.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":e,"tab-index":-1,"aria-level":e+1},innerHtml:t.name},action:function(e){i.focus(),i.selection.select(t.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+a.delimiter+" "}},R(t.slice(1),function(e,t){var n=e;return n.push(o),n.push(t),n},[t[0]])))})})])]),components:[]}};(XH=GH||(GH={}))[XH.None=0]="None",XH[XH.Both=1]="Both",XH[XH.Vertical=2]="Vertical";var YV,$V,qV=function(e,t,n,o){var r=e+t,i=n.filter(function(e){return r<e}),a=o.filter(function(e){return e<r});return i.or(a).getOr(r)},KV=function(r,e,t,i,n,o){var a,u,c={},s=n();if(c.height=qV(s,e.top(),function(e){var t=e<0?20:0,n=tS(r);if(e<0){var o=i+t;return n.filter(function(e){return o<e}).or(P.some(o))}return n}(e.top()),(a=r,P.from(a.getParam("max_height")).filter(O))),t===GH.Both){var l=o();c.width=qV(l,e.left(),eS(r),(u=r,P.from(u.getParam("max_width")).filter(O)))}return c},JV=function(r){var o=function(o){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],innerHtml:yw("icon-resize-handle",function(){return""})},behaviours:wi([wM.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,t,n){!function(e,t,n){var o,r=Yt.fromDom(e.getContainer()),i=(o=e).getContainer().scrollHeight-o.contentAreaContainer.scrollHeight,a=function(e,t){return Ka.getRaw(r,e).fold(t,function(e){return parseInt(e,10)})},u=KV(e,t,n,i,function(){return a("height",function(){return Za(r)})},function(){return a("width",function(){return yf(r)})});ce(u,function(e,t){return Ka.set(r,t,e+"px")});var c=yn.firstChild(Yt.fromDom(e.getContentAreaContainer()));if(0<u.height&&c.isSome()){var s=u.height-i;c.each(function(e){return Ka.set(e,"min-height",s+"px")})}}(r,n,o)},blockerClass:"tox-blocker"})])}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function(){var e=[];e.push(XV(r,{})),bt(r.settings.plugins,"wordcount")&&e.push({dom:{tag:"span",classes:["tox-statusbar__wordcount"]},components:[],behaviours:wi([fh.config({}),Om("wordcount-events",[ei(function(t){r.on("wordCountUpdate",function(e){fh.set(t,[Pg(e.wordCountText)])})})])])}),r.getParam("branding",!0,"boolean")&&e.push({dom:{tag:"span",classes:["tox-statusbar__branding"],styles:{"float":"right"},innerHtml:WV(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>'])},behaviours:wi([Nm.config({}),Ua.config({})])});var t,n=!1===(t=r.getParam("resize",!0))?GH.None:"both"===t?GH.Both:GH.Vertical;return n!==GH.None&&e.push(o(n)),e}(),behaviours:wi([ds.config({mode:"cyclic"}),Om("statusbar-events",[ei(function(e){r.shortcuts.add("alt+F11","focus statusbar",function(){return ds.focusIn(e)})})])])}},QV=function(e){var t=e.getParam("inline",!1,"boolean"),v=t?AV:VV,p=Ug({dom:Vl('<div class="tox tox-silver-sink tox-tinymce-aux"></div>'),behaviours:wi([tw.config({useFixed:!1})])}),b=function(){return ie.value(p)},n=NH.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},getSink:b,providers:{icons:function(){return e.ui.registry.getAll().icons}},onEscape:function(){e.focus()}}),o=NH.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},onEscape:function(){e.focus()}}),r=NH.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),i=NH.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),a=e.getParam("statusbar",!0,"boolean")&&!t?P.some(JV(e)):P.none(),u={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[r,i]},c=!1!==e.getParam("toolbar",!0,"boolean"),s=!1!==e.getParam("menubar",!0,"boolean"),l=j([s?[n]:[],c?[o]:[],t?[]:[u],t?[]:a.toArray()]),y=Ug(NH.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"],styles:{visibility:"hidden"}},components:l,behaviours:wi(v.getBehaviours(e))}));e.shortcuts.add("alt+F10","focus toolbar",function(){NH.focusToolbar(y)});var x=lb(y),w=lb(p),k=VE(y,p,e);return zV(e,x,w),{mothership:x,uiMothership:w,backstage:k,renderUI:function(e,t){PV(e,b,k.shared);var n,o,r,i=e.ui.registry.getAll(),a=i.buttons,u=i.menuItems,c=i.contextToolbars,s={menuItems:u,buttons:a,menus:e.settings.menu?se(e.settings.menu,function(e){return ne(e,{items:e.items})}):{},menubar:e.settings.menubar,toolbar:e.settings.toolbar,sidebar:e.sidebars?e.sidebars:[]};CV(e,c,p,{backstage:k});var l=e.settings,f=e.getElement(),d=ea.DOM;n=l.width||d.getStyle(f,"width")||"100%",o=l.height||d.getStyle(f,"height")||Math.max(f.offsetHeight,300);var m=tS(e),g=eS(e);(r=/^[0-9\.]+(|px)$/i).test(""+n)&&(n=g.map(function(e){return Math.max(parseInt(n,10),e)}).getOr(n)+"px"),r.test(""+o)&&(o=m.map(function(e){return Math.max(parseInt(o,10),e)}).getOr(o)+"px"),n&&Ka.set(y.element(),"width",n),!e.inline&&o&&Ka.set(y.element(),"height",o);var h={mothership:x,uiMothership:w,outerContainer:y};return v.render(e,h,s,k,f)},getUi:function(){return{channels:{broadcastAll:w.broadcast,broadcastOn:w.broadcastOn,register:function(){}}}}}},ZV=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},eA=function(n){var e=[{type:"menuitem",text:"Left",icon:"align-left",onAction:ZV(n,"alignleft")},{type:"menuitem",text:"Center",icon:"align-center",onAction:ZV(n,"aligncenter")},{type:"menuitem",text:"Right",icon:"align-right",onAction:ZV(n,"alignright")},{type:"menuitem",text:"Justify",icon:"align-justify",onAction:ZV(n,"alignjustify")}];n.ui.registry.addMenuItem("align",{text:"Align",icon:"align-left",hasSubmenu:!0,getSubmenuItems:function(){return e}});var t=function(t){return function(e){n.formatter?n.formatter.formatChanged(t.name,e.setActive):n.on("init",function(){n.formatter.formatChanged(t.name,e.setActive)})}};Tz.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(e){n.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return n.execCommand(e.cmd)},icon:e.icon,onSetup:t(e)})});var o={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-justify"};n.ui.registry.addButton(o.name,{tooltip:o.text,onAction:function(){return n.execCommand(o.cmd)},icon:o.icon,onSetup:t(o)})},tA=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},nA=function(i,a){return function(t){var e,n,o,r;return n=a,o=function(e){t.setActive(e)},r=function(e){o(e,n)},(e=i).formatter?e.formatter.formatChanged(n,r):e.on("init",function(){e.formatter.formatChanged(n,r)}),function(){}}},oA=function(e){var t,n,o;t=e,Tz.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:nA(t,e.name),onAction:tA(t,e.name)})}),n=e,Tz.each([{name:"outdent",text:"Decrease indent",action:"Outdent",icon:"outdent"},{name:"indent",text:"Increase indent",action:"Indent",icon:"indent"},{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){n.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return n.execCommand(e.action)}})}),o=e,Tz.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){o.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return o.execCommand(e.action)},onSetup:nA(o,e.name)})})},rA=function(e){var t;oA(e),t=e,Tz.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return t.execCommand(e.action)}})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:tA(t,"code")})},iA=function(e,t,n){var o=function(){return!!t.undoManager&&t.undoManager[n]()},r=function(){e.setDisabled(t.readonly||!o())};return e.setDisabled(!o()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},aA=function(e){var t,n;(t=e).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return iA(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return iA(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}}),(n=e).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return iA(e,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return iA(e,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},uA=function(e){var t,n;(t=e).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return t.execCommand("mceToggleVisualAid")}}),(n=e).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(e,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},cA=function(e){eA(e),rA(e),aA(e),zC.register(e),uA(e)},sA=[vr("type"),vr("text"),qo("level","level",To(),Zo(function(e){return M(["info","warn","error","success"],e)?ie.value(e):ie.error('Unsupported level: "'+e+'", choose one of "info", "warn", "error", "success".')})),vr("icon"),Or("url","")],lA=[vr("type"),vr("text"),Er("primary",!1),qo("name","name",Ho(function(){return oo("button-name")}),fr)],fA=[vr("type"),vr("name"),vr("label")],dA=["checked","unchecked","indeterminate"],mA=Zo(function(e){return M(dA,e)?ie.value(e):ie.error('Checkbox data: can only be a string of either "'+dA.join('" | "')+'" ')}),gA=[vr("type"),vr("name"),Sr("label")],hA=gA,vA=fr,pA=gA,bA=fr,yA=gA.concat([Or("flex",!1)]),xA=Wo(Qo),wA=[vr("type"),(YV="columns",hr(YV,lr)),qo("items","items",To(),Wo(Zo(function(e){return nr("Checking item of grid",NA,e).fold(function(e){return ie.error(ar(e))},function(e){return ie.value(e)})})))],kA=gA.concat([Er("sandboxed",!0),Er("flex",!1)]),SA=fr,CA=gA,zA=fr,OA=gA.concat([yr("items",[vr("text"),vr("value")]),Mr("size",1)]),TA=fr,MA=gA.concat([Er("constrain",!0)]),HA=Uo([vr("width"),vr("height")]),EA=gA.concat([Or("flex",!1)]),VA=fr,AA=gA.concat([Or("filetype","file")]),BA=Uo([vr("value"),Or("meta",{})]),DA=gA.concat([vr("type"),Hr("tag","textarea"),pr("init")]),RA=fr,FA=[vr("type"),vr("html")],IA=gA.concat([gr("currentState")]),_A=gA.concat([Or("columns",1)]),LA=($V=[vr("value"),Sr("text"),Sr("icon")],Yo($V)),NA=ur("type",{alertbanner:sA,button:lA,checkbox:fA,colorinput:hA,colorpicker:pA,dropzone:yA,grid:wA,iframe:kA,input:CA,selectbox:OA,sizeinput:MA,textarea:EA,urlinput:AA,customeditor:DA,htmlpanel:FA,imagetools:IA,collection:_A}),PA=[vr("type"),xr("items",NA)],jA=[vr("title"),xr("items",NA)],UA=[vr("type"),yr("tabs",jA)],WA=Uo([vr("type"),qo("name","name",Ho(function(){return oo("button-name")}),fr),vr("text"),Hr("align","end"),Er("primary",!1),Er("disabled",!1)]),GA=Uo([vr("title"),hr("body",ur("type",{panel:PA,tabpanel:UA})),Hr("size","normal"),xr("buttons",WA),Or("initialData",{}),Vr("onAction",N),Vr("onChange",N),Vr("onSubmit",N),Vr("onClose",N),Vr("onCancel",N),Or("onTabChange",N),wr("readyWhen")]),XA=function(e){return w(e)?[e].concat(W(de(e),XA)):S(e)?W(e,XA):[]},YA=function(e){return x(e.type)&&x(e.name)},$A={checkbox:mA,colorinput:vA,colorpicker:bA,dropzone:xA,input:zA,iframe:SA,sizeinput:HA,selectbox:TA,size:HA,textarea:VA,urlinput:BA,customeditor:RA,collection:LA},qA=function(e){var t=W(B(XA(e),YA),function(t){return(e=t,P.from($A[e.type])).fold(function(){return[]},function(e){return[hr(t.name,e)]});var e});return Uo(t)},KA=function(e){return{internalDialog:or(nr("dialog",GA,e)),dataValidator:qA(e),initialData:e.initialData}},JA={open:function(e,t){var n=KA(t);return e(n.internalDialog,n.initialData,n.dataValidator)},redial:function(e){return KA(e)}},QA=oo("update-dialog"),ZA=oo("update-title"),eB=oo("update-body"),tB=oo("update-footer"),nB=function(e){var n=[],o={};return ce(e,function(e,t){e.fold(function(){n.push(t)},function(e){o[t]=e})}),0<n.length?ie.error(n):ie.value(o)},oB=function(e){return K((t=e,n=function(e,t){return t<e?-1:e<t?1:0},(o=X.call(t,0)).sort(n),o));var t,n,o},rB=function(a){return{smartTabHeight:{extraEvents:[ei(function(e){fu(e.element(),'[role="tabpanel"]').each(function(n){var t;Ka.set(n,"visibility","hidden"),e.getSystem().getByDom(n).toOption().bind(function(e){var o,r,i,t=(r=n,i=e,V(o=a,function(e,t){fh.set(i,o[t].view());var n=r.dom().getBoundingClientRect();return fh.set(i,[]),n.height}));return oB(t)}).each(function(e){Ka.set(n,"height",e+"px")}),Ka.remove(n,"visibility"),t=e,K(a).each(function(e){return yH.showTab(t,e.value)})})}),Xr(lS,function(e,t){fu(e.element(),'[role="tabpanel"]').each(function(t){Ka.set(t,"visibility","hidden");var e=Ka.getRaw(t,"height").map(function(e){return parseInt(e,10)});Ka.remove(t,"height");var n=t.dom().getBoundingClientRect().height;e.forall(function(e){return e<n})?Ka.set(t,"height",n+"px"):e.each(function(e){Ka.set(t,"height",e+"px")}),Ka.remove(t,"visibility")})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}},iB="send-data-to-section",aB="send-data-to-view",uB=function(e,d){return{dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[],behaviours:wi([iz(0),HM.config({channel:eB,updateState:function(e,t){return P.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){switch(e.body.type){case"tabpanel":return[(r={tabs:e.body.tabs},i=d,a=Ee({}),u=function(e){var t=af.getValue(e),n=nB(t).getOr({}),o=a.get(),r=te(o,n);a.set(r)},c=function(e){var t=a.get();af.setValue(e,t)},s=Ee(null),l=V(r.tabs,function(e){return{value:e.title,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.title},view:function(){return[rg.sketch(function(t){return{dom:{tag:"div",classes:["tox-form"]},components:V(e.items,function(e){return tT(t,e,i)}),formBehaviours:wi([ds.config({mode:"acyclic",useTabstopAt:k(xz)}),Om("TabView.form.events",[ei(c),ti(u)]),xa.config({channels:Te([{key:iB,value:{onReceive:u}},{key:aB,value:{onReceive:c}}])})])}})]}}}),f=rB(l).smartTabHeight,yH.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(e,t,n){var o=af.getValue(t);ao(e,sS,{title:o,oldTitle:s.get()}),s.set(o)},tabs:l,components:[yH.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[mH.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:wi([Nm.config({})])}),yH.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:wi([Om("tabpanel",f.extraEvents),ds.config({mode:"acyclic"}),Hm.config({find:function(e){return K(yH.getViewItems(e))}}),af.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn([iB],{}),a.get()},setValue:function(e,t){a.set(t),e.getSystem().broadcastOn([aB],{})}}})])}))];default:return[(n={items:e.body.items},o=d,t=Jd(rg.sketch(function(t){return{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:V(n.items,function(e){return tT(t,e,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[t.asSpec()],behaviours:wi([ds.config({mode:"acyclic",useTabstopAt:k(xz)}),rz(t),fz(t,{postprocess:function(e){return nB(e).fold(function(e){return console.error(e),{}},function(e){return e})}})])})]}var n,o,t,r,i,a,u,c,s,l,f},initialData:e})])}},cB=function(o,n){var e=function(e,r){return Xr(e,function(n,o){t(n,function(e,t){r(e,o.event(),n)})})},t=function(t,n){HM.getState(t).get().each(function(e){n(e.internalDialog,t)})};return[Kr(Ue(),wz),e(aS,function(e){return e.onSubmit(o())}),e(nS,function(e,t){e.onChange(o(),{name:t.name()})}),e(iS,function(e,t){e.onAction(o(),{name:t.name(),value:t.value()})}),e(sS,function(e,t){e.onTabChange(o(),t.title())}),e(oS,function(e){n.onClose(),e.onClose()}),e(rS,function(e,t,n){e.onCancel(o()),io(n,oS)}),ti(function(e){var t=o();af.setValue(e,t.getData())}),Xr(cS,function(e,t){return n.onUnblock()}),Xr(uS,function(e,t){return n.onBlock(t.event())})]},sB=function(e,t){var n=function(e,t){for(var n=[],o=[],r=0,i=e.length;r<i;r++){var a=e[r];(t(a,r,e)?n:o).push(a)}return{pass:n,fail:o}}(t.map(function(e){return e.footerButtons}).getOr([]),function(e){return"start"===e.align}),o=function(e,t){return Em.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:V(t,function(e){return e.memento.asSpec()})})};return[o("start",n.pass),o("end",n.fail)]},lB=function(e){return{dom:Vl('<div class="tox-dialog__footer"></div>'),components:[],behaviours:wi([HM.config({channel:tB,initialData:e,updateState:function(e,t){var r=V(t.buttons,function(e){var t,n=Jd(Wz(t=e,t.type));return{name:e.name,align:e.align,memento:n}});return P.some({lookupByName:function(e,t){return n=e,o=t,F(r,function(e){return e.name===o}).bind(function(e){return e.memento.getOpt(n)});var n,o},footerButtons:r})},renderComponents:sB})])}},fB=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},dB=function(){return Ml.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":"Close"}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(e){io(e,rS)}})},mB=function(e,t){var n=function(e){return[Pg(e.title)]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:fB({},t.map(function(e){return{id:e}}).getOr({}))},components:n(e),behaviours:wi([HM.config({channel:ZA,renderComponents:n})])}},gB=function(t,n){if(t.getRoot().getSystem().isConnected()){var o=Hm.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return rg.getField(o,n).fold(function(){var e=t.getFooter();return HM.getState(e).get().bind(function(e){return e.lookupByName(o,n)})},function(e){return P.some(e)})}return P.none()},hB=function(c,o){var e=function(e){var t=c.getRoot();t.getSystem().isConnected()&&e(t)},s={getData:function(){var e=c.getRoot(),t=e.getSystem().isConnected()?c.getFormWrapper():e;return af.getValue(t)},setData:function(u){e(function(e){var t,n,o=s.getData(),r=ne(o,u),i=(t=r,n=c.getRoot(),HM.getState(n).get().map(function(e){return or(nr("data",e.dataValidator,t))}).getOr(t)),a=c.getFormWrapper();af.setValue(a,i)})},disable:function(e){gB(c,e).each(eg.disable)},enable:function(e){gB(c,e).each(eg.enable)},focus:function(e){gB(c,e).each(Ua.focus)},block:function(t){e(function(e){ao(e,uS,{message:t})})},unblock:function(){e(function(e){io(e,cS)})},showTab:function(n){e(function(e){var t=c.getBody();HM.getState(t).get().exists(function(e){return e.isTabPanel()})&&Hm.getCurrent(t).each(function(e){yH.showTab(e,n)})})},redial:function(n){e(function(e){var t=o(n);e.getSystem().broadcastOn([QA],t),e.getSystem().broadcastOn([ZA],t.internalDialog),e.getSystem().broadcastOn([eB],t.internalDialog),e.getSystem().broadcastOn([tB],t.internalDialog),s.setData(t.initialData)})},close:function(){e(function(e){io(e,oS)})}};return s},vB=function(e,t,n){var o,r,i,a,u,c,s,l,f,d=(r={title:e.internalDialog.title,draggable:!0},i=$M.parts().title(mB(r,P.none())),a=$M.parts().draghandle({dom:Vl('<div class="tox-dialog__draghandle"></div>')}),u=$M.parts().close(dB()),c=[i].concat(r.draggable?[a]:[]).concat([u]),Em.sketch({dom:Vl('<div class="tox-dialog__header"></div>'),components:c})),m=(s={body:e.internalDialog.body},l=n,$M.parts().body(uB(s,l))),g=(f={buttons:e.internalDialog.buttons},$M.parts().footer(lB(f))),h=cB(function(){return b},{onClose:function(){return t.closeWindow()},onBlock:function(n){$M.setBusy(p,function(e,t){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:Vl('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){$M.setIdle(p)}}),v="normal"!==e.internalDialog.size?"large"===e.internalDialog.size?"tox-dialog--width-lg":"tox-dialog--width-md":[],p=Ug($M.sketch({lazySink:n.shared.getSink,onEscape:function(e){return io(e,rS),P.some(!0)},useTabstopAt:function(e){return!xz(e)&&("button"!==_n.name(e)||"disabled"!==Un.get(e,"disabled"))},modalBehaviours:wi([HM.config({channel:QA,updateState:function(e,t){return P.some(t)},initialData:e}),Ua.config({}),Om("execute-on-form",h.concat([Zr(Ue(),function(e,t){ds.focusIn(e)})])),gz({})]),eventOrder:(o={},o[Et()]=["execute-on-form"],o[Lt()]=["reflecting","execute-on-form"],o),dom:{tag:"div",classes:["tox-dialog"].concat(v),styles:{position:"relative"}},components:[d,m,g],dragBlockClass:"tox-dialog-wrap",parts:{blocker:{dom:Vl('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}}})),b=hB({getRoot:function(){return p},getBody:function(){return $M.getBody(p)},getFooter:function(){return $M.getFooter(p)},getFormWrapper:function(){var e=$M.getBody(p);return Hm.getCurrent(e).getOr(e)}},t.redial);return{dialog:p,instanceApi:b}},pB=function(e,t,n){var o,r,i,a,u,c,s=oo("dialog-label"),l=Jd((i={title:e.internalDialog.title,draggable:!0},a=s,Em.sketch({dom:Vl('<div class="tox-dialog__header"></div>'),components:[mB(i,P.some(a)),dB()],containerBehaviours:wi([wM.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return du(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),f=Jd((u={body:e.internalDialog.body},uB(u,n))),d=Jd((c={buttons:e.internalDialog.buttons},lB(c))),m=cB(function(){return h},{onBlock:function(){},onUnblock:function(){},onClose:function(){return t.closeWindow()}}),g=Ug({dom:{tag:"div",classes:["tox-dialog"],attributes:(o={role:"dialog"},o["aria-labelledby"]=s,o)},eventOrder:(r={},r[Ht()]=[HM.name(),xa.name()],r[Et()]=["execute-on-form"],r[Lt()]=["reflecting","execute-on-form"],r),behaviours:wi([ds.config({mode:"cyclic",onEscape:function(e){return io(e,oS),P.some(!0)},useTabstopAt:function(e){return!xz(e)&&("button"!==_n.name(e)||"disabled"!==Un.get(e,"disabled"))}}),HM.config({channel:QA,updateState:function(e,t){return P.some(t)},initialData:e}),Om("execute-on-form",m),gz({})]),components:[l.asSpec(),f.asSpec(),d.asSpec()]}),h=hB({getRoot:function(){return g},getFooter:function(){return d.get(g)},getBody:function(){return f.get(g)},getFormWrapper:function(){var e=f.get(g);return Hm.getCurrent(e).getOr(e)}},t.redial);return{dialog:g,instanceApi:h}},bB=function(e){return $M.parts().close(Ml.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":"Close"}},action:e,buttonBehaviours:wi([Nm.config({})])}))},yB=function(){return $M.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},xB=function(e){return $M.parts().body({dom:{tag:"div",classes:["tox-dialog__body","todo-tox-fit"]},components:[{dom:Vl("<p>"+e+"</p>")}]})},wB=function(e){return $M.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},kB=function(n){return $M.sketch({lazySink:n.lazySink,onEscape:function(){return n.onCancel(),P.some(!0)},dom:{tag:"div",classes:["tox-dialog"].concat(n.extraClasses)},components:[{dom:{tag:"div",classes:["tox-dialog__header"]},components:[n.partSpecs.title,n.partSpecs.close]},n.partSpecs.body,n.partSpecs.footer],parts:{blocker:{dom:Vl('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}},modalBehaviours:wi([Om("basic-dialog-events",[Xr(rS,function(e,t){n.onCancel()}),Xr(aS,function(e,t){n.onSubmit()})])])})},SB=function(c){var a,u,o=(a=c.backstage.shared.getSink,{open:function(e,t){var n=function(e){$M.hide(e),t()},o=Jd(Wz({name:"close-alert",text:"Ok",primary:!0},"cancel")),r=Ug(kB({lazySink:function(){return a()},partSpecs:{title:yB(),close:bB(function(){n(r)}),body:xB(e),footer:wB([o.asSpec()])},onCancel:function(){return n(r)},onSubmit:N,extraClasses:["tox-alert-dialog"]}));$M.show(r);var i=o.get(r);Ua.focus(i)}}),r=(u=c.backstage.shared.getSink,{open:function(e,n){var t=function(e,t){$M.hide(e),n(t)},o=Jd(Wz({name:"yes",text:"Yes",primary:!0},"submit")),r=Wz({name:"no",text:"No",primary:!0},"cancel"),i=Ug(kB({lazySink:function(){return u()},partSpecs:{title:yB(),close:bB(function(){t(i,!1)}),body:xB(e),footer:wB([o.asSpec(),r])},onCancel:function(){return t(i,!1)},onSubmit:function(){return t(i,!0)},extraClasses:["tox-confirm-dialog"]}));$M.show(i);var a=o.get(i);Ua.focus(a)}}),i=function(e,i){return JA.open(function(e,t,n){var o=t,r=vB({dataValidator:n,initialData:o,internalDialog:e},{redial:JA.redial,closeWindow:function(){$M.hide(r.dialog),i(r.instanceApi)}},c.backstage);return $M.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},e)},s=function(e,a,u){return JA.open(function(e,t,n){var o=or(nr("data",n,t)),r=pB({dataValidator:n,initialData:o,internalDialog:e},{redial:JA.redial,closeWindow:function(){pw.hide(i),u(r.instanceApi)}},c.backstage),i=Ug(pw.sketch({lazySink:c.backstage.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:wi([Om("window-manager-inline-events",[Xr(Pt(),function(e,t){io(r.dialog,rS)})])])}));return pw.showAt(i,a,Wg(r.dialog)),r.instanceApi.setData(o),ds.focusIn(r.dialog),r.instanceApi},e)};return{open:function(e,t,n){return t!==undefined&&"toolbar"===t.inline?s(e,c.backstage.shared.anchors.toolbar(),n):t!==undefined&&"cursor"===t.inline?s(e,c.backstage.shared.anchors.cursor(),n):i(e,n)},openInlineDialog:s,alert:function(e,t,n){o.open(e,function(){n(),t()})},close:function(e){e.close()},confirm:function(e,t,n){r.open(e,function(e){n(),t(e)})}}};ro.add("silver",function(o){if(zt.detect().deviceType.isTouch()&&!o.getParam("inline",!1,"boolean"))return my(o);var e=QV(o),t=e.mothership,n=e.uiMothership,r=e.backstage,i=e.renderUI,a=e.getUi;cA(o),eo(oo("silver-demo"),t),eo(oo("silver-ui-demo"),n),Zk(o,r.shared);var u=SB({backstage:r});return{renderUI:f(i,o),getWindowManagerImpl:function(){var e,t=(e=o.windowManager.windows,P.from(e[e.length-1])).fold(function(){return{getParams:N,setParams:N}},function(e){return{getParams:e.getData,setParams:e.setData}}),n={getWindows:function(){return o.windowManager.windows},windows:o.windowManager.windows};return ne(u,t,n)},getNotificationManagerImpl:function(){return Cw(o,{backstage:r},n)},ui:a()}}),function ZB(){}}();